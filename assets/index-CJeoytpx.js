(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function hn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Xo(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ka(t){let e,n,i;t.length!==2?(e=hn,n=(l,c)=>hn(t(l),c),i=(l,c)=>t(l)-c):(e=t===hn||t===Xo?t:Ko,n=t,i=t);function r(l,c,f=0,u=l.length){if(f<u){if(e(c,c)!==0)return u;do{const m=f+u>>>1;n(l[m],c)<0?f=m+1:u=m}while(f<u)}return f}function a(l,c,f=0,u=l.length){if(f<u){if(e(c,c)!==0)return u;do{const m=f+u>>>1;n(l[m],c)<=0?f=m+1:u=m}while(f<u)}return f}function o(l,c,f=0,u=l.length){const m=r(l,c,f,u-1);return m>f&&i(l[m-1],c)>-i(l[m],c)?m-1:m}return{left:r,center:o,right:a}}function Ko(){return 0}function Yo(t){return t===null?NaN:+t}const Jo=ka(hn),Qo=Jo.right;ka(Yo).center;const jo=Math.sqrt(50),ts=Math.sqrt(10),es=Math.sqrt(2);function wn(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),o=a>=jo?10:a>=ts?5:a>=es?2:1;let l,c,f;return r<0?(f=Math.pow(10,-r)/o,l=Math.round(t*f),c=Math.round(e*f),l/f<t&&++l,c/f>e&&--c,f=-f):(f=Math.pow(10,r)*o,l=Math.round(t/f),c=Math.round(e/f),l*f<t&&++l,c*f>e&&--c),c<l&&.5<=n&&n<2?wn(t,e,n*2):[l,c,f]}function ns(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,a,o]=i?wn(e,t,n):wn(t,e,n);if(!(a>=r))return[];const l=a-r+1,c=new Array(l);if(i)if(o<0)for(let f=0;f<l;++f)c[f]=(a-f)/-o;else for(let f=0;f<l;++f)c[f]=(a-f)*o;else if(o<0)for(let f=0;f<l;++f)c[f]=(r+f)/-o;else for(let f=0;f<l;++f)c[f]=(r+f)*o;return c}function ui(t,e,n){return e=+e,t=+t,n=+n,wn(t,e,n)[2]}function is(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?ui(e,t,n):ui(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function rs(t){return t}var dn=1,Un=2,hi=3,tn=4,ji=1e-6;function as(t){return"translate("+t+",0)"}function os(t){return"translate(0,"+t+")"}function ss(t){return e=>+t(e)}function ls(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function fs(){return!this.__axis}function Ea(t,e){var n=[],i=null,r=null,a=6,o=6,l=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,f=t===dn||t===tn?-1:1,u=t===tn||t===Un?"x":"y",m=t===dn||t===hi?as:os;function g(p){var A=i??(e.ticks?e.ticks.apply(e,n):e.domain()),U=r??(e.tickFormat?e.tickFormat.apply(e,n):rs),L=Math.max(a,0)+l,D=e.range(),E=+D[0]+c,k=+D[D.length-1]+c,y=(e.bandwidth?ls:ss)(e.copy(),c),R=p.selection?p.selection():p,I=R.selectAll(".domain").data([null]),b=R.selectAll(".tick").data(A,e).order(),z=b.exit(),F=b.enter().append("g").attr("class","tick"),B=b.select("line"),x=b.select("text");I=I.merge(I.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(F),B=B.merge(F.append("line").attr("stroke","currentColor").attr(u+"2",f*a)),x=x.merge(F.append("text").attr("fill","currentColor").attr(u,f*L).attr("dy",t===dn?"0em":t===hi?"0.71em":"0.32em")),p!==R&&(I=I.transition(p),b=b.transition(p),B=B.transition(p),x=x.transition(p),z=z.transition(p).attr("opacity",ji).attr("transform",function(q){return isFinite(q=y(q))?m(q+c):this.getAttribute("transform")}),F.attr("opacity",ji).attr("transform",function(q){var H=this.parentNode.__axis;return m((H&&isFinite(H=H(q))?H:y(q))+c)})),z.remove(),I.attr("d",t===tn||t===Un?o?"M"+f*o+","+E+"H"+c+"V"+k+"H"+f*o:"M"+c+","+E+"V"+k:o?"M"+E+","+f*o+"V"+c+"H"+k+"V"+f*o:"M"+E+","+c+"H"+k),b.attr("opacity",1).attr("transform",function(q){return m(y(q)+c)}),B.attr(u+"2",f*a),x.attr(u,f*L).text(U),R.filter(fs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Un?"start":t===tn?"end":"middle"),R.each(function(){this.__axis=y})}return g.scale=function(p){return arguments.length?(e=p,g):e},g.ticks=function(){return n=Array.from(arguments),g},g.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),g):n.slice()},g.tickValues=function(p){return arguments.length?(i=p==null?null:Array.from(p),g):i&&i.slice()},g.tickFormat=function(p){return arguments.length?(r=p,g):r},g.tickSize=function(p){return arguments.length?(a=o=+p,g):a},g.tickSizeInner=function(p){return arguments.length?(a=+p,g):a},g.tickSizeOuter=function(p){return arguments.length?(o=+p,g):o},g.tickPadding=function(p){return arguments.length?(l=+p,g):l},g.offset=function(p){return arguments.length?(c=+p,g):c},g}function tr(t){return Ea(dn,t)}function cs(t){return Ea(hi,t)}var us={value:()=>{}};function Aa(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new _n(n)}function _n(t){this._=t}function hs(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}_n.prototype=Aa.prototype={constructor:_n,on:function(t,e){var n=this._,i=hs(t+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(t=i[a]).type)&&(r=ds(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(r=(t=i[a]).type)n[r]=er(n[r],t.name,e);else if(e==null)for(r in n)n[r]=er(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new _n(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,r=a.length;i<r;++i)a[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};function ds(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function er(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=us,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var di="http://www.w3.org/1999/xhtml";const nr={svg:"http://www.w3.org/2000/svg",xhtml:di,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),nr.hasOwnProperty(e)?{space:nr[e],local:t}:t}function _s(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===di&&e.documentElement.namespaceURI===di?e.createElement(t):e.createElementNS(n,t)}}function ps(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Sa(t){var e=Fn(t);return(e.local?ps:_s)(e)}function gs(){}function Di(t){return t==null?gs:function(){return this.querySelector(t)}}function ms(t){typeof t!="function"&&(t=Di(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,l=i[r]=new Array(o),c,f,u=0;u<o;++u)(c=a[u])&&(f=t.call(c,c.__data__,u,a))&&("__data__"in c&&(f.__data__=c.__data__),l[u]=f);return new Zt(i,this._parents)}function $a(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function vs(){return[]}function Ta(t){return t==null?vs:function(){return this.querySelectorAll(t)}}function ws(t){return function(){return $a(t.apply(this,arguments))}}function xs(t){typeof t=="function"?t=ws(t):t=Ta(t);for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o=e[a],l=o.length,c,f=0;f<l;++f)(c=o[f])&&(i.push(t.call(c,c.__data__,f,o)),r.push(c));return new Zt(i,r)}function Ra(t){return function(){return this.matches(t)}}function Na(t){return function(e){return e.matches(t)}}var ys=Array.prototype.find;function bs(t){return function(){return ys.call(this.children,t)}}function ks(){return this.firstElementChild}function Es(t){return this.select(t==null?ks:bs(typeof t=="function"?t:Na(t)))}var As=Array.prototype.filter;function Ss(){return Array.from(this.children)}function $s(t){return function(){return As.call(this.children,t)}}function Ts(t){return this.selectAll(t==null?Ss:$s(typeof t=="function"?t:Na(t)))}function Rs(t){typeof t!="function"&&(t=Ra(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,l=i[r]=[],c,f=0;f<o;++f)(c=a[f])&&t.call(c,c.__data__,f,a)&&l.push(c);return new Zt(i,this._parents)}function Ia(t){return new Array(t.length)}function Ns(){return new Zt(this._enter||this._groups.map(Ia),this._parents)}function xn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xn.prototype={constructor:xn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Is(t){return function(){return t}}function Ds(t,e,n,i,r,a){for(var o=0,l,c=e.length,f=a.length;o<f;++o)(l=e[o])?(l.__data__=a[o],i[o]=l):n[o]=new xn(t,a[o]);for(;o<c;++o)(l=e[o])&&(r[o]=l)}function Ms(t,e,n,i,r,a,o){var l,c,f=new Map,u=e.length,m=a.length,g=new Array(u),p;for(l=0;l<u;++l)(c=e[l])&&(g[l]=p=o.call(c,c.__data__,l,e)+"",f.has(p)?r[l]=c:f.set(p,c));for(l=0;l<m;++l)p=o.call(t,a[l],l,a)+"",(c=f.get(p))?(i[l]=c,c.__data__=a[l],f.delete(p)):n[l]=new xn(t,a[l]);for(l=0;l<u;++l)(c=e[l])&&f.get(g[l])===c&&(r[l]=c)}function Os(t){return t.__data__}function Ls(t,e){if(!arguments.length)return Array.from(this,Os);var n=e?Ms:Ds,i=this._parents,r=this._groups;typeof t!="function"&&(t=Is(t));for(var a=r.length,o=new Array(a),l=new Array(a),c=new Array(a),f=0;f<a;++f){var u=i[f],m=r[f],g=m.length,p=Fs(t.call(u,u&&u.__data__,f,i)),A=p.length,U=l[f]=new Array(A),L=o[f]=new Array(A),D=c[f]=new Array(g);n(u,m,U,L,D,p,e);for(var E=0,k=0,y,R;E<A;++E)if(y=U[E]){for(E>=k&&(k=E+1);!(R=L[k])&&++k<A;);y._next=R||null}}return o=new Zt(o,i),o._enter=l,o._exit=c,o}function Fs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zs(){return new Zt(this._exit||this._groups.map(Ia),this._parents)}function Bs(t,e,n){var i=this.enter(),r=this,a=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?a.remove():n(a),i&&r?i.merge(r).order():r}function Cs(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,a=i.length,o=Math.min(r,a),l=new Array(r),c=0;c<o;++c)for(var f=n[c],u=i[c],m=f.length,g=l[c]=new Array(m),p,A=0;A<m;++A)(p=f[A]||u[A])&&(g[A]=p);for(;c<r;++c)l[c]=n[c];return new Zt(l,this._parents)}function Hs(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,a=i[r],o;--r>=0;)(o=i[r])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Vs(t){t||(t=Us);function e(m,g){return m&&g?t(m.__data__,g.__data__):!m-!g}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o=n[a],l=o.length,c=r[a]=new Array(l),f,u=0;u<l;++u)(f=o[u])&&(c[u]=f);c.sort(e)}return new Zt(r,this._parents).order()}function Us(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Zs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ps(){return Array.from(this)}function qs(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}function Gs(){let t=0;for(const e of this)++t;return t}function Ws(){return!this.node()}function Xs(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,o=r.length,l;a<o;++a)(l=r[a])&&t.call(l,l.__data__,a,r);return this}function Ks(t){return function(){this.removeAttribute(t)}}function Ys(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Js(t,e){return function(){this.setAttribute(t,e)}}function Qs(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function js(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function tl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function el(t,e){var n=Fn(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Ys:Ks:typeof e=="function"?n.local?tl:js:n.local?Qs:Js)(n,e))}function Da(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function nl(t){return function(){this.style.removeProperty(t)}}function il(t,e,n){return function(){this.style.setProperty(t,e,n)}}function rl(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function al(t,e,n){return arguments.length>1?this.each((e==null?nl:typeof e=="function"?rl:il)(t,e,n??"")):Me(this.node(),t)}function Me(t,e){return t.style.getPropertyValue(e)||Da(t).getComputedStyle(t,null).getPropertyValue(e)}function ol(t){return function(){delete this[t]}}function sl(t,e){return function(){this[t]=e}}function ll(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function fl(t,e){return arguments.length>1?this.each((e==null?ol:typeof e=="function"?ll:sl)(t,e)):this.node()[t]}function Ma(t){return t.trim().split(/^|\s+/)}function Mi(t){return t.classList||new Oa(t)}function Oa(t){this._node=t,this._names=Ma(t.getAttribute("class")||"")}Oa.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function La(t,e){for(var n=Mi(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Fa(t,e){for(var n=Mi(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function cl(t){return function(){La(this,t)}}function ul(t){return function(){Fa(this,t)}}function hl(t,e){return function(){(e.apply(this,arguments)?La:Fa)(this,t)}}function dl(t,e){var n=Ma(t+"");if(arguments.length<2){for(var i=Mi(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?hl:e?cl:ul)(n,e))}function _l(){this.textContent=""}function pl(t){return function(){this.textContent=t}}function gl(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ml(t){return arguments.length?this.each(t==null?_l:(typeof t=="function"?gl:pl)(t)):this.node().textContent}function vl(){this.innerHTML=""}function wl(t){return function(){this.innerHTML=t}}function xl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function yl(t){return arguments.length?this.each(t==null?vl:(typeof t=="function"?xl:wl)(t)):this.node().innerHTML}function bl(){this.nextSibling&&this.parentNode.appendChild(this)}function kl(){return this.each(bl)}function El(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Al(){return this.each(El)}function Sl(t){var e=typeof t=="function"?t:Sa(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function $l(){return null}function Tl(t,e){var n=typeof t=="function"?t:Sa(t),i=e==null?$l:typeof e=="function"?e:Di(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Rl(){var t=this.parentNode;t&&t.removeChild(this)}function Nl(){return this.each(Rl)}function Il(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Dl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ml(t){return this.select(t?Dl:Il)}function Ol(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ll(t){return function(e){t.call(this,e,this.__data__)}}function Fl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function zl(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,a;n<r;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++i]=a;++i?e.length=i:delete this.__on}}}function Bl(t,e,n){return function(){var i=this.__on,r,a=Ll(e);if(i){for(var o=0,l=i.length;o<l;++o)if((r=i[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=e;return}}this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function Cl(t,e,n){var i=Fl(t+""),r,a=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,f=l.length,u;c<f;++c)for(r=0,u=l[c];r<a;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value}return}for(l=e?Bl:zl,r=0;r<a;++r)this.each(l(i[r],e,n));return this}function za(t,e,n){var i=Da(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Hl(t,e){return function(){return za(this,t,e)}}function Vl(t,e){return function(){return za(this,t,e.apply(this,arguments))}}function Ul(t,e){return this.each((typeof e=="function"?Vl:Hl)(t,e))}function*Zl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length,o;r<a;++r)(o=i[r])&&(yield o)}var Oi=[null];function Zt(t,e){this._groups=t,this._parents=e}function Se(){return new Zt([[document.documentElement]],Oi)}function Pl(){return this}Zt.prototype=Se.prototype={constructor:Zt,select:ms,selectAll:xs,selectChild:Es,selectChildren:Ts,filter:Rs,data:Ls,enter:Ns,exit:zs,join:Bs,merge:Cs,selection:Pl,order:Hs,sort:Vs,call:Zs,nodes:Ps,node:qs,size:Gs,empty:Ws,each:Xs,attr:el,style:al,property:fl,classed:dl,text:ml,html:yl,raise:kl,lower:Al,append:Sl,insert:Tl,remove:Nl,clone:Ml,datum:Ol,on:Cl,dispatch:Ul,[Symbol.iterator]:Zl};function $t(t){return typeof t=="string"?new Zt([[document.querySelector(t)]],[document.documentElement]):new Zt([[t]],Oi)}function jt(t){return typeof t=="string"?new Zt([document.querySelectorAll(t)],[document.documentElement]):new Zt([$a(t)],Oi)}function Li(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ba(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Je(){}var Pe=.7,yn=1/Pe,De="\\s*([+-]?\\d+)\\s*",qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ql=/^#([0-9a-f]{3,8})$/,Gl=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),Wl=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),Xl=new RegExp(`^rgba\\(${De},${De},${De},${qe}\\)$`),Kl=new RegExp(`^rgba\\(${ae},${ae},${ae},${qe}\\)$`),Yl=new RegExp(`^hsl\\(${qe},${ae},${ae}\\)$`),Jl=new RegExp(`^hsla\\(${qe},${ae},${ae},${qe}\\)$`),ir={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Li(Je,ke,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rr,formatHex:rr,formatHex8:Ql,formatHsl:jl,formatRgb:ar,toString:ar});function rr(){return this.rgb().formatHex()}function Ql(){return this.rgb().formatHex8()}function jl(){return Ca(this).formatHsl()}function ar(){return this.rgb().formatRgb()}function ke(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ql.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?or(e):n===3?new Gt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?en(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?en(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Gl.exec(t))?new Gt(e[1],e[2],e[3],1):(e=Wl.exec(t))?new Gt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Xl.exec(t))?en(e[1],e[2],e[3],e[4]):(e=Kl.exec(t))?en(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Yl.exec(t))?fr(e[1],e[2]/100,e[3]/100,1):(e=Jl.exec(t))?fr(e[1],e[2]/100,e[3]/100,e[4]):ir.hasOwnProperty(t)?or(ir[t]):t==="transparent"?new Gt(NaN,NaN,NaN,0):null}function or(t){return new Gt(t>>16&255,t>>8&255,t&255,1)}function en(t,e,n,i){return i<=0&&(t=e=n=NaN),new Gt(t,e,n,i)}function tf(t){return t instanceof Je||(t=ke(t)),t?(t=t.rgb(),new Gt(t.r,t.g,t.b,t.opacity)):new Gt}function _i(t,e,n,i){return arguments.length===1?tf(t):new Gt(t,e,n,i??1)}function Gt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Li(Gt,_i,Ba(Je,{brighter(t){return t=t==null?yn:Math.pow(yn,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Pe:Math.pow(Pe,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Gt(ye(this.r),ye(this.g),ye(this.b),bn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sr,formatHex:sr,formatHex8:ef,formatRgb:lr,toString:lr}));function sr(){return`#${xe(this.r)}${xe(this.g)}${xe(this.b)}`}function ef(){return`#${xe(this.r)}${xe(this.g)}${xe(this.b)}${xe((isNaN(this.opacity)?1:this.opacity)*255)}`}function lr(){const t=bn(this.opacity);return`${t===1?"rgb(":"rgba("}${ye(this.r)}, ${ye(this.g)}, ${ye(this.b)}${t===1?")":`, ${t})`}`}function bn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ye(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function xe(t){return t=ye(t),(t<16?"0":"")+t.toString(16)}function fr(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ee(t,e,n,i)}function Ca(t){if(t instanceof ee)return new ee(t.h,t.s,t.l,t.opacity);if(t instanceof Je||(t=ke(t)),!t)return new ee;if(t instanceof ee)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,l=a-r,c=(a+r)/2;return l?(e===a?o=(n-i)/l+(n<i)*6:n===a?o=(i-e)/l+2:o=(e-n)/l+4,l/=c<.5?a+r:2-a-r,o*=60):l=c>0&&c<1?0:o,new ee(o,l,c,t.opacity)}function nf(t,e,n,i){return arguments.length===1?Ca(t):new ee(t,e,n,i??1)}function ee(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Li(ee,nf,Ba(Je,{brighter(t){return t=t==null?yn:Math.pow(yn,t),new ee(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Pe:Math.pow(Pe,t),new ee(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Gt(Zn(t>=240?t-240:t+120,r,i),Zn(t,r,i),Zn(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new ee(cr(this.h),nn(this.s),nn(this.l),bn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bn(this.opacity);return`${t===1?"hsl(":"hsla("}${cr(this.h)}, ${nn(this.s)*100}%, ${nn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function cr(t){return t=(t||0)%360,t<0?t+360:t}function nn(t){return Math.max(0,Math.min(1,t||0))}function Zn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Fi=t=>()=>t;function rf(t,e){return function(n){return t+n*e}}function af(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function of(t){return(t=+t)==1?Ha:function(e,n){return n-e?af(e,n,t):Fi(isNaN(e)?n:e)}}function Ha(t,e){var n=e-t;return n?rf(t,n):Fi(isNaN(t)?e:t)}const kn=function t(e){var n=of(e);function i(r,a){var o=n((r=_i(r)).r,(a=_i(a)).r),l=n(r.g,a.g),c=n(r.b,a.b),f=Ha(r.opacity,a.opacity);return function(u){return r.r=o(u),r.g=l(u),r.b=c(u),r.opacity=f(u),r+""}}return i.gamma=t,i}(1);function sf(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function lf(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ff(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=zi(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(l){for(o=0;o<i;++o)a[o]=r[o](l);return a}}function cf(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function te(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function uf(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=zi(t[r],e[r]):i[r]=e[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var pi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pn=new RegExp(pi.source,"g");function hf(t){return function(){return t}}function df(t){return function(e){return t(e)+""}}function Va(t,e){var n=pi.lastIndex=Pn.lastIndex=0,i,r,a,o=-1,l=[],c=[];for(t=t+"",e=e+"";(i=pi.exec(t))&&(r=Pn.exec(e));)(a=r.index)>n&&(a=e.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(i=i[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:te(i,r)})),n=Pn.lastIndex;return n<e.length&&(a=e.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?df(c[0].x):hf(e):(e=c.length,function(f){for(var u=0,m;u<e;++u)l[(m=c[u]).i]=m.x(f);return l.join("")})}function zi(t,e){var n=typeof e,i;return e==null||n==="boolean"?Fi(e):(n==="number"?te:n==="string"?(i=ke(e))?(e=i,kn):Va:e instanceof ke?kn:e instanceof Date?cf:lf(e)?sf:Array.isArray(e)?ff:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?uf:te)(t,e)}function _f(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ur=180/Math.PI,gi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ua(t,e,n,i,r,a){var o,l,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,c/=l),t*i<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*ur,skewX:Math.atan(c)*ur,scaleX:o,scaleY:l}}var rn;function pf(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?gi:Ua(e.a,e.b,e.c,e.d,e.e,e.f)}function gf(t){return t==null||(rn||(rn=document.createElementNS("http://www.w3.org/2000/svg","g")),rn.setAttribute("transform",t),!(t=rn.transform.baseVal.consolidate()))?gi:(t=t.matrix,Ua(t.a,t.b,t.c,t.d,t.e,t.f))}function Za(t,e,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,u,m,g,p,A){if(f!==m||u!==g){var U=p.push("translate(",null,e,null,n);A.push({i:U-4,x:te(f,m)},{i:U-2,x:te(u,g)})}else(m||g)&&p.push("translate("+m+e+g+n)}function o(f,u,m,g){f!==u?(f-u>180?u+=360:u-f>180&&(f+=360),g.push({i:m.push(r(m)+"rotate(",null,i)-2,x:te(f,u)})):u&&m.push(r(m)+"rotate("+u+i)}function l(f,u,m,g){f!==u?g.push({i:m.push(r(m)+"skewX(",null,i)-2,x:te(f,u)}):u&&m.push(r(m)+"skewX("+u+i)}function c(f,u,m,g,p,A){if(f!==m||u!==g){var U=p.push(r(p)+"scale(",null,",",null,")");A.push({i:U-4,x:te(f,m)},{i:U-2,x:te(u,g)})}else(m!==1||g!==1)&&p.push(r(p)+"scale("+m+","+g+")")}return function(f,u){var m=[],g=[];return f=t(f),u=t(u),a(f.translateX,f.translateY,u.translateX,u.translateY,m,g),o(f.rotate,u.rotate,m,g),l(f.skewX,u.skewX,m,g),c(f.scaleX,f.scaleY,u.scaleX,u.scaleY,m,g),f=u=null,function(p){for(var A=-1,U=g.length,L;++A<U;)m[(L=g[A]).i]=L.x(p);return m.join("")}}}var mf=Za(pf,"px, ","px)","deg)"),vf=Za(gf,", ",")",")"),Oe=0,He=0,Ce=0,Pa=1e3,En,Ve,An=0,Ee=0,zn=0,Ge=typeof performance=="object"&&performance.now?performance:Date,qa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Bi(){return Ee||(qa(wf),Ee=Ge.now()+zn)}function wf(){Ee=0}function Sn(){this._call=this._time=this._next=null}Sn.prototype=Ga.prototype={constructor:Sn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Bi():+n)+(e==null?0:+e),!this._next&&Ve!==this&&(Ve?Ve._next=this:En=this,Ve=this),this._call=t,this._time=n,mi()},stop:function(){this._call&&(this._call=null,this._time=1/0,mi())}};function Ga(t,e,n){var i=new Sn;return i.restart(t,e,n),i}function xf(){Bi(),++Oe;for(var t=En,e;t;)(e=Ee-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Oe}function hr(){Ee=(An=Ge.now())+zn,Oe=He=0;try{xf()}finally{Oe=0,bf(),Ee=0}}function yf(){var t=Ge.now(),e=t-An;e>Pa&&(zn-=e,An=t)}function bf(){for(var t,e=En,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:En=n);Ve=t,mi(i)}function mi(t){if(!Oe){He&&(He=clearTimeout(He));var e=t-Ee;e>24?(t<1/0&&(He=setTimeout(hr,t-Ge.now()-zn)),Ce&&(Ce=clearInterval(Ce))):(Ce||(An=Ge.now(),Ce=setInterval(yf,Pa)),Oe=1,qa(hr))}}function dr(t,e,n){var i=new Sn;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var kf=Aa("start","end","cancel","interrupt"),Ef=[],Wa=0,_r=1,vi=2,pn=3,pr=4,wi=5,gn=6;function Bn(t,e,n,i,r,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Af(t,n,{name:e,index:i,group:r,on:kf,tween:Ef,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Wa})}function Ci(t,e){var n=ne(t,e);if(n.state>Wa)throw new Error("too late; already scheduled");return n}function oe(t,e){var n=ne(t,e);if(n.state>pn)throw new Error("too late; already running");return n}function ne(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Af(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=Ga(a,0,n.time);function a(f){n.state=_r,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var u,m,g,p;if(n.state!==_r)return c();for(u in i)if(p=i[u],p.name===n.name){if(p.state===pn)return dr(o);p.state===pr?(p.state=gn,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[u]):+u<e&&(p.state=gn,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[u])}if(dr(function(){n.state===pn&&(n.state=pr,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=vi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===vi){for(n.state=pn,r=new Array(g=n.tween.length),u=0,m=-1;u<g;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++m]=p);r.length=m+1}}function l(f){for(var u=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(c),n.state=wi,1),m=-1,g=r.length;++m<g;)r[m].call(t,u);n.state===wi&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=gn,n.timer.stop(),delete i[e];for(var f in i)return;delete t.__transition}}function Sf(t,e){var n=t.__transition,i,r,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((i=n[o]).name!==e){a=!1;continue}r=i.state>vi&&i.state<wi,i.state=gn,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[o]}a&&delete t.__transition}}function $f(t){return this.each(function(){Sf(this,t)})}function Tf(t,e){var n,i;return function(){var r=oe(this,t),a=r.tween;if(a!==n){i=n=a;for(var o=0,l=i.length;o<l;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function Rf(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var a=oe(this,t),o=a.tween;if(o!==i){r=(i=o).slice();for(var l={name:e,value:n},c=0,f=r.length;c<f;++c)if(r[c].name===e){r[c]=l;break}c===f&&r.push(l)}a.tween=r}}function Nf(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=ne(this.node(),n).tween,r=0,a=i.length,o;r<a;++r)if((o=i[r]).name===t)return o.value;return null}return this.each((e==null?Tf:Rf)(n,t,e))}function Hi(t,e,n){var i=t._id;return t.each(function(){var r=oe(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return ne(r,i).value[e]}}function Xa(t,e){var n;return(typeof e=="number"?te:e instanceof ke?kn:(n=ke(e))?(e=n,kn):Va)(t,e)}function If(t){return function(){this.removeAttribute(t)}}function Df(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mf(t,e,n){var i,r=n+"",a;return function(){var o=this.getAttribute(t);return o===r?null:o===i?a:a=e(i=o,n)}}function Of(t,e,n){var i,r=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===i?a:a=e(i=o,n)}}function Lf(t,e,n){var i,r,a;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=l+"",o===c?null:o===i&&c===r?a:(r=c,a=e(i=o,l)))}}function Ff(t,e,n){var i,r,a;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=l+"",o===c?null:o===i&&c===r?a:(r=c,a=e(i=o,l)))}}function zf(t,e){var n=Fn(t),i=n==="transform"?vf:Xa;return this.attrTween(t,typeof e=="function"?(n.local?Ff:Lf)(n,i,Hi(this,"attr."+t,e)):e==null?(n.local?Df:If)(n):(n.local?Of:Mf)(n,i,e))}function Bf(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Cf(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Hf(t,e){var n,i;function r(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&Cf(t,a)),n}return r._value=e,r}function Vf(t,e){var n,i;function r(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&Bf(t,a)),n}return r._value=e,r}function Uf(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Fn(t);return this.tween(n,(i.local?Hf:Vf)(i,e))}function Zf(t,e){return function(){Ci(this,t).delay=+e.apply(this,arguments)}}function Pf(t,e){return e=+e,function(){Ci(this,t).delay=e}}function qf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zf:Pf)(e,t)):ne(this.node(),e).delay}function Gf(t,e){return function(){oe(this,t).duration=+e.apply(this,arguments)}}function Wf(t,e){return e=+e,function(){oe(this,t).duration=e}}function Xf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Gf:Wf)(e,t)):ne(this.node(),e).duration}function Kf(t,e){if(typeof e!="function")throw new Error;return function(){oe(this,t).ease=e}}function Yf(t){var e=this._id;return arguments.length?this.each(Kf(e,t)):ne(this.node(),e).ease}function Jf(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;oe(this,t).ease=n}}function Qf(t){if(typeof t!="function")throw new Error;return this.each(Jf(this._id,t))}function jf(t){typeof t!="function"&&(t=Ra(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,l=i[r]=[],c,f=0;f<o;++f)(c=a[f])&&t.call(c,c.__data__,f,a)&&l.push(c);return new he(i,this._parents,this._name,this._id)}function tc(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),l=0;l<a;++l)for(var c=e[l],f=n[l],u=c.length,m=o[l]=new Array(u),g,p=0;p<u;++p)(g=c[p]||f[p])&&(m[p]=g);for(;l<i;++l)o[l]=e[l];return new he(o,this._parents,this._name,this._id)}function ec(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function nc(t,e,n){var i,r,a=ec(e)?Ci:oe;return function(){var o=a(this,t),l=o.on;l!==i&&(r=(i=l).copy()).on(e,n),o.on=r}}function ic(t,e){var n=this._id;return arguments.length<2?ne(this.node(),n).on.on(t):this.each(nc(n,t,e))}function rc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ac(){return this.on("end.remove",rc(this._id))}function oc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Di(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var l=i[o],c=l.length,f=a[o]=new Array(c),u,m,g=0;g<c;++g)(u=l[g])&&(m=t.call(u,u.__data__,g,l))&&("__data__"in u&&(m.__data__=u.__data__),f[g]=m,Bn(f[g],e,n,g,f,ne(u,n)));return new he(a,this._parents,e,n)}function sc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ta(t));for(var i=this._groups,r=i.length,a=[],o=[],l=0;l<r;++l)for(var c=i[l],f=c.length,u,m=0;m<f;++m)if(u=c[m]){for(var g=t.call(u,u.__data__,m,c),p,A=ne(u,n),U=0,L=g.length;U<L;++U)(p=g[U])&&Bn(p,e,n,U,g,A);a.push(g),o.push(u)}return new he(a,o,e,n)}var lc=Se.prototype.constructor;function fc(){return new lc(this._groups,this._parents)}function cc(t,e){var n,i,r;return function(){var a=Me(this,t),o=(this.style.removeProperty(t),Me(this,t));return a===o?null:a===n&&o===i?r:r=e(n=a,i=o)}}function Ka(t){return function(){this.style.removeProperty(t)}}function uc(t,e,n){var i,r=n+"",a;return function(){var o=Me(this,t);return o===r?null:o===i?a:a=e(i=o,n)}}function hc(t,e,n){var i,r,a;return function(){var o=Me(this,t),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(t),Me(this,t))),o===c?null:o===i&&c===r?a:(r=c,a=e(i=o,l))}}function dc(t,e){var n,i,r,a="style."+e,o="end."+a,l;return function(){var c=oe(this,t),f=c.on,u=c.value[a]==null?l||(l=Ka(e)):void 0;(f!==n||r!==u)&&(i=(n=f).copy()).on(o,r=u),c.on=i}}function _c(t,e,n){var i=(t+="")=="transform"?mf:Xa;return e==null?this.styleTween(t,cc(t,i)).on("end.style."+t,Ka(t)):typeof e=="function"?this.styleTween(t,hc(t,i,Hi(this,"style."+t,e))).each(dc(this._id,t)):this.styleTween(t,uc(t,i,e),n).on("end.style."+t,null)}function pc(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function gc(t,e,n){var i,r;function a(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&pc(t,o,n)),i}return a._value=e,a}function mc(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,gc(t,e,n??""))}function vc(t){return function(){this.textContent=t}}function wc(t){return function(){var e=t(this);this.textContent=e??""}}function xc(t){return this.tween("text",typeof t=="function"?wc(Hi(this,"text",t)):vc(t==null?"":t+""))}function yc(t){return function(e){this.textContent=t.call(this,e)}}function bc(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&yc(r)),e}return i._value=t,i}function kc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,bc(t))}function Ec(){for(var t=this._name,e=this._id,n=Ya(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],l=o.length,c,f=0;f<l;++f)if(c=o[f]){var u=ne(c,e);Bn(c,t,n,f,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new he(i,this._parents,t,n)}function Ac(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(a,o){var l={value:o},c={value:function(){--r===0&&a()}};n.each(function(){var f=oe(this,i),u=f.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),f.on=e}),r===0&&a()})}var Sc=0;function he(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Ya(){return++Sc}var fe=Se.prototype;he.prototype={constructor:he,select:oc,selectAll:sc,selectChild:fe.selectChild,selectChildren:fe.selectChildren,filter:jf,merge:tc,selection:fc,transition:Ec,call:fe.call,nodes:fe.nodes,node:fe.node,size:fe.size,empty:fe.empty,each:fe.each,on:ic,attr:zf,attrTween:Uf,style:_c,styleTween:mc,text:xc,textTween:kc,remove:ac,tween:Nf,delay:qf,duration:Xf,ease:Yf,easeVarying:Qf,end:Ac,[Symbol.iterator]:fe[Symbol.iterator]};function $c(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Tc={time:null,delay:0,duration:250,ease:$c};function Rc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Nc(t){var e,n;t instanceof he?(e=t._id,t=t._name):(e=Ya(),(n=Tc).time=Bi(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],l=o.length,c,f=0;f<l;++f)(c=o[f])&&Bn(c,t,e,f,o,n||Rc(c,e));return new he(i,this._parents,t,e)}Se.prototype.interrupt=$f;Se.prototype.transition=Nc;const xi=Math.PI,yi=2*xi,we=1e-6,Ic=yi-we;function Ja(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Dc(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ja;const n=10**e;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class Mc{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ja:Dc(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,a,o){this._append`C${+e},${+n},${+i},${+r},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,i,r,a){if(e=+e,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=i-e,f=r-n,u=o-e,m=l-n,g=u*u+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>we)if(!(Math.abs(m*c-f*u)>we)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let p=i-o,A=r-l,U=c*c+f*f,L=p*p+A*A,D=Math.sqrt(U),E=Math.sqrt(g),k=a*Math.tan((xi-Math.acos((U+g-L)/(2*D*E)))/2),y=k/E,R=k/D;Math.abs(y-1)>we&&this._append`L${e+y*u},${n+y*m}`,this._append`A${a},${a},0,0,${+(m*p>u*A)},${this._x1=e+R*c},${this._y1=n+R*f}`}}arc(e,n,i,r,a,o){if(e=+e,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),f=e+l,u=n+c,m=1^o,g=o?r-a:a-r;this._x1===null?this._append`M${f},${u}`:(Math.abs(this._x1-f)>we||Math.abs(this._y1-u)>we)&&this._append`L${f},${u}`,i&&(g<0&&(g=g%yi+yi),g>Ic?this._append`A${i},${i},0,1,${m},${e-l},${n-c}A${i},${i},0,1,${m},${this._x1=f},${this._y1=u}`:g>we&&this._append`A${i},${i},0,${+(g>=xi)},${m},${this._x1=e+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Oc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function $n(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Le(t){return t=$n(Math.abs(t)),t?t[1]:NaN}function Lc(t,e){return function(n,i){for(var r=n.length,a=[],o=0,l=t[0],c=0;r>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),a.push(n.substring(r-=l,r+l)),!((c+=l+1)>i));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Fc(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var zc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tn(t){if(!(e=zc.exec(t)))throw new Error("invalid format: "+t);var e;return new Vi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Tn.prototype=Vi.prototype;function Vi(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Vi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bc(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var Qa;function Cc(t,e){var n=$n(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(Qa=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+$n(t,Math.max(0,e+a-1))[0]}function gr(t,e){var n=$n(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const mr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Oc,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gr(t*100,e),r:gr,s:Cc,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vr(t){return t}var wr=Array.prototype.map,xr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Hc(t){var e=t.grouping===void 0||t.thousands===void 0?vr:Lc(wr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?vr:Fc(wr.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(m){m=Tn(m);var g=m.fill,p=m.align,A=m.sign,U=m.symbol,L=m.zero,D=m.width,E=m.comma,k=m.precision,y=m.trim,R=m.type;R==="n"?(E=!0,R="g"):mr[R]||(k===void 0&&(k=12),y=!0,R="g"),(L||g==="0"&&p==="=")&&(L=!0,g="0",p="=");var I=U==="$"?n:U==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",b=U==="$"?i:/[%p]/.test(R)?o:"",z=mr[R],F=/[defgprs%]/.test(R);k=k===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function B(x){var q=I,H=b,J,ft,gt;if(R==="c")H=z(x)+H,x="";else{x=+x;var K=x<0||1/x<0;if(x=isNaN(x)?c:z(Math.abs(x),k),y&&(x=Bc(x)),K&&+x==0&&A!=="+"&&(K=!1),q=(K?A==="("?A:l:A==="-"||A==="("?"":A)+q,H=(R==="s"?xr[8+Qa/3]:"")+H+(K&&A==="("?")":""),F){for(J=-1,ft=x.length;++J<ft;)if(gt=x.charCodeAt(J),48>gt||gt>57){H=(gt===46?r+x.slice(J+1):x.slice(J))+H,x=x.slice(0,J);break}}}E&&!L&&(x=e(x,1/0));var Z=q.length+x.length+H.length,V=Z<D?new Array(D-Z+1).join(g):"";switch(E&&L&&(x=e(V+x,V.length?D-H.length:1/0),V=""),p){case"<":x=q+x+H+V;break;case"=":x=q+V+x+H;break;case"^":x=V.slice(0,Z=V.length>>1)+q+x+H+V.slice(Z);break;default:x=V+q+x+H;break}return a(x)}return B.toString=function(){return m+""},B}function u(m,g){var p=f((m=Tn(m),m.type="f",m)),A=Math.max(-8,Math.min(8,Math.floor(Le(g)/3)))*3,U=Math.pow(10,-A),L=xr[8+A/3];return function(D){return p(U*D)+L}}return{format:f,formatPrefix:u}}var an,ja,to;Vc({thousands:",",grouping:[3],currency:["$",""]});function Vc(t){return an=Hc(t),ja=an.format,to=an.formatPrefix,an}function Uc(t){return Math.max(0,-Le(Math.abs(t)))}function Zc(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Le(e)/3)))*3-Le(Math.abs(t)))}function Pc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Le(e)-Le(t))+1}function qc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Gc(t){return function(){return t}}function Wc(t){return+t}var yr=[0,1];function Ie(t){return t}function bi(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Gc(isNaN(e)?NaN:.5)}function Xc(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function Kc(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return r<i?(i=bi(r,i),a=n(o,a)):(i=bi(i,r),a=n(a,o)),function(l){return a(i(l))}}function Yc(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=bi(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(l){var c=Qo(t,l,1,i)-1;return a[c](r[c](l))}}function Jc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Qc(){var t=yr,e=yr,n=zi,i,r,a,o=Ie,l,c,f;function u(){var g=Math.min(t.length,e.length);return o!==Ie&&(o=Xc(t[0],t[g-1])),l=g>2?Yc:Kc,c=f=null,m}function m(g){return g==null||isNaN(g=+g)?a:(c||(c=l(t.map(i),e,n)))(i(o(g)))}return m.invert=function(g){return o(r((f||(f=l(e,t.map(i),te)))(g)))},m.domain=function(g){return arguments.length?(t=Array.from(g,Wc),u()):t.slice()},m.range=function(g){return arguments.length?(e=Array.from(g),u()):e.slice()},m.rangeRound=function(g){return e=Array.from(g),n=_f,u()},m.clamp=function(g){return arguments.length?(o=g?!0:Ie,u()):o!==Ie},m.interpolate=function(g){return arguments.length?(n=g,u()):n},m.unknown=function(g){return arguments.length?(a=g,m):a},function(g,p){return i=g,r=p,u()}}function jc(){return Qc()(Ie,Ie)}function tu(t,e,n,i){var r=is(t,e,n),a;switch(i=Tn(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(a=Zc(r,o))&&(i.precision=a),to(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=Pc(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=Uc(r))&&(i.precision=a-(i.type==="%")*2);break}}return ja(i)}function eu(t){var e=t.domain;return t.ticks=function(n){var i=e();return ns(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return tu(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,a=i.length-1,o=i[r],l=i[a],c,f,u=10;for(l<o&&(f=o,o=l,l=f,f=r,r=a,a=f);u-- >0;){if(f=ui(o,l,n),f===c)return i[r]=o,i[a]=l,e(i);if(f>0)o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f;else if(f<0)o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f;else break;c=f}return t},t}function _e(){var t=jc();return t.copy=function(){return Jc(t,_e())},qc.apply(t,arguments),eu(t)}function on(t){return function(){return t}}const Ui=Math.sqrt,eo=Math.PI,nu=2*eo;function iu(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Mc(e)}const ru={draw(t,e){const n=Ui(e/eo);t.moveTo(n,0),t.arc(0,0,n,0,nu)}},qn=Ui(3),no={draw(t,e){const n=-Ui(e/(qn*3));t.moveTo(0,n*2),t.lineTo(-qn*n,-n),t.lineTo(qn*n,-n),t.closePath()}};function io(t,e){let n=null,i=iu(r);t=typeof t=="function"?t:on(t||ru),e=typeof e=="function"?e:on(e===void 0?64:+e);function r(){let a;if(n||(n=a=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(t=typeof a=="function"?a:on(a),r):t},r.size=function(a){return arguments.length?(e=typeof a=="function"?a:on(+a),r):e},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function Ue(t,e,n){this.k=t,this.x=e,this.y=n}Ue.prototype={constructor:Ue,scale:function(t){return t===1?this:new Ue(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ue(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ue.prototype;function Zi(t,e,n){let i=0,r,a;if(t.length==0)i=1;else{for(let o=1;o<t.length;o++){for(const l of t[o]){const[c,f]=l.split(":");if(n<+c||e>+f)a=1;else{a=0;break}}if(a){r=1,i=o;break}}r||(i=t.length)}return i}function ro(t,e){let n=-1,i=-1;for(const r of t){const a=r.children;a&&a.forEach(o=>{e.includes(o.type)&&((n<0||o.fmin<n)&&(n=o.fmin),(i<0||o.fmax>i)&&(i=o.fmax))})}return{fmin:n,fmax:i}}function Fe(t){const n=t.attr("class").split(" "),i=`.${n[0]}.${n[1]} .track`,r=jt(i).nodes();let a=0;return r.forEach(o=>{a+=o.getBoundingClientRect().height+1}),a}function ao(t,e){var r;const n=((r=e.node())==null?void 0:r.getBBox().height)??0;e.selectAll(".variant-deletion,.variant-SNV,.variant-insertion,.variant-delins").filter(a=>{var l;let o=!1;return(l=a.alleles)!=null&&l.length&&(a.alleles[0].replace(/"|\[|\]| /g,"").split(",").forEach(f=>{t.includes(f)&&(o=!0)}),a.alleles.forEach(f=>{t.includes(f)&&(o=!0)})),o}).datum(a=>(a.selected="true",a)).style("stroke","black").each(function(){let a=$t(this).attr("x"),o=+$t(this).attr("width");(o===0||Number.isNaN(o))&&(o=3,a=String(+a-o/2)),e.select(".deletions.track").append("rect").attr("class","highlight").attr("x",a).attr("width",o).attr("height",n).attr("fill","yellow").attr("opacity",.8).lower()})}const au=["mRNA","ncRNA","piRNA","lincRNA","miRNA","pre_miRNA","snoRNA","lnc_RNA","tRNA","snRNA","rRNA","ARS","antisense_RNA","C_gene_segment","V_gene_segment","pseudogene_attribute","snoRNA_gene","polypeptide_region","mature_protein_region"],ou=["point_mutation","MNV","Deletion","Insertion","Delins"],mn={transcript_ablation:{impact:"HIGH",color:"#ff0000"},splice_acceptor_variant:{impact:"HIGH",color:"#ff581a"},splice_donor_variant:{impact:"HIGH",color:"#ff581a"},stop_gained:{impact:"HIGH",color:"#ff0000"},frameshift_variant:{impact:"HIGH",color:"#9400D3"},stop_lost:{impact:"HIGH",color:"#ff0000"},start_lost:{impact:"HIGH",color:"#ffd700"},transcript_amplification:{impact:"HIGH",color:"#ff69b4"},inframe_insertion:{impact:"MODERATE",color:"#ff69b4"},inframe_deletion:{impact:"MODERATE",color:"#ff69b4"},missense_variant:{impact:"MODERATE",color:"#ffd700"},protein_altering_variant:{impact:"MODERATE",color:"#ff0080"},splice_region_variant:{impact:"LOW",color:"#ff7f50"},incomplete_terminal_codon_variant:{impact:"LOW",color:"#ff00ff"},start_retained_variant:{impact:"LOW",color:"#76ee00"},stop_retained_variant:{impact:"LOW",color:"#76ee00"},synonymous_variant:{impact:"LOW",color:"#76ee00"},coding_sequence_variant:{impact:"MODIFIER",color:"#458b00"},mature_miRNA_variant:{impact:"MODIFIER",color:"#458b00"},five_prime_UTR_variant:{impact:"MODIFIER",color:"#7ac5cd"},three_prime_UTR_variant:{impact:"MODIFIER",color:"#7ac5cd"},non_coding_transcript_exon_variant:{impact:"MODIFIER",color:"#32cd32"},intron_variant:{impact:"MODIFIER",color:"#02599c"},NMD_transcript_variant:{impact:"MODIFIER",color:"#ff4500"},non_coding_transcript_variant:{impact:"MODIFIER",color:"#32cd32"},upstream_gene_variant:{impact:"MODIFIER",color:"#a2b5cd"},downstream_gene_variant:{impact:"MODIFIER",color:"#a2b5cd"},TFBS_ablation:{impact:"MODIFIER",color:"#a52a2a"},TFBS_amplification:{impact:"MODIFIER",color:"#a52a2a"},TF_binding_site_variant:{impact:"MODIFIER",color:"#a52a2a"},regulatory_region_ablation:{impact:"MODERATE",color:"#a52a2a"},regulatory_region_amplification:{impact:"MODIFIER",color:"#a52a2a"},feature_elongation:{impact:"MODIFIER",color:"#7f7f7f"},regulatory_region_variant:{impact:"MODIFIER",color:"#a52a2a"},feature_truncation:{impact:"MODIFIER",color:"#7f7f7f"},intergenic_variant:{impact:"MODIFIER",color:"#636363"}};function su(t){if(!t)return"black";if(t.split(" ").length>1)return"hotpink";if(t==="UNKNOWN")return"gray";const e=mn[t];return e?e.color:t==="5_prime_UTR_variant"?mn.five_prime_UTR_variant.color:t==="3_prime_UTR_variant"?mn.three_prime_UTR_variant.color:(console.warn("Consequence",t,"not found"),"#f0f")}const be=10,de=10;function Pi(t){return`${t},${be} ${t+de/2},${be/2} ${t},0 ${t-de/2},${be/2}`}function oo(t){return`${t-de/2},${be} ${t},0 ${t+de/2},${be}`}function br(t,e,n){if(t.length==0)return 0;{let i=!0,r=0;return t.sort((a,o)=>a.row>o.row?1:-1),t.every(a=>r!=a.row&&i?!1:(r!=a.row&&(r=a.row,i=!0),a.fmin>e&&a.fmin>n||a.fmax<n&&a.fmax<e||(i=!1),!0)),i?r:r+1}}function so(t){return`${t-de/2},${be} ${t+de/2},${be} ${t-de/2},0 ${t+de/2},0`}function lu(t){const e=Object.keys(t).length;return{descriptionWidth:Math.max(...Object.entries(t).map(i=>{var r;return((r=i[1])==null?void 0:r.length)??0})),descriptionHeight:e}}function fu(t,e,n){const{fmax:i,fmin:r,type:a}=e;return t.findIndex(o=>{const l=o.fmin+n,c=o.fmax-n;return a!==o.type?!1:l<=r&&c>=r||c<=i&&c>=i||l>=r&&c<=i})}function cu(t){const e=[];return t.forEach(n=>{const i=qi(n),{type:r,fmax:a,fmin:o}=n,l=e.findIndex(c=>{const f=c.fmin,u=c.fmax;return c.type!==r||c.consequence!==i?!1:f<=o&&u>=o||u<=a&&u>=a||f>=o&&u<=a});if(l!==-1){const c=e[l],f=e[l].variantSet?e[l].variantSet.findIndex(u=>u.type===r&&u.consequence===i):-1;f>=0?e[f].variantSet.push(n):e[l].variantSet=[{variants:[n],type:r,consequence:i}],c.variants.push(n),c.fmin=Math.min(o,c.fmin),c.fmax=Math.max(a,c.fmax),e[l]=c}else{const c={fmin:o,fmax:a,type:r,consequence:i,variantSet:[{variants:[n],type:r,consequence:i}],variants:[n]};e.push(c)}}),e}function lo(t,e){const n=[];return t.forEach(i=>{const r=qi(i),{type:a,fmax:o,fmin:l}=i,c=fu(n,i,e);if(c>=0&&a!="deletion"){const f=n[c],u=f.variantSet?f.variantSet.findIndex(m=>m.type===a&&m.consequence===r):-1;if(u>=0){const m=Math.min(f.variantSet[u].fmin,l),g=Math.max(f.variantSet[u].fmax,o);f.fmin=m,f.fmax=g,f.variantSet[u].fmin=m,f.variantSet[u].fmax=g,f.variantSet[u].variants.push(i)}else{const m=Math.min(f.fmin,l),g=Math.max(f.fmax,o);f.fmin=m,f.fmax=g,f.variantSet.push({variants:[i],type:a,consequence:r,fmin:l,fmax:o})}f.variants.push(i),f.fmin=Math.min(l,f.fmin),f.fmax=Math.max(o,f.fmax),n[c]=f}else n.push({fmin:l,fmax:o,type:a,consequence:r,variantSet:[{variants:[i],type:a,consequence:r,fmin:l,fmax:o}],variants:[i]})}),n}function ki(t){if(t.length===1){let e='<div style="margin-top: 30px;">';return e+=kr(t[0]),e+="</div>",e}else if(t.length>1){let e='<ul style="list-style-type: none; margin-top: 30px;">';for(const n of t)e+=`<li style="border-bottom: solid 1px black;">${kr(n)}</li>`;return e+="</ul>",e}else return"No data available"}function kr(t){const{descriptionWidth:e}=lu(t);let n="";const i=t.location,[r,a]=i.split(":")[1].split("..");let o=t.alternative_alleles,l=t.reference_allele,c;if(t.type==="SNV")c="1bp";else if(t.type==="deletion")c=`${l.length-1}bp deleted`;else if(t.type==="insertion")o==="ALT_MISSING"?(c="unknown length inserted",o="n+"):c=`${o.length-1}bp inserted`;else if(t.type==="MNV")c=`${l.length}bp`;else if(t.type==="delins"){const u=`${l.length-1}bp deleted`;let m;o==="ALT_MISSING"?(m="unknown length inserted",o="n+"):m=`${o.length-1}bp inserted`,c=`${u}; ${m}`}else c=`${+a-+r}bp`;l=l.length>20?`${l.slice(0,1).toLowerCase()+l.slice(1,8).toUpperCase()}...${l.slice(Math.max(0,l.length-8)).toUpperCase()}`:l.slice(0,1).toLowerCase()+l.slice(1).toUpperCase(),o=o.length>20?`${o.slice(0,1).toLowerCase()+o.slice(1,8).toUpperCase()}...${o.slice(Math.max(0,o.length-8)).toUpperCase()}`:o.slice(0,1).toLowerCase()+o.slice(1).toUpperCase(),(t.type==="SNV"||t.type==="MNV")&&(o=o.toUpperCase(),l=l.toUpperCase());let f="";return t.type==="insertion"?f=`ins: ${o}`:t.type==="deletion"?f=`del: ${l}`:f=`${l}->${o}`,n+='<table class="tooltip-table"><tbody>',n+=`<tr><th>Symbol</th><td>${t.symbolDetail}</td></tr>`,n+=`<tr><th>Type</th><td>${t.type}</td></tr>`,n+=`<tr><th>Consequence</th><td>${t.consequence}</td></tr>`,t.impact&&(n+=`<tr><th>Impact</th><td>${t.impact.length>e?t.impact.slice(0,Math.max(0,e)):t.impact}</td></tr>`),n+=`<tr><th>Length</th><td>${c}</td></tr>`,t.name!==t.symbol&&(n+=`<tr><th>Name</th><td>${t.name}</td></tr>`),t.geneId&&t.geneSymbol?n+=`<tr><th>Allele of Genes</th><td> ${t.geneSymbol.length>e?t.geneSymbol.slice(0,Math.max(0,e)):t.geneSymbol} (${t.geneId})</td></tr>`:t.allele_of_genes&&(n+=`<tr><th>Allele of Genes</th><td>${t.allele_of_genes.length>e?t.allele_of_genes.slice(0,Math.max(0,e)):t.allele_of_genes}</td></tr>`),t.alternative_alleles&&(n+=`<tr><th>Sequence Change</th><td>${f}</td></tr>`),n+="</tbody></table>",n}function Ei(t){return t.variants.map(e=>{const n=uu(e);return{...n,consequence:n.consequence||"UNKNOWN"}})}function Er(t){return t.variants.flatMap(e=>{var i;const n=(i=e.allele_ids)==null?void 0:i.values[0].replace(/"/g,"");return n==null?void 0:n.split(",").map(r=>r.replace(/\[|\]| /g,""))}).filter(e=>!!e)}function Ai(t){return t.map(e=>su(e.consequence))}function qi(t){var n;let e="UNKNOWN";return(n=t.geneLevelConsequence)!=null&&n.values&&t.geneLevelConsequence.values.length>0&&(e=t.geneLevelConsequence.values[0].replace(/\|/g," ").replace(/"/g,"")),e}function sn(t){return(Array.isArray(t==null?void 0:t.values)?t.values.join(" "):t==null?void 0:t.values)??""}function uu(t){var e,n;return{symbol:We(t),symbolDetail:fo(t),location:`${t.seqId}:${t.fmin}..${t.fmax}`,consequence:qi(t),type:t.type,name:t.name,description:t.description,reference_allele:t.reference_allele,geneId:(e=t.allele_of_gene_ids)==null?void 0:e.values[0].replace(/"/g,""),geneSymbol:(n=t.allele_of_gene_symbols)==null?void 0:n.values[0].replace(/"/g,""),allele_of_genes:sn(t.allele_of_genes),allele_ids:sn(t.allele_ids),alternative_alleles:sn(t.alternative_alleles),impact:sn(t.impact)}}function fo(t){var e,n,i;if(t.variants)return t.variants.length!==1?`${t.variants.length}`:fo(t.variants[0]);if((e=t.allele_symbols)!=null&&e.values)if(t.allele_symbols.values[0].split(",").length>1)try{const r=[],a=t.allele_symbols.values[0].replace(/"|\[|\]/g,""),o=((n=t.allele_ids)==null?void 0:n.values[0].replace(/"|\[|\]/g,""))??"",l=a.split(","),c=o.split(",");for(let f=0;f<c.length;f++)r.push(`${l[f].trim()} (${c[f].trim()})`);return r.join(", ")}catch(r){return console.error(r),`${t.allele_symbols.values[0].split(",").length}`}else return`${t.allele_symbols.values[0].replace(/"/g,"")}(${(i=t.allele_ids)==null?void 0:i.values[0].replace(/"|\[|\]/g,"")})`;return""}function We(t){var e;if(t.variants)return t.variants.length!==1?`${t.variants.length}`:We(t.variants[0]);if((e=t.allele_symbols_text)!=null&&e.values){const n=t.allele_symbols_text.values[0].split(",");return n.length>1?`${n.length}`:t.allele_symbols_text.values[0].replace(/"/g,"")}return""}function hu(t){const e=[];for(const n of t)n.type.toLowerCase()==="deletion"||(n.type.toLowerCase()==="snv"||n.type.toLowerCase()==="point_mutation"?e.push("snv"):n.type.toLowerCase()==="insertion"?e.push("insertion"):(n.type.toLowerCase()==="delins"||n.type.toLowerCase()==="substitution"||n.type.toLowerCase()==="indel"||n.type.toLowerCase()==="mnv")&&e.push("delins"));return[...new Set(e)].sort()}function Si(t,e){return`<svg width="15" top="3" viewBox="0 -2 15 15" style="display: inline;" xmlns="http://www.w3.org/2000/svg"><rect fill="${t}" stroke="none" height="10" width="10"></svg>${e}</polygons></svg>`}function Ft(t){return t=="unknown"?Si("grey",t.replace(/_/g," ")):Si(mn[t].color,t.replace(/_/g," "))}function du(){let t="<table><tbody>";return t+="<tr>",t+='<td align="center" valign="top"><u><b>Variant types</b></u></td>',t+='<td align="center" valign="top" colspan="2"><u><b>Molecular Consequences</b></u></td>',t+="</tr>",t+="<tr>",t+='<td valign="top" ><ul style="list-style-type:none;">',t+=`<li><svg width="15" top="3" viewBox="-7 -2 15 15" style="display: inline;" xmlns="http://www.w3.org/2000/svg"><polygon stroke="black" fill="black" points="${Pi(0)}"></svg>point mutation</polygons></svg></li>`,t+=`<li>${Si("black","deletion")}</li>`,t+=`<li><svg width="15" top="3" viewBox="-7 -2 15 15" style="display: inline;" xmlns="http://www.w3.org/2000/svg"><polygon stroke="black" fill="black" points="${oo(0)}"></svg>insertion</polygons></svg></li>`,t+=`<li><svg width="15" top="3" viewBox="-7 -2 15 15" style="display: inline;" xmlns="http://www.w3.org/2000/svg"><polygon stroke="black" fill="black" points="${so(0)}"></svg>delins/MNV </polygons></svg></li>`,t+="</ul></td>",t+='<td valign="top" ><ul style="list-style-type:none;">',t+=`<li>${Ft("transcript_ablation")}</li>`,t+=`<li>${Ft("splice_acceptor_variant")}</li>`,t+=`<li>${Ft("splice_donor_variant")}</li>`,t+=`<li>${Ft("stop_gained")}</li>`,t+=`<li>${Ft("frameshift_variant")}</li>`,t+=`<li>${Ft("stop_lost")}</li>`,t+=`<li>${Ft("start_lost")}</li>`,t+=`<li>${Ft("inframe_insertion")}</li>`,t+=`<li>${Ft("inframe_deletion")}</li>`,t+=`<li>${Ft("missense_variant")}</li>`,t+="</ul></td>",t+='<td valign="top" ><ul style="list-style-type:none;">',t+=`<li>${Ft("protein_altering_variant")}</li>`,t+=`<li>${Ft("splice_region_variant")}</li>`,t+=`<li>${Ft("start_retained_variant")}</li>`,t+=`<li>${Ft("stop_retained_variant")}</li>`,t+=`<li>${Ft("synonymous_variant")}</li>`,t+=`<li>${Ft("coding_sequence_variant")}</li>`,t+=`<li>${Ft("five_prime_UTR_variant")}</li>`,t+=`<li>${Ft("three_prime_UTR_variant")}</li>`,t+=`<li>${Ft("intron_variant")}</li>`,t+=`<li>${Ft("non_coding_transcript_variant")}</li>`,t+=`<li>${Ft("unknown")}</li>`,t+="</ul></td>",t+="</tr>",t+="<tr>",t+="<td></td>",t+='<td colspan="2"><a href="https://uswest.ensembl.org/info/genome/variation/prediction/predicted_data.html">Source: Ensembl</a></td>',t+="</tr>",t+="</tbody></table>",t}function _u(t){return t===1?"+":t===-1?"-":t}function Ct(t){let e="";return e+='<table class="tooltip-table" style="margin-top: 30px;"><tbody>',e+=t.id.includes("http")?`<tr><th>Name</th><td>${t.name}</td></tr>`:`<tr><th>Name</th><td>${t.name} (${t.id})</td></tr>`,e+=`<tr><th>Type</th><td>${t.type}</td></tr>`,e+=`<tr><th>Source</th><td>${t.source}</td></tr>`,e+=`<tr><th>Location</th><td>${t.seqId}:${t.fmin}..${t.fmax} (${_u(t.strand)})</td></tr>`,e+="</tbody></table>",e}function co(t,e,n,i){let r="";if(t==="FlyBase")r=`https://alliancegenome.org/jbrowse/?data=data%2FDrosophila%20melanogaster&tracks=Variants%2CAll%20Genes&highlight=&loc=${e}%3A${n}..${i}`;else if(t==="MGI")r=`https://alliancegenome.org/jbrowse/?data=data%2FMus%20musculus&tracks=Variants%2CAll%20Genes&highlight=&loc=${e}%3A${n}..${i}`;else if(t==="WormBase")r=`https://alliancegenome.org/jbrowse/?data=data%2FCaenorhabditis%20elegans&tracks=Variants%2CAll%20Genes&highlight=&loc=${e}%3A${n}..${i}`;else if(t==="ZFIN")r=`https://alliancegenome.org/jbrowse/?data=data%2FDanio%20rerio&tracks=Variants%2CAll%20Genes&highlight=&loc=${e}%3A${n}..${i}`;else if(t==="SGD")r=`https://alliancegenome.org/jbrowse/?data=data%2FSaccharomyces%20cerevisiae&tracks=Variants%2CAll%20Genes&highlight=&loc=${e}%3A${n}..${i}`;else if(t==="RGD")r=`https://alliancegenome.org/jbrowse/?data=data%2FRattus%20norvegicus&tracks=Variants%2CAll%20Genes&highlight=&loc=${e}%3A${n}..${i}`;else if(t==="human")r=`https://alliancegenome.org/jbrowse/?data=data%2FHomo%20sapiens&tracks=All%20Genes&highlight=&loc=${e}%3A${n}..${i}`;else return console.warn("no source found",t),"Maximum features displayed.  See full view for more.";return`<a href="${r}">Maximum features displayed.  See full view for more.</a>`}class pu{constructor({viewer:e,height:n,width:i,transcriptTypes:r,variantTypes:a,showVariantLabel:o,variantFilter:l,binRatio:c,isoformFilter:f,initialHighlight:u,trackData:m,variantData:g}){this.trackData=m??[],this.variantData=g??[],this.viewer=e,this.width=i,this.variantFilter=l,this.isoformFilter=f,this.initialHighlight=u,this.height=n,this.transcriptTypes=r,this.variantTypes=a,this.binRatio=c,this.showVariantLabel=o??!0}DrawTrack(){const e=this.isoformFilter;let n=this.trackData;const i=this.initialHighlight,r=this.filterVariantData(this.variantData,this.variantFilter),a=this.viewer,o=this.width,l=this.binRatio,c=hu(r),f=c.length,u=this.trackData[0].source,m=this.trackData[0].seqId,g=e.length===0?9:30,p=["UTR","five_prime_UTR","three_prime_UTR"],A=["CDS"],U=["exon"],L=this.transcriptTypes,D=ro(n,L),E=D.fmin,k=D.fmax,y=10,R=10,I=40,b=20,z=2,F=0,B=10,x=10,q=4,H=20,J=10,ft=`0,0 0,${H} ${J},${J}`,gt=10,K=40,Z=22.5,V=_e().domain([E,k]).range([0,o]),Dt=a.append("g").attr("class","deletions track").attr("transform","translate(0,22.5)"),St=a.append("g").attr("class","label"),j={};for(let tt=0,ct=p.length;tt<ct;tt++)j[p[tt]]=200;for(let tt=0,ct=A.length;tt<ct;tt++)j[A[tt]]=1e3;for(let tt=0,ct=U.length;tt<ct;tt++)j[U[tt]]=100;const mt={};n=n.sort((tt,ct)=>tt.selected&&!ct.selected?-1:!tt.selected&&ct.selected?1:tt.name.localeCompare(ct.name));let _t=0;const at=$t("body").append("div").attr("class","gfc-tooltip").style("visibility","visible").style("opacity",0),rt=()=>{at.transition().duration(100).style("opacity",10).style("visibility","hidden")},ht=lo(r,(k-E)*l),dt=ht.filter(tt=>tt.type==="deletion"),Tt=ht.filter(tt=>tt.type!=="deletion"),wt=[];dt.forEach(tt=>{var O;const{fmax:ct,fmin:yt}=tt,W=this.width,Mt=We(tt),Y=Ei(tt),bt=Er(tt),At=ki(Y),Et=Ai(Y)[0];wt.push({fmin:yt,fmax:ct,row:br(wt,yt,ct)});const _=Math.max(Math.ceil(V(ct)-V(yt)),z);Dt.append("rect").attr("class","variant-deletion").attr("id",`variant-${yt}`).attr("x",V(yt)).attr("transform",`translate(0,${x*br(wt,yt,ct)})`).attr("z-index",30).attr("fill",Et).attr("height",x).attr("width",_).on("click",()=>{Nt(at,At,rt)}).on("mouseover",C=>{const G=C.variant;jt(".variant-deletion").filter(v=>v.variant===G).style("stroke","black"),$t(".label").selectAll(".variantLabel,.variantLabelBackground").raise().filter(v=>v.variant===G).style("opacity",1)}).on("mouseout",()=>{jt(".variant-deletion").filter(C=>C.selected!=="true").style("stroke",null),$t(".label").selectAll(".variantLabel,.variantLabelBackground").style("opacity",0)}).datum({fmin:yt,fmax:ct,variant:Mt+yt,alleles:bt});{let C=0;C=V(yt);const G=x*f+Z,v=St.append("text").attr("class","variantLabel").attr("fill",Et).attr("opacity",0).attr("height",F).attr("transform",`translate(${C},${G})`).text(Mt).on("click",()=>{Nt(at,At,rt)}).datum({fmin:yt,variant:Mt+yt}),S=((O=v.node())==null?void 0:O.getBBox().width)??0;if(S+C>W){const h=S+C-W;C-=h,v.attr("transform",`translate(${C},${G})`)}}});const ot=Fe(this.viewer),st=a.append("g").attr("class","variants track").attr("transform",`translate(0,${ot})`);Tt.forEach(tt=>{var G;const{type:ct,fmax:yt,fmin:W}=tt;let Mt=!0,Y=!1;const bt=this.width,At=We(tt),Et=Ei(tt),_=Er(tt),O=ki(Et),C=Ai(Et)[0];if(ct.toLowerCase()==="snv"||ct.toLowerCase()==="point_mutation"?(Y=!0,st.append("polygon").attr("class","variant-SNV").attr("id",`variant-${W}`).attr("points",Pi(V(W))).attr("fill",C).attr("x",V(W)).attr("transform",`translate(0,${x*c.indexOf("snv")})`).attr("z-index",30).on("click",()=>{Nt(at,O,rt)}).on("mouseover",function(v){const S=v.variant;jt(".variant-SNV").filter(h=>h.variant===S).style("stroke","black"),$t(".label").selectAll(".variantLabel,.variantLabelBackground").raise().filter(h=>h.variant===S).style("opacity",1)}).on("mouseout",()=>{jt(".variant-SNV").filter(v=>v.selected!="true").style("stroke",null),$t(".label").selectAll(".variantLabel,.variantLabelBackground").style("opacity",0)}).datum({fmin:W,fmax:yt,variant:At+W,alleles:_})):ct.toLowerCase()==="insertion"?(Y=!0,st.append("polygon").attr("class","variant-insertion").attr("id",`variant-${W}`).attr("points",oo(V(W))).attr("fill",C).attr("x",V(W)).attr("transform",`translate(0,${x*c.indexOf("insertion")})`).attr("z-index",30).on("click",()=>{Nt(at,O,rt)}).on("mouseover",v=>{const S=v.variant;jt(".variant-insertion").filter(h=>h.variant===S).style("stroke","black"),$t(".label").selectAll(".variantLabel,.variantLabelBackground").raise().filter(h=>h.variant===S).style("opacity",1)}).on("mouseout",()=>{jt(".variant-insertion").filter(v=>v.selected!="true").style("stroke",null),$t(".label").selectAll(".variantLabel,.variantLabelBackground").style("opacity",0)}).datum({fmin:W,fmax:yt,variant:At+W,alleles:_})):ct.toLowerCase()==="delins"||ct.toLowerCase()==="substitution"||ct.toLowerCase()==="indel"||ct.toLowerCase()==="mnv"?(Y=!0,st.append("polygon").attr("class","variant-delins").attr("id",`variant-${W}`).attr("points",so(V(W))).attr("x",V(W)).attr("transform",`translate(0,${x*c.indexOf("delins")})`).attr("fill",C).attr("z-index",30).on("click",()=>{Nt(at,O,rt)}).on("mouseover",v=>{const S=v.variant;jt(".variant-delins").filter(h=>h.variant===S).style("stroke","black"),$t(".label").selectAll(".variantLabel,.variantLabelBackground").raise().filter(h=>h.variant===S).style("opacity",1)}).on("mouseout",()=>{jt(".variant-delins").filter(v=>v.selected!="true").style("stroke",null),$t(".label").selectAll(".variantLabel,.variantLabelBackground").style("opacity",0)}).datum({fmin:W,fmax:yt,variant:At+W,alleles:_})):(console.warn("type not found",ct,tt),Mt=!1),Mt){let v=0;v=Y?V(W)-gt/2:V(W);const S=x*f+Z,h=St.append("text").attr("class","variantLabel").attr("fill",C).attr("opacity",0).attr("height",F).attr("transform",`translate(${v},${S})`).text(At).on("click",()=>{Nt(at,O,rt)}).datum({fmin:W,variant:At+W}),M=((G=h.node())==null?void 0:G.getBBox().width)??0;if(M+v>bt){const et=M+v-bt;v-=et,h.attr("transform",`translate(${v},35)`)}}});const Rt=ot;St.attr("transform",`translate(0,${Rt})`);const zt=Fe(this.viewer)+Z,Ot=a.append("g").attr("transform",`translate(0,${zt})`).attr("class","track");let P=0;const ut=[];let nt=-1,kt=-1;const Nt=this.renderTooltipDescription,Pt=[];for(let tt=0;tt<n.length&&P<g;tt++){const ct=n[tt];let yt=ct.children;if(yt){const W=ct.selected;yt=yt.sort((Y,bt)=>Y.name.localeCompare(bt.name));let Mt=!1;yt.forEach(Y=>{var At;if(!(e.includes(Y.id)||e.includes(Y.name))&&e.length!==0||Pt.includes(Y.id))return;Pt.push(Y.id);const bt=Y.type;if(L.includes(bt)){let Et=Zi(ut,V(Y.fmin),V(Y.fmax));if(P<g){let _="",O,C=!1;const G=ct.name;Object.keys(mt).includes(G)||(_t+=b,C=!0,mt[G]="Green");const v=Ot.append("g").attr("class","isoform").attr("transform",`translate(0,${P*I+10+_t})`);C&&(_=G,O=v.append("text").attr("class","geneLabel").attr("fill",W?"sandybrown":"black").attr("height",F).attr("transform",`translate(${V(Y.fmin)},-${b})`).text(_).on("click",()=>{Nt(at,Ct(ct),rt)}).datum({fmin:Y.fmin})),v.append("polygon").datum(()=>({fmin:Y.fmin,fmax:Y.fmax,strand:ct.strand})).attr("class","transArrow").attr("points",ft).attr("transform",M=>ct.strand>0?`translate(${Number(V(M.fmax))},0)`:`translate(${Number(V(M.fmin))},${H}) rotate(180)`).on("click",()=>{Nt(at,Ct(Y),rt)}),v.append("rect").attr("class","transcriptBackbone").attr("y",10+F).attr("height",q).attr("transform",`translate(${V(Y.fmin)},0)`).attr("width",V(Y.fmax)-V(Y.fmin)).on("click",()=>{Nt(at,Ct(Y),rt)}).datum({fmin:Y.fmin,fmax:Y.fmax}),_=Y.name,O=v.append("text").attr("class","transcriptLabel").attr("fill",W?"sandybrown":"gray").attr("opacity",W?1:.5).attr("height",F).attr("transform",`translate(${V(Y.fmin)},0)`).text(_).on("click",()=>{Nt(at,Ct(Y),rt)}).datum({fmin:Y.fmin});let S=_.length*2;try{S=((At=O.node())==null?void 0:At.getBBox().width)??0}catch{}Number(S+V(Y.fmin))>o;const h=S>V(Y.fmax)-V(Y.fmin)?V(Y.fmin)+S:V(Y.fmax);if(ut[Et]){const M=ut[Et];M.push(`${V(Y.fmin)}:${h}`),ut[Et]=M}else ut[Et]=[`${V(Y.fmin)}:${h}`];(nt<0||nt>Y.fmin)&&(nt=Y.fmin),(kt<0||kt<Y.fmax)&&(kt=Y.fmax),Y.children&&(Y.children=Y.children.sort((M,et)=>{const s=j[M.type],T=j[et.type];return typeof s=="number"&&typeof T=="number"?s-T:typeof s=="number"&&typeof T!="number"?-1:typeof s!="number"&&typeof T=="number"?1:M.type.localeCompare(et.type)}),Y.children.forEach(M=>{const et=M.type;U.includes(et)?v.append("rect").attr("class","exon").attr("x",V(M.fmin)).attr("transform",`translate(0,${y-q})`).attr("height",y).attr("z-index",10).attr("width",V(M.fmax)-V(M.fmin)).on("click",()=>{Nt(at,Ct(Y),rt)}).datum({fmin:M.fmin,fmax:M.fmax}):A.includes(et)?v.append("rect").attr("class","CDS").attr("x",V(M.fmin)).attr("transform",`translate(0,${R-q})`).attr("z-index",20).attr("height",R).attr("width",V(M.fmax)-V(M.fmin)).on("click",()=>{Nt(at,Ct(Y),rt)}).datum({fmin:M.fmin,fmax:M.fmax}):p.includes(et)&&v.append("rect").attr("class","UTR").attr("x",V(M.fmin)).attr("transform",`translate(0,${B-q})`).attr("z-index",20).attr("height",B).attr("width",V(M.fmax)-V(M.fmin)).on("click",()=>{Nt(at,Ct(Y),rt)}).datum({fmin:M.fmin,fmax:M.fmax})})),P+=1}if(P===g&&!Mt){const _=co(u,m,E,k);++Et,Mt=!0,Ot.append("a").attr("class","transcriptLabel").attr("xlink:show","new").append("text").attr("x",10).attr("y",10).attr("transform",`translate(0,${P*I+20+_t})`).attr("fill","red").attr("opacity",1).attr("height",F).html(_)}}})}}return i&&ao(i,a),P===0&&Ot.append("text").attr("x",30).attr("y",F+10).attr("fill","orange").attr("opacity",.6).text("Overview of non-coding genome features unavailable at this time."),P*I+_t+K}filterVariantData(e,n){return console.log({variantFilter:n}),n.length===0?e:e.filter(i=>{var a,o,l,c;let r=!1;console.log({v:i},i.name);try{(n.includes(i.name)||(a=i.allele_symbols)!=null&&a.values&&n.includes(i.allele_symbols.values[0].replace(/"/g,""))||(o=i.symbol)!=null&&o.values&&n.includes(i.symbol.values[0].replace(/"/g,""))||(l=i.symbol_text)!=null&&l.values&&n.includes(i.symbol_text.values[0].replace(/"/g,"")))&&(r=!0),(((c=i.allele_ids)==null?void 0:c.values[0].replace(/"|\[|\]| /g,"").split(","))??[]).forEach(u=>{n.includes(u)&&(r=!0)})}catch(f){console.error("error processing filter with so returning anyway",n,i,f),r=!0}return r})}renderTooltipDescription(e,n,i){e.transition().duration(200).style("width","auto").style("height","auto").style("opacity",1).style("visibility","visible"),e.html(n).style("left",`${window.event.pageX+10}px`).style("top",`${window.event.pageY+10}px`).append("button").attr("type","button").text("Close").on("click",()=>{i()}),e.append("button").attr("type","button").html("&times;").attr("class","tooltipDivX").on("click",()=>{i()})}setInitialHighlight(e,n){var a;const i=((a=n.node())==null?void 0:a.getBBox().height)??0;n.selectAll(".variant-deletion,.variant-SNV,.variant-insertion,.variant-delins").filter(o=>{let l=!1;return o.alleles&&(o.alleles[0].replace(/"|\[|\]| /g,"").split(",").forEach(f=>{e.includes(f)&&(l=!0)}),o.alleles.forEach(f=>{e.includes(f)&&(l=!0)})),l}).datum(o=>(o.selected="true",o)).style("stroke","black").each(function(){const o=+($t(this).attr("width")||3),l=+$t(this).attr("x")-o/2;n.select(".deletions.track").append("rect").attr("class","highlight").attr("x",l).attr("width",o).attr("height",i).attr("fill","yellow").attr("opacity",.8).lower()})}}class gu{constructor({viewer:e,height:n,width:i,transcriptTypes:r,variantTypes:a,showVariantLabel:o,variantFilter:l,trackData:c,variantData:f}){this.trackData=c??[],this.variantData=f??[],this.viewer=e,this.width=i,this.variantFilter=l,this.height=n,this.transcriptTypes=r,this.variantTypes=a,this.showVariantLabel=o??!0}DrawTrack(){const e=this.variantData;let i=this.trackData;const r=this.filterVariantData(e,this.variantFilter),a=this.viewer,o=this.width,l=this.showVariantLabel,c=["UTR","five_prime_UTR","three_prime_UTR"],f=["CDS"],u=["exon"],m=this.transcriptTypes,g=ro(i,m),p=g.fmin,A=g.fmax,U=10,L=10,D=10,E=40,k=20,y=2,R=0,I=10,b=10,z=20,F=4,B=20,x=10,q=`0,0 0,${B} ${x},${x}`,H=10,J=10,ft=ot=>`${ot-J/2},${H} ${ot},0 ${ot+J/2},${H}`,gt=ot=>`${ot-J/2},${H} ${ot+J/2},${H} ${ot-J/2},0 ${ot+J/2},0`,K=ot=>`${ot},${H} ${ot+J/2},${H/2} ${ot},0 ${ot-J/2},${H/2}`,Z=_e().domain([p,A]).range([0,o]),V=Fe(this.viewer),Dt=a.append("g").attr("transform",`translate(0,${V})`).attr("class","track"),St={};for(const ot of c)St[ot]=200;for(const ot of f)St[ot]=1e3;for(const ot of u)St[ot]=100;const j={};i=i.sort((ot,st)=>ot.selected&&!st.selected?-1:!ot.selected&&st.selected?1:ot.name-st.name);let mt=0;const _t=$t("body").append("div").attr("class","gfc-tooltip").style("visibility","visible").style("opacity",0),at=()=>{_t.transition().duration(100).style("opacity",10).style("visibility","hidden")};let rt=0;const ht=[];let dt=-1,Tt=-1;const wt=this.renderTooltipDescription;for(let ot=0;ot<i.length&&rt<U;ot++){const st=i[ot];let Rt=st.children;if(Rt){const zt=st.selected;Rt=Rt.sort((P,ut)=>P.name<ut.name?-1:P.name>ut.name?1:P-ut);let Ot=!1;Rt.forEach(P=>{const ut=P.type;if(m.includes(ut)){let nt=Zi(ht,Z(P.fmin),Z(P.fmax));if(rt<U){let kt,Nt,Pt=!1;Object.keys(j).includes(st.name)||(mt+=k,Pt=!0,j[st.name]="Green");const tt=Dt.append("g").attr("class","isoform").attr("transform",`translate(0,${rt*E+10+mt})`);Pt&&(kt=st.name,Nt=tt.append("text").attr("class","geneLabel").attr("fill",zt?"sandybrown":"black").attr("height",R).attr("transform",`translate(${Z(P.fmin)},-${k})`).text(kt).on("click",()=>{wt(_t,Ct(st),at)}).datum({fmin:P.fmin})),tt.append("polygon").datum(()=>({fmin:P.fmin,fmax:P.fmax,strand:st.strand})).attr("class","transArrow").attr("points",q).attr("transform",W=>st.strand>0?`translate(${Number(Z(W.fmax))},0)`:`translate(${Number(Z(W.fmin))},${B}) rotate(180)`).on("click",()=>{wt(_t,Ct(P),at)}),tt.append("rect").attr("class","transcriptBackbone").attr("y",10+R).attr("height",F).attr("transform",`translate(${Z(P.fmin)},0)`).attr("width",Z(P.fmax)-Z(P.fmin)).on("click",()=>{wt(_t,Ct(P),at)}).datum({fmin:P.fmin,fmax:P.fmax}),kt=P.name,Nt=tt.append("text").attr("class","transcriptLabel").attr("fill",zt?"sandybrown":"gray").attr("opacity",zt?1:.5).attr("height",R).attr("transform",`translate(${Z(P.fmin)},0)`).text(kt).on("click",()=>{wt(_t,Ct(P),at)}).datum({fmin:P.fmin});let ct=kt.length*2;try{ct=Nt.node().getBBox().width}catch{}Number(ct+Z(P.fmin))>o;const yt=ct>Z(P.fmax)-Z(P.fmin)?Z(P.fmin)+ct:Z(P.fmax);if(ht[nt]){const W=ht[nt];W.push(`${Z(P.fmin)}:${yt}`),ht[nt]=W}else ht[nt]=[`${Z(P.fmin)}:${yt}`];(dt<0||dt>P.fmin)&&(dt=P.fmin),(Tt<0||Tt<P.fmax)&&(Tt=P.fmax),P.children&&(P.children=P.children.sort((W,Mt)=>{const Y=St[W.type],bt=St[Mt.type];return typeof Y=="number"&&typeof bt=="number"?Y-bt:typeof Y=="number"&&typeof bt!="number"?-1:typeof Y!="number"&&typeof bt=="number"?1:W.type-Mt.type}),P.children.forEach(W=>{const Mt=W.type;let Y=!1;if(u.includes(Mt)?(Y=!0,tt.append("rect").attr("class","exon").attr("x",Z(W.fmin)).attr("transform",`translate(0,${L-F})`).attr("height",L).attr("z-index",10).attr("width",Z(W.fmax)-Z(W.fmin)).on("click",()=>{wt(_t,Ct(P),at)}).datum({fmin:W.fmin,fmax:W.fmax})):f.includes(Mt)?(Y=!0,tt.append("rect").attr("class","CDS").attr("x",Z(W.fmin)).attr("transform",`translate(0,${D-F})`).attr("z-index",20).attr("height",D).attr("width",Z(W.fmax)-Z(W.fmin)).on("click",()=>{wt(_t,Ct(P),at)}).datum({fmin:W.fmin,fmax:W.fmax})):c.includes(Mt)&&(Y=!0,tt.append("rect").attr("class","UTR").attr("x",Z(W.fmin)).attr("transform",`translate(0,${I-F})`).attr("z-index",20).attr("height",I).attr("width",Z(W.fmax)-Z(W.fmin)).on("click",()=>{wt(_t,Ct(P),at)}).datum({fmin:W.fmin,fmax:W.fmax})),Y){const bt=lo(r,1);cu(r),bt.forEach(At=>{const{type:Et,fmax:_,fmin:O}=At;if(O<W.fmin&&_>W.fmin||_>W.fmax&&O<W.fmax||_<=W.fmax&&O>=W.fmin){let C=!0;const G=Ei(At),v=Ai(G)[0],S=ki(G),h=Math.max(Math.ceil(Z(_)-Z(O)),y);if(Et.toLowerCase()==="deletion"||Et.toLowerCase()==="mnv"?tt.append("rect").attr("class","variant-deletion").attr("x",Z(O)).attr("transform",`translate(0,${z-F})`).attr("z-index",30).attr("fill",v).attr("height",b).attr("width",h).on("click",()=>{wt(_t,S,at)}).datum({fmin:O,fmax:_}):Et.toLowerCase()==="snv"||Et.toLowerCase()==="point_mutation"?tt.append("polygon").attr("class","variant-SNV").attr("points",K(Z(O))).attr("fill",v).attr("x",Z(O)).attr("transform",`translate(0,${z-F})`).attr("z-index",30).on("click",()=>{wt(_t,S,at)}).datum({fmin:O,fmax:_}):Et.toLowerCase()==="insertion"?tt.append("polygon").attr("class","variant-insertion").attr("points",ft(Z(O))).attr("fill",v).attr("x",Z(O)).attr("transform",`translate(0,${z-F})`).attr("z-index",30).on("click",()=>{wt(_t,S,at)}).datum({fmin:O,fmax:_}):Et.toLowerCase()==="delins"||Et.toLowerCase()==="substitution"||Et.toLowerCase()==="indel"?tt.append("polygon").attr("class","variant-delins").attr("points",gt(Z(O))).attr("x",Z(O)).attr("transform",`translate(0,${z-F})`).attr("fill",v).attr("z-index",30).on("click",()=>{wt(_t,S,at)}).datum({fmin:O,fmax:_}):(console.warn("type not found",Et,At),C=!1),C&&l){const M=We(At),et=M.length||1;tt.append("text").attr("class","variantLabel").attr("fill",zt?"sandybrown":v).attr("opacity",zt?1:.5).attr("height",R).attr("transform",`translate(${Z(O-et/2*100)},${z*2.2-F})`).html(M).on("click",()=>{wt(_t,S,at)}).datum({fmin:P.fmin})}}})}})),rt+=1}rt===U&&!Ot&&(++nt,Ot=!0,Dt.append("a").attr("class","transcriptLabel").attr("xlink:show","new").append("text").attr("x",10).attr("y",10).attr("transform",`translate(0,${rt*E+20+mt})`).attr("fill","red").attr("opacity",1).attr("height",R).text("Maximum features displayed.  See full view for more."))}})}}return rt===0&&Dt.append("text").attr("x",30).attr("y",R+10).attr("fill","orange").attr("opacity",.6).text("Overview of non-coding genome features unavailable at this time."),rt*E+mt}filterVariantData(e,n){return n.length===0?e:e.filter(i=>n.includes(i.name))}renderTooltipDescription(e,n,i){e.transition().duration(200).style("width","auto").style("height","auto").style("opacity",1).style("visibility","visible"),e.html(n).style("left",`${window.event.pageX+10}px`).style("top",`${window.event.pageY+10}px`).append("button").attr("type","button").text("Close").on("click",()=>{i()}),e.append("button").attr("type","button").html("&times;").attr("class","tooltipDivX").on("click",()=>{i()})}}class mu{constructor({viewer:e,height:n,width:i,transcriptTypes:r,htpVariant:a,trackData:o,region:l,genome:c}){this.trackData=o??[],this.viewer=e,this.width=i,this.height=n,this.transcriptTypes=r,this.htpVariant=a,this.region=l,this.genome=c}renderTooltipDescription(e,n,i){e.transition().duration(200).style("width","auto").style("height","auto").style("opacity",1).style("visibility","visible"),e.html(n).style("left",`${window.event.pageX+10}px`).style("top",`${window.event.pageY+10}px`).append("button").attr("type","button").text("Close").on("click",()=>{i()}),e.append("button").attr("type","button").html("&times;").attr("class","tooltipDivX").on("click",()=>{i()})}DrawTrack(){var K;let e=this.trackData;const n=this.htpVariant,i=this.viewer,r=this.width,a=this.genome,o=(K=e[0])==null?void 0:K.seqId,l=10,c=["UTR","five_prime_UTR","three_prime_UTR"],f=["CDS"],u=["exon"],m=this.transcriptTypes,g=10,p=10,A=40,U=0,L=10,D=4,E=20,k=10,y=`0,0 0,${E} ${k},${k}`,R=this.renderTooltipDescription,I=_e().domain([this.region.start,this.region.end]).range([0,r]),b={};for(let Z=0,V=c.length;Z<V;Z++)b[c[Z]]=200;for(let Z=0,V=f.length;Z<V;Z++)b[f[Z]]=1e3;for(let Z=0,V=u.length;Z<V;Z++)b[u[Z]]=100;e=e.sort((Z,V)=>Z.selected&&!V.selected?-1:!Z.selected&&V.selected?1:Z.name-V.name);const z=$t("body").append("div").attr("class","gfc-tooltip").style("visibility","visible").style("opacity",0),F=()=>{z.transition().duration(100).style("opacity",10).style("visibility","hidden")};if(n){const Z=i.append("g").attr("class","variants track").attr("transform","translate(0,22.5)"),[,V]=n.split(":");Z.append("polygon").attr("class","variant-SNV").attr("points",Pi(I(+V))).attr("fill","red").attr("x",I(+V)).attr("z-index",30)}const B=Fe(this.viewer),x=i.append("g").attr("transform",`translate(0,${B})`).attr("class","track");let q=0;const H=[];let J=-1,ft=-1;const gt=[];for(let Z=0;Z<e.length&&q<l;Z++){const V=e[Z];let Dt=V.children;if(Dt){const St=V.selected;Dt=Dt.sort((j,mt)=>j.name<mt.name?-1:j.name>mt.name?1:0),Dt.forEach(j=>{var _t,at;const mt=j.type;if(!gt.includes(j.id)&&(gt.push(j.id),m.includes(mt))){let rt=Zi(H,I(j.fmin),I(j.fmax));if(q<l){const ht=x.append("g").attr("class","isoform").attr("transform",`translate(0,${q*A+10})`),dt=Math.max(I(j.fmin),0),Tt=Math.min(I(j.fmax),this.width);ht.append("polygon").datum(()=>({strand:V.strand})).attr("class","transArrow").attr("points",y).attr("transform",()=>V.strand>0?`translate(${Tt},0)`:`translate(${dt},${E}) rotate(180)`).on("click",()=>{R(z,Ct(j),F)}),ht.append("rect").attr("class","transcriptBackbone").attr("y",10+U).attr("height",D).attr("transform",`translate(${dt},0)`).attr("width",Tt-dt).datum({fmin:j.fmin,fmax:j.fmax}).on("click",()=>{R(z,Ct(j),F)});let wt=j.name;V.name!==j.name&&(wt+=` (${V.name})`);let ot=Math.max(I(j.fmin),0);const st=ht.append("svg:text").attr("class","transcriptLabel").attr("fill",St?"sandybrown":"gray").attr("opacity",St?1:.5).attr("height",U).attr("transform",`translate(${ot},0)`).text(wt).datum({fmin:j.fmin}).on("click",()=>{R(z,Ct(j),F)});let Rt=100;try{Rt=((_t=st.node())==null?void 0:_t.getBBox().width)??0}catch{}if(Rt+ot>this.width){const P=Rt+ot-this.width;ot-=P,st.attr("transform",`translate(${ot},0)`)}let zt=wt.length*2;try{zt=((at=st.node())==null?void 0:at.getBBox().width)??0}catch(P){console.error("Not yet rendered",P)}Number(zt+I(j.fmin))>r;const Ot=zt>I(j.fmax)-I(j.fmin)?I(j.fmin)+zt:I(j.fmax);if(H[rt]){const P=H[rt];P.push(`${I(j.fmin)}:${Ot}`),H[rt]=P}else H[rt]=[`${I(j.fmin)}:${Ot}`];(J<0||J>j.fmin)&&(J=j.fmin),(ft<0||ft<j.fmax)&&(ft=j.fmax),j.children&&(j.children=j.children.sort(function(P,ut){const nt=b[P.type],kt=b[ut.type];return typeof nt=="number"&&typeof kt=="number"?nt-kt:typeof nt=="number"&&typeof kt!="number"?-1:typeof nt!="number"&&typeof kt=="number"?1:P.type.localeCompare(ut.type)}),j.children.forEach(P=>{const ut=P.type;if(I(P.fmin)>this.width||I(P.fmax)<0)return;const nt=Math.max(I(P.fmin),0),kt=Math.min(I(P.fmax),this.width);u.includes(ut)?ht.append("rect").attr("class","exon").attr("x",nt).attr("transform",`translate(0,${g-D})`).attr("height",g).attr("z-index",10).attr("width",kt-nt).datum({fmin:P.fmin,fmax:P.fmax}).on("click",()=>{R(z,Ct(j),F)}):f.includes(ut)?ht.append("rect").attr("class","CDS").attr("x",nt).attr("transform",`translate(0,${p-D})`).attr("z-index",20).attr("height",p).attr("width",kt-nt).datum({fmin:P.fmin,fmax:P.fmax}).on("click",()=>{R(z,Ct(j),F)}):c.includes(ut)&&ht.append("rect").attr("class","UTR").attr("x",nt).attr("transform",`translate(0,${L-D})`).attr("z-index",20).attr("height",L).attr("width",kt-nt).datum({fmin:P.fmin,fmax:P.fmax}).on("click",()=>{R(z,Ct(j),F)})})),q+=1}if(q===l){const ht=co(a,o,this.region.start,this.region.end);++rt,x.append("a").attr("class","transcriptLabel").attr("xlink:show","new").append("text").attr("x",10).attr("transform",`translate(0,${q*A+10})`).attr("fill","red").attr("opacity",1).attr("height",U).html(ht)}}})}}return q===0&&x.append("text").attr("x",30).attr("y",U+10).attr("fill","orange").attr("opacity",.6).text("Overview of non-coding genome features unavailable at this time."),q*A}}class vu{constructor({viewer:e,track:n,height:i,width:r}){this.refSeq="",this.viewer=e,this.width=r,this.height=i,this.track=n}DrawScrollableTrack(){const e=this.viewer,n=this.refSeq,i=_e().domain([this.track.start,this.track.end+1]).range(this.track.range),r=cs(i).tickValues(this._getRefTick(this.track.start+1,this.track.end)).tickFormat((c,f)=>n[f]).tickSize(8).tickSizeInner(8).tickPadding(6),a=Math.floor(n.length/10),o=tr(i).ticks(a).tickValues(this._getRefTick(this.track.start+1,this.track.end,10));e.append("g").attr("class","axis x-local-axis track").attr("width",this.track.range[1]).attr("transform","translate(0, 20)").call(r),e.append("g").attr("class","axis x-local-numerical track").attr("width",this.track.range[1]).attr("transform","translate(0, 20)").call(o);const l=jt(".x-local-numerical .tick text");l.first().attr("text-anchor","start"),l.last().attr("text-anchor","end"),jt(".x-local-axis .tick text").each(function(){const f=$t(this).text();let u="nucleotide nt-a";f==="T"?u="nucleotide nt-t":f==="C"?u="nucleotide nt-c":f==="G"&&(u="nucleotide nt-g"),$t(this.parentNode).append("rect").attr("class",u).attr("transform","translate(-8,8)")})}DrawOverviewTrack(){const e=this.viewer,n=this.track.start,i=this.track.end,r=this.width,a=_e().domain([n,i]).range(this.track.range),o=tr(a).ticks(8,"s").tickSize(8);e.append("g").attr("class","axis track").attr("width",r).attr("height",20).attr("transform","translate(0,20)").call(o)}_getRefTick(e,n,i){return i?new Array(Math.ceil((n-e+1)/10)).fill(0).map((r,a)=>e+a*10):new Array(n-e+1).fill(0).map((r,a)=>e+a)}async getTrackData(){}}const lt={ISOFORM_EMBEDDED_VARIANT:"ISOFORM_EMBEDDED_VARIANT",ISOFORM_AND_VARIANT:"ISOFORM_AND_VARIANT",ISOFORM:"ISOFORM",VARIANT:"VARIANT",VARIANT_GLOBAL:"VARIANT_GLOBAL"};var Yt="$";function Rn(){}Rn.prototype=Gi.prototype={constructor:Rn,has:function(t){return Yt+t in this},get:function(t){return this[Yt+t]},set:function(t,e){return this[Yt+t]=e,this},remove:function(t){var e=Yt+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Yt&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Yt&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Yt&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Yt&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Yt&&++t;return t},empty:function(){for(var t in this)if(t[0]===Yt)return!1;return!0},each:function(t){for(var e in this)e[0]===Yt&&t(this[e],e.slice(1),this)}};function Gi(t,e){var n=new Rn;if(t instanceof Rn)t.each(function(l,c){n.set(c,l)});else if(Array.isArray(t)){var i=-1,r=t.length,a;if(e==null)for(;++i<r;)n.set(i,t[i]);else for(;++i<r;)n.set(e(a=t[i],i,t),a)}else if(t)for(var o in t)n.set(o,t[o]);return n}function Ar(){}var ge=Gi.prototype;Ar.prototype={constructor:Ar,has:ge.has,add:function(t){return t+="",this[Yt+t]=t,this},remove:ge.remove,clear:ge.clear,values:ge.keys,size:ge.size,empty:ge.empty,each:ge.each};var $i="http://www.w3.org/1999/xhtml";const Sr={svg:"http://www.w3.org/2000/svg",xhtml:$i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uo(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Sr.hasOwnProperty(e)?{space:Sr[e],local:t}:t}function wu(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===$i&&e.documentElement.namespaceURI===$i?e.createElement(t):e.createElementNS(n,t)}}function xu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ho(t){var e=uo(t);return(e.local?xu:wu)(e)}function yu(){}function _o(t){return t==null?yu:function(){return this.querySelector(t)}}function bu(t){typeof t!="function"&&(t=_o(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,l=i[r]=new Array(o),c,f,u=0;u<o;++u)(c=a[u])&&(f=t.call(c,c.__data__,u,a))&&("__data__"in c&&(f.__data__=c.__data__),l[u]=f);return new Wt(i,this._parents)}function ku(){return[]}function Eu(t){return t==null?ku:function(){return this.querySelectorAll(t)}}function Au(t){typeof t!="function"&&(t=Eu(t));for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o=e[a],l=o.length,c,f=0;f<l;++f)(c=o[f])&&(i.push(t.call(c,c.__data__,f,o)),r.push(c));return new Wt(i,r)}function Su(t){return function(){return this.matches(t)}}function $u(t){typeof t!="function"&&(t=Su(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,l=i[r]=[],c,f=0;f<o;++f)(c=a[f])&&t.call(c,c.__data__,f,a)&&l.push(c);return new Wt(i,this._parents)}function po(t){return new Array(t.length)}function Tu(){return new Wt(this._enter||this._groups.map(po),this._parents)}function Nn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Nn.prototype={constructor:Nn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ru(t){return function(){return t}}var $r="$";function Nu(t,e,n,i,r,a){for(var o=0,l,c=e.length,f=a.length;o<f;++o)(l=e[o])?(l.__data__=a[o],i[o]=l):n[o]=new Nn(t,a[o]);for(;o<c;++o)(l=e[o])&&(r[o]=l)}function Iu(t,e,n,i,r,a,o){var l,c,f={},u=e.length,m=a.length,g=new Array(u),p;for(l=0;l<u;++l)(c=e[l])&&(g[l]=p=$r+o.call(c,c.__data__,l,e),p in f?r[l]=c:f[p]=c);for(l=0;l<m;++l)p=$r+o.call(t,a[l],l,a),(c=f[p])?(i[l]=c,c.__data__=a[l],f[p]=null):n[l]=new Nn(t,a[l]);for(l=0;l<u;++l)(c=e[l])&&f[g[l]]===c&&(r[l]=c)}function Du(t,e){if(!t)return p=new Array(this.size()),f=-1,this.each(function(I){p[++f]=I}),p;var n=e?Iu:Nu,i=this._parents,r=this._groups;typeof t!="function"&&(t=Ru(t));for(var a=r.length,o=new Array(a),l=new Array(a),c=new Array(a),f=0;f<a;++f){var u=i[f],m=r[f],g=m.length,p=t.call(u,u&&u.__data__,f,i),A=p.length,U=l[f]=new Array(A),L=o[f]=new Array(A),D=c[f]=new Array(g);n(u,m,U,L,D,p,e);for(var E=0,k=0,y,R;E<A;++E)if(y=U[E]){for(E>=k&&(k=E+1);!(R=L[k])&&++k<A;);y._next=R||null}}return o=new Wt(o,i),o._enter=l,o._exit=c,o}function Mu(){return new Wt(this._exit||this._groups.map(po),this._parents)}function Ou(t,e,n){var i=this.enter(),r=this,a=this.exit();return i=typeof t=="function"?t(i):i.append(t+""),e!=null&&(r=e(r)),n==null?a.remove():n(a),i&&r?i.merge(r).order():r}function Lu(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),l=0;l<a;++l)for(var c=e[l],f=n[l],u=c.length,m=o[l]=new Array(u),g,p=0;p<u;++p)(g=c[p]||f[p])&&(m[p]=g);for(;l<i;++l)o[l]=e[l];return new Wt(o,this._parents)}function Fu(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,a=i[r],o;--r>=0;)(o=i[r])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function zu(t){t||(t=Bu);function e(m,g){return m&&g?t(m.__data__,g.__data__):!m-!g}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o=n[a],l=o.length,c=r[a]=new Array(l),f,u=0;u<l;++u)(f=o[u])&&(c[u]=f);c.sort(e)}return new Wt(r,this._parents).order()}function Bu(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Cu(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Hu(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function Vu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}function Uu(){var t=0;return this.each(function(){++t}),t}function Zu(){return!this.node()}function Pu(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,o=r.length,l;a<o;++a)(l=r[a])&&t.call(l,l.__data__,a,r);return this}function qu(t){return function(){this.removeAttribute(t)}}function Gu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wu(t,e){return function(){this.setAttribute(t,e)}}function Xu(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ku(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Yu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ju(t,e){var n=uo(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Gu:qu:typeof e=="function"?n.local?Yu:Ku:n.local?Xu:Wu)(n,e))}function go(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Qu(t){return function(){this.style.removeProperty(t)}}function ju(t,e,n){return function(){this.style.setProperty(t,e,n)}}function th(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function eh(t,e,n){return arguments.length>1?this.each((e==null?Qu:typeof e=="function"?th:ju)(t,e,n??"")):nh(this.node(),t)}function nh(t,e){return t.style.getPropertyValue(e)||go(t).getComputedStyle(t,null).getPropertyValue(e)}function ih(t){return function(){delete this[t]}}function rh(t,e){return function(){this[t]=e}}function ah(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function oh(t,e){return arguments.length>1?this.each((e==null?ih:typeof e=="function"?ah:rh)(t,e)):this.node()[t]}function mo(t){return t.trim().split(/^|\s+/)}function Wi(t){return t.classList||new vo(t)}function vo(t){this._node=t,this._names=mo(t.getAttribute("class")||"")}vo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function wo(t,e){for(var n=Wi(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function xo(t,e){for(var n=Wi(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function sh(t){return function(){wo(this,t)}}function lh(t){return function(){xo(this,t)}}function fh(t,e){return function(){(e.apply(this,arguments)?wo:xo)(this,t)}}function ch(t,e){var n=mo(t+"");if(arguments.length<2){for(var i=Wi(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?fh:e?sh:lh)(n,e))}function uh(){this.textContent=""}function hh(t){return function(){this.textContent=t}}function dh(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function _h(t){return arguments.length?this.each(t==null?uh:(typeof t=="function"?dh:hh)(t)):this.node().textContent}function ph(){this.innerHTML=""}function gh(t){return function(){this.innerHTML=t}}function mh(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function vh(t){return arguments.length?this.each(t==null?ph:(typeof t=="function"?mh:gh)(t)):this.node().innerHTML}function wh(){this.nextSibling&&this.parentNode.appendChild(this)}function xh(){return this.each(wh)}function yh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bh(){return this.each(yh)}function kh(t){var e=typeof t=="function"?t:ho(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Eh(){return null}function Ah(t,e){var n=typeof t=="function"?t:ho(t),i=e==null?Eh:typeof e=="function"?e:_o(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Sh(){var t=this.parentNode;t&&t.removeChild(this)}function $h(){return this.each(Sh)}function Th(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Rh(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Nh(t){return this.select(t?Rh:Th)}function Ih(t){return arguments.length?this.property("__data__",t):this.node().__data__}var yo={};if(typeof document<"u"){var Dh=document.documentElement;"onmouseenter"in Dh||(yo={mouseenter:"mouseover",mouseleave:"mouseout"})}function Mh(t,e,n){return t=bo(t,e,n),function(i){var r=i.relatedTarget;(!r||r!==this&&!(r.compareDocumentPosition(this)&8))&&t.call(this,i)}}function bo(t,e,n){return function(i){try{t.call(this,this.__data__,e,n)}finally{}}}function Oh(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Lh(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,a;n<r;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++i]=a;++i?e.length=i:delete this.__on}}}function Fh(t,e,n){var i=yo.hasOwnProperty(t.type)?Mh:bo;return function(r,a,o){var l=this.__on,c,f=i(e,a,o);if(l){for(var u=0,m=l.length;u<m;++u)if((c=l[u]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=f,c.capture=n),c.value=e;return}}this.addEventListener(t.type,f,n),c={type:t.type,name:t.name,value:e,listener:f,capture:n},l?l.push(c):this.__on=[c]}}function zh(t,e,n){var i=Oh(t+""),r,a=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,f=l.length,u;c<f;++c)for(r=0,u=l[c];r<a;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value}return}for(l=e?Fh:Lh,n==null&&(n=!1),r=0;r<a;++r)this.each(l(i[r],e,n));return this}function ko(t,e,n){var i=go(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Bh(t,e){return function(){return ko(this,t,e)}}function Ch(t,e){return function(){return ko(this,t,e.apply(this,arguments))}}function Hh(t,e){return this.each((typeof e=="function"?Ch:Bh)(t,e))}var Eo=[null];function Wt(t,e){this._groups=t,this._parents=e}function Ti(){return new Wt([[document.documentElement]],Eo)}Wt.prototype=Ti.prototype={constructor:Wt,select:bu,selectAll:Au,filter:$u,data:Du,enter:Tu,exit:Mu,join:Ou,merge:Lu,order:Fu,sort:zu,call:Cu,nodes:Hu,node:Vu,size:Uu,empty:Zu,each:Pu,attr:Ju,style:eh,property:oh,classed:ch,text:_h,html:vh,raise:xh,lower:bh,append:kh,insert:Ah,remove:$h,clone:Nh,datum:Ih,on:zh,dispatch:Hh};function Tr(t){return typeof t=="string"?new Wt([[document.querySelector(t)]],[document.documentElement]):new Wt([[t]],Eo)}function Vh(){var t=f,e=u,n=m,i=document.body,r=I(),a=null,o=null,l=null;function c(x){a=b(x),a&&(o=a.createSVGPoint(),i.appendChild(r))}c.show=function(){var x=Array.prototype.slice.call(arguments);x[x.length-1]instanceof SVGElement&&(l=x.pop());var q=n.apply(this,x),H=e.apply(this,x),J=t.apply(this,x),ft=z(),gt=p.length,K,Z=document.documentElement.scrollTop||i.scrollTop,V=document.documentElement.scrollLeft||i.scrollLeft;for(ft.html(q).style("opacity",1).style("pointer-events","all");gt--;)ft.classed(p[gt],!1);return K=g.get(J).apply(this),ft.classed(J,!0).style("top",K.top+H[0]+Z+"px").style("left",K.left+H[1]+V+"px"),c},c.hide=function(){var x=z();return x.style("opacity",0).style("pointer-events","none"),c},c.attr=function(x,q){if(arguments.length<2&&typeof x=="string")return z().attr(x);var H=Array.prototype.slice.call(arguments);return Ti.prototype.attr.apply(z(),H),c},c.style=function(x,q){if(arguments.length<2&&typeof x=="string")return z().style(x);var H=Array.prototype.slice.call(arguments);return Ti.prototype.style.apply(z(),H),c},c.direction=function(x){return arguments.length?(t=x==null?x:B(x),c):t},c.offset=function(x){return arguments.length?(e=x==null?x:B(x),c):e},c.html=function(x){return arguments.length?(n=x==null?x:B(x),c):n},c.rootElement=function(x){return arguments.length?(i=x==null?x:B(x),c):i},c.destroy=function(){return r&&(z().remove(),r=null),c};function f(){return"n"}function u(){return[0,0]}function m(){return" "}var g=Gi({n:A,s:U,e:L,w:D,nw:E,ne:k,sw:y,se:R}),p=g.keys();function A(){var x=F(this);return{top:x.n.y-r.offsetHeight,left:x.n.x-r.offsetWidth/2}}function U(){var x=F(this);return{top:x.s.y,left:x.s.x-r.offsetWidth/2}}function L(){var x=F(this);return{top:x.e.y-r.offsetHeight/2,left:x.e.x}}function D(){var x=F(this);return{top:x.w.y-r.offsetHeight/2,left:x.w.x-r.offsetWidth}}function E(){var x=F(this);return{top:x.nw.y-r.offsetHeight,left:x.nw.x-r.offsetWidth}}function k(){var x=F(this);return{top:x.ne.y-r.offsetHeight,left:x.ne.x}}function y(){var x=F(this);return{top:x.sw.y,left:x.sw.x-r.offsetWidth}}function R(){var x=F(this);return{top:x.se.y,left:x.se.x}}function I(){var x=Tr(document.createElement("div"));return x.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),x.node()}function b(x){var q=x.node();return q?q.tagName.toLowerCase()==="svg"?q:q.ownerSVGElement:null}function z(){return r==null&&(r=I(),i.appendChild(r)),Tr(r)}function F(x){for(var q=l||x;q.getScreenCTM==null&&q.parentNode!=null;)q=q.parentNode;var H={},J=q.getScreenCTM(),ft=q.getBBox(),gt=ft.width,K=ft.height,Z=ft.x,V=ft.y;return o.x=Z,o.y=V,H.nw=o.matrixTransform(J),o.x+=gt,H.ne=o.matrixTransform(J),o.y+=K,H.se=o.matrixTransform(J),o.x-=gt,H.sw=o.matrixTransform(J),o.y-=K/2,H.w=o.matrixTransform(J),o.x+=gt,H.e=o.matrixTransform(J),o.x-=gt/2,o.y-=K/2,H.n=o.matrixTransform(J),o.y+=K,H.s=o.matrixTransform(J),H}function B(x){return typeof x=="function"?x:function(){return x}}return c}class Uh{constructor({region:e,viewer:n,height:i,width:r,range:a}){this.variants=[],this.viewer=n,this.width=r,this.height=i,this.region=e,this.range=a}DrawTrack(){const e=this.viewer,n=this.variants,i=_e().domain([this.region.start,this.region.end+1]).range(this.range),r=io().type(no).size(20),a=Vh();a.attr("class","d3-tip").html(m=>`<table><th colspan="2">${"Case Variant".toUpperCase()}</th><tr><td>Position</td> <td>${m.position}</td></tr><tr><td>Mutation</td> <td>${m.ref} > ${m.mutant}</td></tr></table>`).offset([10,0]).direction("s"),e.call(a);const o=20,l=Fe(this.viewer),c=e.append("g").attr("transform",`translate(0,${l})`).attr("class","track");c.append("rect").attr("height",o).attr("width",-this.range[0]+this.range[1]).attr("fill-opacity",.1).attr("fill","rgb(148, 140, 140)").attr("stroke-width",0).attr("stroke-opacity",0).attr("transform",`translate(${this.range[0]},0)`),c.selectAll("path").data(n).enter().append("path").attr("d",r).attr("class","case-variant").attr("stroke","red").attr("fill","red").attr("transform",m=>`translate(${i(m.position)},10)`).on("mouseenter",a.show).on("mouseout",a.hide);const u=$t("#viewer2").append("g").attr("transform",`translate(25,${l})`).attr("class","track-label");u.append("line").attr("x1",75).attr("y1",0).attr("x2",75).attr("y2",o).attr("stroke-width",3).attr("stroke","#609C9C"),u.append("text").text(this.track.label.toUpperCase()).attr("y",12)}async getTrackData(){}}class Zh{constructor({viewer:e,track:n,height:i,width:r,region:a}){this.variants=[],this.region=a,this.viewer=e,this.width=r,this.height=i,this.track=n}DrawTrack(){const e=this.viewer,n=this.variants,i=_e().domain([this.region.start,this.region.end]).range(this.track.range),r=io().type(no).size(20),a=20,o=Fe(this.viewer),l=e.append("g").attr("transform",`translate(0,${o})`).attr("class","track");l.append("rect").attr("height",a).attr("width",-this.track.range[0]+this.track.range[1]).attr("fill-opacity",.1).attr("fill","rgb(148, 140, 140)").attr("stroke-width",0).attr("stroke-opacity",0),l.selectAll("path").data(n).enter().append("path").attr("d",r).attr("class","global-variant").attr("stroke","red").attr("fill","red").attr("transform",c=>`translate(${i(c.position)},10)`)}async getTrackData(){}}function Ao(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gn,Rr;function Ph(){if(Rr)return Gn;Rr=1;class t{constructor(n={}){if(!(n.maxSize&&n.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=n.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(n,i){this.cache.set(n,i),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(n){if(this.cache.has(n))return this.cache.get(n);if(this.oldCache.has(n)){const i=this.oldCache.get(n);return this.oldCache.delete(n),this._set(n,i),i}}set(n,i){return this.cache.has(n)?this.cache.set(n,i):this._set(n,i),this}has(n){return this.cache.has(n)||this.oldCache.has(n)}peek(n){if(this.cache.has(n))return this.cache.get(n);if(this.oldCache.has(n))return this.oldCache.get(n)}delete(n){const i=this.cache.delete(n);return i&&this._size--,this.oldCache.delete(n)||i}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[n]of this)yield n}*values(){for(const[,n]of this)yield n}*[Symbol.iterator](){for(const n of this.cache)yield n;for(const n of this.oldCache){const[i]=n;this.cache.has(i)||(yield n)}}get size(){let n=0;for(const i of this.oldCache.keys())this.cache.has(i)||n++;return this._size+n}}return Gn=t,Gn}var qh=Ph();const Xi=Ao(qh);class Gh{}class Wh{constructor(){this.signals=new Set,this.abortController=new AbortController}addSignal(e=new Gh){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):typeof e.addEventListener=="function"&&e.addEventListener("abort",()=>{this.handleAborted(e)})}handleAborted(e){this.signals.delete(e),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}class Xh{constructor(){this.callbacks=new Set}addCallback(e=()=>{}){this.callbacks.add(e),e(this.currentMessage)}callback(e){this.currentMessage=e;for(const n of this.callbacks)n(e)}}class ze{constructor({fill:e,cache:n}){if(typeof e!="function")throw new TypeError("must pass a fill function");if(typeof n!="object")throw new TypeError("must pass a cache object");if(typeof n.get!="function"||typeof n.set!="function"||typeof n.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=n,this.fillCallback=e}static isAbortException(e){return e.name==="AbortError"||e.code==="ERR_ABORTED"||e.message==="AbortError: aborted"||e.message==="Error: aborted"}evict(e,n){this.cache.get(e)===n&&this.cache.delete(e)}fill(e,n,i,r){const a=new Wh,o=new Xh;o.addCallback(r);const l={aborter:a,promise:this.fillCallback(n,a.signal,c=>{o.callback(c)}),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};l.aborter.addSignal(i),l.aborter.signal.addEventListener("abort",()=>{l.settled||this.evict(e,l)}),l.promise.then(()=>{l.settled=!0},()=>{l.settled=!0,this.evict(e,l)}).catch(c=>{throw console.error(c),c}),this.cache.set(e,l)}static checkSinglePromise(e,n){function i(){if(n!=null&&n.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then(r=>(i(),r),r=>{throw i(),r})}has(e){return this.cache.has(e)}get(e,n,i,r){if(!i&&n instanceof AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const a=this.cache.get(e);return a?a.aborted&&!a.settled?(this.evict(e,a),this.get(e,n,i,r)):a.settled?a.promise:(a.aborter.addSignal(i),a.statusReporter.addCallback(r),ze.checkSinglePromise(a.promise,i)):(this.fill(e,n,i,r),ze.checkSinglePromise(this.cache.get(e).promise,i))}delete(e){const n=this.cache.get(e);n&&(n.settled||n.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let n=0;for(let i=e.next();!i.done;i=e.next())this.delete(i.value),n+=1;return n}}var vn={exports:{}},Kh=vn.exports,Nr;function Yh(){return Nr||(Nr=1,function(t,e){(function(n,i){t.exports=i()})(Kh,function(){const n=/^[\w+.-]+:\/\//,i=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,r=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;function a(E){return n.test(E)}function o(E){return E.startsWith("//")}function l(E){return E.startsWith("/")}function c(E){return E.startsWith("file:")}function f(E){return/^[.?#]/.test(E)}function u(E){const k=i.exec(E);return g(k[1],k[2]||"",k[3],k[4]||"",k[5]||"/",k[6]||"",k[7]||"")}function m(E){const k=r.exec(E),y=k[2];return g("file:","",k[1]||"","",l(y)?y:"/"+y,k[3]||"",k[4]||"")}function g(E,k,y,R,I,b,z){return{scheme:E,user:k,host:y,port:R,path:I,query:b,hash:z,type:7}}function p(E){if(o(E)){const y=u("http:"+E);return y.scheme="",y.type=6,y}if(l(E)){const y=u("http://foo.com"+E);return y.scheme="",y.host="",y.type=5,y}if(c(E))return m(E);if(a(E))return u(E);const k=u("http://foo.com/"+E);return k.scheme="",k.host="",k.type=E?E.startsWith("?")?3:E.startsWith("#")?2:4:1,k}function A(E){if(E.endsWith("/.."))return E;const k=E.lastIndexOf("/");return E.slice(0,k+1)}function U(E,k){L(k,k.type),E.path==="/"?E.path=k.path:E.path=A(k.path)+E.path}function L(E,k){const y=k<=4,R=E.path.split("/");let I=1,b=0,z=!1;for(let B=1;B<R.length;B++){const x=R[B];if(!x){z=!0;continue}if(z=!1,x!=="."){if(x===".."){b?(z=!0,b--,I--):y&&(R[I++]=x);continue}R[I++]=x,b++}}let F="";for(let B=1;B<I;B++)F+="/"+R[B];(!F||z&&!F.endsWith("/.."))&&(F+="/"),E.path=F}function D(E,k){if(!E&&!k)return"";const y=p(E);let R=y.type;if(k&&R!==7){const b=p(k),z=b.type;switch(R){case 1:y.hash=b.hash;case 2:y.query=b.query;case 3:case 4:U(y,b);case 5:y.user=b.user,y.host=b.host,y.port=b.port;case 6:y.scheme=b.scheme}z>R&&(R=z)}L(y,R);const I=y.query+y.hash;switch(R){case 2:case 3:return I;case 4:{const b=y.path.slice(1);return b?f(k||E)&&!f(b)?"./"+b+I:b+I:I||"."}case 5:return y.path+I;default:return y.scheme+"//"+y.user+y.host+y.port+y.path+I}}return D})}(vn)),vn.exports}var Jh=Yh();const Qh=Ao(Jh);async function Ki(t,e,n={}){const{defaultContent:i={}}=n;try{const r=await e(t,{encoding:"utf8"}),a=new TextDecoder("utf8");return JSON.parse(a.decode(r))}catch(r){if(r.code==="ENOENT"||r.status===404||r.message.includes("404")||r.message.includes("ENOENT"))return i;throw r}}function Yi(t,e="."){return Qh(t,e)}class jh{constructor({readFile:e,cacheSize:n=100}){if(this.topList=[],this.chunkCache=new ze({cache:new Xi({maxSize:n}),fill:this.readChunkItems.bind(this)}),this.readFile=e,!this.readFile)throw new Error('must provide a "readFile" function')}importExisting(e,n,i,r,a){this.topList=e,this.attrs=n,this.start=n.makeFastGetter("Start"),this.end=n.makeFastGetter("End"),this.lazyClass=a,this.baseURL=i,this.lazyUrlTemplate=r}binarySearch(e,n,i){let r=-1,a=e.length,o;for(;a-r>1;)o=r+a>>>1,i(e[o])>=n?a=o:r=o;return i===this.end?a:r}readChunkItems(e){const n=Yi(this.lazyUrlTemplate.replaceAll(/\{Chunk\}/gi,e),this.baseURL);return Ki(n,this.readFile,{defaultContent:[]})}async*iterateSublist(e,n,i,r,a,o,l){const c=this.attrs.makeGetter("Chunk"),f=this.attrs.makeGetter("Sublist"),u=[];for(let m=this.binarySearch(e,n,a);m<e.length&&m>=0&&r*o(e[m])<r*i;m+=r){if(e[m][0]===this.lazyClass){const p=c(e[m]),A=this.chunkCache.get(p,p).then(U=>[U,p]);u.push(A)}else yield[e[m],l.concat(m)];const g=f(e[m]);g&&(yield*this.iterateSublist(g,n,i,r,a,o,l.concat(m)))}for(const m of u){const[g,p]=await m;g&&(yield*this.iterateSublist(g,n,i,r,a,o,[...l,p]))}}async*iterate(e,n){const i=e>n?-1:1,r=e>n?this.start:this.end,a=e>n?this.end:this.start;this.topList.length>0&&(yield*this.iterateSublist(this.topList,e,n,i,r,a,[0]))}async histogram(e,n,i){const r=new Array(i);r.fill(0);const a=(n-e)/i;for await(const o of this.iterate(e,n)){const l=Math.max(0,(this.start(o)-e)/a|0),c=Math.min(i,(this.end(o)-e)/a|0);for(let f=l;f<=c;f+=1)r[f]+=1}return r}}class t0{constructor(e){this.classes=e,this.fields=[];for(let n=0;n<e.length;n+=1){this.fields[n]={};for(let i=0;i<e[n].attributes.length;i+=1)this.fields[n][e[n].attributes[i]]=i+1;e[n].proto===void 0&&(e[n].proto={}),e[n].isArrayAttr===void 0&&(e[n].isArrayAttr={})}}attrIndices(e){return this.classes.map(n=>n.attributes.indexOf(e)+1||n.attributes.indexOf(e.toLowerCase())+1||void 0)}get(e,n){if(n in this.fields[e[0]])return e[this.fields[e[0]][n]];const i=n.toLowerCase();if(i in this.fields[e[0]])return e[this.fields[e[0]][i]];const r=this.classes[e[0]].attributes.length+1;return r>=e.length||!(n in e[r])?n in this.classes[e[0]].proto?this.classes[e[0]].proto[n]:void 0:e[r][n]}makeSetter(e){return(n,i)=>{this.set(n,e,i)}}makeGetter(e){return n=>this.get(n,e)}makeFastGetter(e){const n=this.attrIndices(e);return function(r){if(n[r[0]]!==void 0)return r[n[r[0]]]}}accessors(){return this._accessors||(this._accessors=this._makeAccessors()),this._accessors}_makeAccessors(){const e={},n={get(r){const a=this.get.field_accessors[r.toLowerCase()];if(a)return a.call(this)},set(r,a){const o=this.set.field_accessors[r];if(o)return o.call(this,a)},tags(){return i[this[0]]||[]}};n.get.field_accessors={},n.set.field_accessors={},this.classes.forEach((r,a)=>{(r.attributes||[]).forEach((o,l)=>{e[o]=e[o]||[],e[o][a]=l+1,o=o.toLowerCase(),e[o]=e[o]||[],e[o][a]=l+1})});const i=this.classes.map(r=>r.attributes);return Object.keys(e).forEach(r=>{const a=e[r];n.get.field_accessors[r]=a?function(){return this[a[this[0]]]}:function(){}}),n}}class e0{constructor({urlTemplate:e,chunkSize:n,length:i,cacheSize:r=100,readFile:a},o){if(this.urlTemplate=e,this.chunkSize=n,this.length=i,this.baseUrl=o===void 0?"":o,this.readFile=a,!a)throw new Error("must provide readFile callback");this.chunkCache=new ze({cache:new Xi({maxSize:r}),fill:this.getChunk.bind(this)})}index(e,n,i){this.range(e,e,n,void 0,i)}async*range(e,n){e=Math.max(0,e),n=Math.min(n,this.length-1);const i=Math.floor(e/this.chunkSize),r=Math.floor(n/this.chunkSize),a=[];for(let o=i;o<=r;o+=1)a.push(this.chunkCache.get(o,o));for(const o of a){const[l,c]=await o;yield*this.filterChunkData(e,n,l,c)}}async getChunk(e){let n=this.urlTemplate.replaceAll(/\{Chunk\}/gi,e);this.baseUrl&&(n=Yi(n,this.baseUrl));const i=await Ki(n,this.readFile);return[e,i]}*filterChunkData(e,n,i,r){const a=i*this.chunkSize,o=Math.max(0,e-a),l=Math.min(n-a,this.chunkSize-1);for(let c=o;c<=l;c+=1)yield[c+a,r[c]]}}function n0(){return this._uniqueID}function i0(){return this._parent}function r0(){return this.get("subfeatures")}class a0{constructor({baseUrl:e,urlTemplate:n,readFile:i,cacheSize:r=10}){if(this.baseUrl=e,this.urlTemplates={root:n},this.readFile=i,!this.readFile)throw new Error('must provide a "readFile" function argument');this.dataRootCache=new ze({cache:new Xi({maxSize:r}),fill:this.fetchDataRoot.bind(this)})}makeNCList(){return new jh({readFile:this.readFile})}loadNCList(e,n,i){e.nclist.importExisting(n.intervals.nclist,e.attrs,i,n.intervals.urlTemplate,n.intervals.lazyClass)}getDataRoot(e){return this.dataRootCache.get(e,e)}fetchDataRoot(e){const n=Yi(this.urlTemplates.root.replaceAll(/{\s*refseq\s*}/g,e),this.baseUrl);return Ki(n,this.readFile).then(i=>this.parseTrackInfo(i,n))}parseTrackInfo(e,n){const i={nclist:this.makeNCList(),stats:{featureCount:e.featureCount||0}};e.intervals&&(i.attrs=new t0(e.intervals.classes),this.loadNCList(i,e,n));const{histograms:r}=e;if(r!=null&&r.meta){for(let a=0;a<r.meta.length;a+=1)r.meta[a].lazyArray=new e0({...r.meta[a].arrayParams,readFile:this.readFile},n);i._histograms=r}return i._histograms&&Object.keys(i._histograms).forEach(a=>{i._histograms[a].forEach(l=>{Object.keys(l).forEach(c=>{typeof l[c]=="string"&&String(Number(l[c]))===l[c]&&(l[c]=Number(l[c]))})})}),i}async getRegionStats(e){return(await this.getDataRoot(e.ref)).stats}async getRegionFeatureDensities({refName:e,start:n,end:i,numBins:r,basesPerBin:a}){const o=await this.getDataRoot(e);if(r)a=(i-n)/r;else if(a)r=Math.ceil((i-n)/a);else throw new TypeError("numBins or basesPerBin arg required for getRegionFeatureDensities");const c=(o._histograms.stats||[]).find(g=>g.basesPerBin>=a);let f=o._histograms.meta[0];for(let g=0;g<o._histograms.meta.length;g+=1)a>=o._histograms.meta[g].basesPerBin&&(f=o._histograms.meta[g]);let u=a/f.basesPerBin;if(u>.9&&Math.abs(u-Math.round(u))<1e-4){const g=Math.floor(n/f.basesPerBin);u=Math.round(u);const p=[];for(let A=0;A<r;A+=1)p[A]=0;for await(const[A,U]of f.lazyArray.range(g,g+u*r-1))p[Math.floor((A-g)/u)]+=U;return{bins:p,stats:c}}return{bins:await o.nclist.histogram(n,i,r),stats:c}}async*getFeatures({refName:e,start:n,end:i}){var o;const r=await this.getDataRoot(e),a=(o=r.attrs)==null?void 0:o.accessors();for await(const[l,c]of r.nclist.iterate(n,i)){if(!l.decorated){const f=c.join(",");this.decorateFeature(a,l,`${e},${f}`)}yield l}}decorateFeature(e,n,i,r){n.get=e.get,n.tags=e.tags,n._uniqueID=i,n.id=n0,n._parent=r,n.parent=i0,n.children=r0,(n.get("subfeatures")||[]).forEach((a,o)=>{this.decorateFeature(e,a,`${i}-${o}`,n)}),n.decorated=!0}}function Be(t){let e=t.length;for(;--e>=0;)t[e]=0}const o0=3,s0=258,So=29,l0=256,f0=l0+1+So,$o=30,c0=512,u0=new Array((f0+2)*2);Be(u0);const h0=new Array($o*2);Be(h0);const d0=new Array(c0);Be(d0);const _0=new Array(s0-o0+1);Be(_0);const p0=new Array(So);Be(p0);const g0=new Array($o);Be(g0);const m0=(t,e,n,i)=>{let r=t&65535|0,a=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+e[i++]|0,a=a+r|0;while(--o);r%=65521,a%=65521}return r|a<<16|0};var Ri=m0;const v0=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},w0=new Uint32Array(v0()),x0=(t,e,n,i)=>{const r=w0,a=i+n;t^=-1;for(let o=i;o<a;o++)t=t>>>8^r[(t^e[o])&255];return t^-1};var re=x0,Ni={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},To={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const y0=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var b0=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)y0(n,i)&&(t[i]=n[i])}}return t},k0=t=>{let e=0;for(let i=0,r=t.length;i<r;i++)e+=t[i].length;const n=new Uint8Array(e);for(let i=0,r=0,a=t.length;i<a;i++){let o=t[i];n.set(o,r),r+=o.length}return n},Ro={assign:b0,flattenChunks:k0};let No=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{No=!1}const Xe=new Uint8Array(256);for(let t=0;t<256;t++)Xe[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Xe[254]=Xe[254]=1;var E0=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,i,r,a,o=t.length,l=0;for(r=0;r<o;r++)n=t.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=t.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(l),a=0,r=0;a<l;r++)n=t.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=t.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|n&63):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|n&63):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|n&63);return e};const A0=(t,e)=>{if(e<65534&&t.subarray&&No)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n};var S0=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let i,r;const a=new Array(n*2);for(r=0,i=0;i<n;){let o=t[i++];if(o<128){a[r++]=o;continue}let l=Xe[o];if(l>4){a[r++]=65533,i+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&i<n;)o=o<<6|t[i++]&63,l--;if(l>1){a[r++]=65533;continue}o<65536?a[r++]=o:(o-=65536,a[r++]=55296|o>>10&1023,a[r++]=56320|o&1023)}return A0(a,r)},$0=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Xe[t[n]]>e?n:e},Ii={string2buf:E0,buf2string:S0,utf8border:$0};function T0(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var R0=T0;const ln=16209,N0=16191;var I0=function(e,n){let i,r,a,o,l,c,f,u,m,g,p,A,U,L,D,E,k,y,R,I,b,z,F,B;const x=e.state;i=e.next_in,F=e.input,r=i+(e.avail_in-5),a=e.next_out,B=e.output,o=a-(n-e.avail_out),l=a+(e.avail_out-257),c=x.dmax,f=x.wsize,u=x.whave,m=x.wnext,g=x.window,p=x.hold,A=x.bits,U=x.lencode,L=x.distcode,D=(1<<x.lenbits)-1,E=(1<<x.distbits)-1;t:do{A<15&&(p+=F[i++]<<A,A+=8,p+=F[i++]<<A,A+=8),k=U[p&D];e:for(;;){if(y=k>>>24,p>>>=y,A-=y,y=k>>>16&255,y===0)B[a++]=k&65535;else if(y&16){R=k&65535,y&=15,y&&(A<y&&(p+=F[i++]<<A,A+=8),R+=p&(1<<y)-1,p>>>=y,A-=y),A<15&&(p+=F[i++]<<A,A+=8,p+=F[i++]<<A,A+=8),k=L[p&E];n:for(;;){if(y=k>>>24,p>>>=y,A-=y,y=k>>>16&255,y&16){if(I=k&65535,y&=15,A<y&&(p+=F[i++]<<A,A+=8,A<y&&(p+=F[i++]<<A,A+=8)),I+=p&(1<<y)-1,I>c){e.msg="invalid distance too far back",x.mode=ln;break t}if(p>>>=y,A-=y,y=a-o,I>y){if(y=I-y,y>u&&x.sane){e.msg="invalid distance too far back",x.mode=ln;break t}if(b=0,z=g,m===0){if(b+=f-y,y<R){R-=y;do B[a++]=g[b++];while(--y);b=a-I,z=B}}else if(m<y){if(b+=f+m-y,y-=m,y<R){R-=y;do B[a++]=g[b++];while(--y);if(b=0,m<R){y=m,R-=y;do B[a++]=g[b++];while(--y);b=a-I,z=B}}}else if(b+=m-y,y<R){R-=y;do B[a++]=g[b++];while(--y);b=a-I,z=B}for(;R>2;)B[a++]=z[b++],B[a++]=z[b++],B[a++]=z[b++],R-=3;R&&(B[a++]=z[b++],R>1&&(B[a++]=z[b++]))}else{b=a-I;do B[a++]=B[b++],B[a++]=B[b++],B[a++]=B[b++],R-=3;while(R>2);R&&(B[a++]=B[b++],R>1&&(B[a++]=B[b++]))}}else if(y&64){e.msg="invalid distance code",x.mode=ln;break t}else{k=L[(k&65535)+(p&(1<<y)-1)];continue n}break}}else if(y&64)if(y&32){x.mode=N0;break t}else{e.msg="invalid literal/length code",x.mode=ln;break t}else{k=U[(k&65535)+(p&(1<<y)-1)];continue e}break}}while(i<r&&a<l);R=A>>3,i-=R,A-=R<<3,p&=(1<<A)-1,e.next_in=i,e.next_out=a,e.avail_in=i<r?5+(r-i):5-(i-r),e.avail_out=a<l?257+(l-a):257-(a-l),x.hold=p,x.bits=A};const Te=15,Ir=852,Dr=592,Mr=0,Wn=1,Or=2,D0=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),M0=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),O0=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),L0=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),F0=(t,e,n,i,r,a,o,l)=>{const c=l.bits;let f=0,u=0,m=0,g=0,p=0,A=0,U=0,L=0,D=0,E=0,k,y,R,I,b,z=null,F;const B=new Uint16Array(Te+1),x=new Uint16Array(Te+1);let q=null,H,J,ft;for(f=0;f<=Te;f++)B[f]=0;for(u=0;u<i;u++)B[e[n+u]]++;for(p=c,g=Te;g>=1&&B[g]===0;g--);if(p>g&&(p=g),g===0)return r[a++]=1<<24|64<<16|0,r[a++]=1<<24|64<<16|0,l.bits=1,0;for(m=1;m<g&&B[m]===0;m++);for(p<m&&(p=m),L=1,f=1;f<=Te;f++)if(L<<=1,L-=B[f],L<0)return-1;if(L>0&&(t===Mr||g!==1))return-1;for(x[1]=0,f=1;f<Te;f++)x[f+1]=x[f]+B[f];for(u=0;u<i;u++)e[n+u]!==0&&(o[x[e[n+u]]++]=u);if(t===Mr?(z=q=o,F=20):t===Wn?(z=D0,q=M0,F=257):(z=O0,q=L0,F=0),E=0,u=0,f=m,b=a,A=p,U=0,R=-1,D=1<<p,I=D-1,t===Wn&&D>Ir||t===Or&&D>Dr)return 1;for(;;){H=f-U,o[u]+1<F?(J=0,ft=o[u]):o[u]>=F?(J=q[o[u]-F],ft=z[o[u]-F]):(J=96,ft=0),k=1<<f-U,y=1<<A,m=y;do y-=k,r[b+(E>>U)+y]=H<<24|J<<16|ft|0;while(y!==0);for(k=1<<f-1;E&k;)k>>=1;if(k!==0?(E&=k-1,E+=k):E=0,u++,--B[f]===0){if(f===g)break;f=e[n+o[u]]}if(f>p&&(E&I)!==R){for(U===0&&(U=p),b+=m,A=f-U,L=1<<A;A+U<g&&(L-=B[A+U],!(L<=0));)A++,L<<=1;if(D+=1<<A,t===Wn&&D>Ir||t===Or&&D>Dr)return 1;R=E&I,r[R]=p<<24|A<<16|b-a|0}}return E!==0&&(r[b+E]=f-U<<24|64<<16|0),l.bits=p,0};var Ze=F0;const z0=0,Io=1,Do=2,{Z_FINISH:Lr,Z_BLOCK:B0,Z_TREES:fn,Z_OK:Ae,Z_STREAM_END:C0,Z_NEED_DICT:H0,Z_STREAM_ERROR:Jt,Z_DATA_ERROR:Mo,Z_MEM_ERROR:Oo,Z_BUF_ERROR:V0,Z_DEFLATED:Fr}=To,Cn=16180,zr=16181,Br=16182,Cr=16183,Hr=16184,Vr=16185,Ur=16186,Zr=16187,Pr=16188,qr=16189,In=16190,ce=16191,Xn=16192,Gr=16193,Kn=16194,Wr=16195,Xr=16196,Kr=16197,Yr=16198,cn=16199,un=16200,Jr=16201,Qr=16202,jr=16203,ta=16204,ea=16205,Yn=16206,na=16207,ia=16208,It=16209,Lo=16210,Fo=16211,U0=852,Z0=592,P0=15,q0=P0,ra=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function G0(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const $e=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Cn||e.mode>Fo?1:0},zo=t=>{if($e(t))return Jt;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Cn,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(U0),e.distcode=e.distdyn=new Int32Array(Z0),e.sane=1,e.back=-1,Ae},Bo=t=>{if($e(t))return Jt;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,zo(t)},Co=(t,e)=>{let n;if($e(t))return Jt;const i=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Jt:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,Bo(t))},Ho=(t,e)=>{if(!t)return Jt;const n=new G0;t.state=n,n.strm=t,n.window=null,n.mode=Cn;const i=Co(t,e);return i!==Ae&&(t.state=null),i},W0=t=>Ho(t,q0);let aa=!0,Jn,Qn;const X0=t=>{if(aa){Jn=new Int32Array(512),Qn=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ze(Io,t.lens,0,288,Jn,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ze(Do,t.lens,0,32,Qn,0,t.work,{bits:5}),aa=!1}t.lencode=Jn,t.lenbits=9,t.distcode=Qn,t.distbits=5},Vo=(t,e,n,i)=>{let r;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),a.window.set(e.subarray(n-i,n-i+r),a.wnext),i-=r,i?(a.window.set(e.subarray(n-i,n),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0},K0=(t,e)=>{let n,i,r,a,o,l,c,f,u,m,g,p,A,U,L=0,D,E,k,y,R,I,b,z;const F=new Uint8Array(4);let B,x;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if($e(t)||!t.output||!t.input&&t.avail_in!==0)return Jt;n=t.state,n.mode===ce&&(n.mode=Xn),o=t.next_out,r=t.output,c=t.avail_out,a=t.next_in,i=t.input,l=t.avail_in,f=n.hold,u=n.bits,m=l,g=c,z=Ae;t:for(;;)switch(n.mode){case Cn:if(n.wrap===0){n.mode=Xn;break}for(;u<16;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}if(n.wrap&2&&f===35615){n.wbits===0&&(n.wbits=15),n.check=0,F[0]=f&255,F[1]=f>>>8&255,n.check=re(n.check,F,2,0),f=0,u=0,n.mode=zr;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((f&255)<<8)+(f>>8))%31){t.msg="incorrect header check",n.mode=It;break}if((f&15)!==Fr){t.msg="unknown compression method",n.mode=It;break}if(f>>>=4,u-=4,b=(f&15)+8,n.wbits===0&&(n.wbits=b),b>15||b>n.wbits){t.msg="invalid window size",n.mode=It;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=f&512?qr:ce,f=0,u=0;break;case zr:for(;u<16;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}if(n.flags=f,(n.flags&255)!==Fr){t.msg="unknown compression method",n.mode=It;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=It;break}n.head&&(n.head.text=f>>8&1),n.flags&512&&n.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,n.check=re(n.check,F,2,0)),f=0,u=0,n.mode=Br;case Br:for(;u<32;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}n.head&&(n.head.time=f),n.flags&512&&n.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,F[2]=f>>>16&255,F[3]=f>>>24&255,n.check=re(n.check,F,4,0)),f=0,u=0,n.mode=Cr;case Cr:for(;u<16;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}n.head&&(n.head.xflags=f&255,n.head.os=f>>8),n.flags&512&&n.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,n.check=re(n.check,F,2,0)),f=0,u=0,n.mode=Hr;case Hr:if(n.flags&1024){for(;u<16;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}n.length=f,n.head&&(n.head.extra_len=f),n.flags&512&&n.wrap&4&&(F[0]=f&255,F[1]=f>>>8&255,n.check=re(n.check,F,2,0)),f=0,u=0}else n.head&&(n.head.extra=null);n.mode=Vr;case Vr:if(n.flags&1024&&(p=n.length,p>l&&(p=l),p&&(n.head&&(b=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(a,a+p),b)),n.flags&512&&n.wrap&4&&(n.check=re(n.check,i,p,a)),l-=p,a+=p,n.length-=p),n.length))break t;n.length=0,n.mode=Ur;case Ur:if(n.flags&2048){if(l===0)break t;p=0;do b=i[a+p++],n.head&&b&&n.length<65536&&(n.head.name+=String.fromCharCode(b));while(b&&p<l);if(n.flags&512&&n.wrap&4&&(n.check=re(n.check,i,p,a)),l-=p,a+=p,b)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=Zr;case Zr:if(n.flags&4096){if(l===0)break t;p=0;do b=i[a+p++],n.head&&b&&n.length<65536&&(n.head.comment+=String.fromCharCode(b));while(b&&p<l);if(n.flags&512&&n.wrap&4&&(n.check=re(n.check,i,p,a)),l-=p,a+=p,b)break t}else n.head&&(n.head.comment=null);n.mode=Pr;case Pr:if(n.flags&512){for(;u<16;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}if(n.wrap&4&&f!==(n.check&65535)){t.msg="header crc mismatch",n.mode=It;break}f=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=ce;break;case qr:for(;u<32;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}t.adler=n.check=ra(f),f=0,u=0,n.mode=In;case In:if(n.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=a,t.avail_in=l,n.hold=f,n.bits=u,H0;t.adler=n.check=1,n.mode=ce;case ce:if(e===B0||e===fn)break t;case Xn:if(n.last){f>>>=u&7,u-=u&7,n.mode=Yn;break}for(;u<3;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}switch(n.last=f&1,f>>>=1,u-=1,f&3){case 0:n.mode=Gr;break;case 1:if(X0(n),n.mode=cn,e===fn){f>>>=2,u-=2;break t}break;case 2:n.mode=Xr;break;case 3:t.msg="invalid block type",n.mode=It}f>>>=2,u-=2;break;case Gr:for(f>>>=u&7,u-=u&7;u<32;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}if((f&65535)!==(f>>>16^65535)){t.msg="invalid stored block lengths",n.mode=It;break}if(n.length=f&65535,f=0,u=0,n.mode=Kn,e===fn)break t;case Kn:n.mode=Wr;case Wr:if(p=n.length,p){if(p>l&&(p=l),p>c&&(p=c),p===0)break t;r.set(i.subarray(a,a+p),o),l-=p,a+=p,c-=p,o+=p,n.length-=p;break}n.mode=ce;break;case Xr:for(;u<14;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}if(n.nlen=(f&31)+257,f>>>=5,u-=5,n.ndist=(f&31)+1,f>>>=5,u-=5,n.ncode=(f&15)+4,f>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=It;break}n.have=0,n.mode=Kr;case Kr:for(;n.have<n.ncode;){for(;u<3;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}n.lens[q[n.have++]]=f&7,f>>>=3,u-=3}for(;n.have<19;)n.lens[q[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},z=Ze(z0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,z){t.msg="invalid code lengths set",n.mode=It;break}n.have=0,n.mode=Yr;case Yr:for(;n.have<n.nlen+n.ndist;){for(;L=n.lencode[f&(1<<n.lenbits)-1],D=L>>>24,E=L>>>16&255,k=L&65535,!(D<=u);){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}if(k<16)f>>>=D,u-=D,n.lens[n.have++]=k;else{if(k===16){for(x=D+2;u<x;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}if(f>>>=D,u-=D,n.have===0){t.msg="invalid bit length repeat",n.mode=It;break}b=n.lens[n.have-1],p=3+(f&3),f>>>=2,u-=2}else if(k===17){for(x=D+3;u<x;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}f>>>=D,u-=D,b=0,p=3+(f&7),f>>>=3,u-=3}else{for(x=D+7;u<x;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}f>>>=D,u-=D,b=0,p=11+(f&127),f>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=It;break}for(;p--;)n.lens[n.have++]=b}}if(n.mode===It)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=It;break}if(n.lenbits=9,B={bits:n.lenbits},z=Ze(Io,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,z){t.msg="invalid literal/lengths set",n.mode=It;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},z=Ze(Do,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,z){t.msg="invalid distances set",n.mode=It;break}if(n.mode=cn,e===fn)break t;case cn:n.mode=un;case un:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=a,t.avail_in=l,n.hold=f,n.bits=u,I0(t,g),o=t.next_out,r=t.output,c=t.avail_out,a=t.next_in,i=t.input,l=t.avail_in,f=n.hold,u=n.bits,n.mode===ce&&(n.back=-1);break}for(n.back=0;L=n.lencode[f&(1<<n.lenbits)-1],D=L>>>24,E=L>>>16&255,k=L&65535,!(D<=u);){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}if(E&&!(E&240)){for(y=D,R=E,I=k;L=n.lencode[I+((f&(1<<y+R)-1)>>y)],D=L>>>24,E=L>>>16&255,k=L&65535,!(y+D<=u);){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}f>>>=y,u-=y,n.back+=y}if(f>>>=D,u-=D,n.back+=D,n.length=k,E===0){n.mode=ea;break}if(E&32){n.back=-1,n.mode=ce;break}if(E&64){t.msg="invalid literal/length code",n.mode=It;break}n.extra=E&15,n.mode=Jr;case Jr:if(n.extra){for(x=n.extra;u<x;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Qr;case Qr:for(;L=n.distcode[f&(1<<n.distbits)-1],D=L>>>24,E=L>>>16&255,k=L&65535,!(D<=u);){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}if(!(E&240)){for(y=D,R=E,I=k;L=n.distcode[I+((f&(1<<y+R)-1)>>y)],D=L>>>24,E=L>>>16&255,k=L&65535,!(y+D<=u);){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}f>>>=y,u-=y,n.back+=y}if(f>>>=D,u-=D,n.back+=D,E&64){t.msg="invalid distance code",n.mode=It;break}n.offset=k,n.extra=E&15,n.mode=jr;case jr:if(n.extra){for(x=n.extra;u<x;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=It;break}n.mode=ta;case ta:if(c===0)break t;if(p=g-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=It;break}p>n.wnext?(p-=n.wnext,A=n.wsize-p):A=n.wnext-p,p>n.length&&(p=n.length),U=n.window}else U=r,A=o-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do r[o++]=U[A++];while(--p);n.length===0&&(n.mode=un);break;case ea:if(c===0)break t;r[o++]=n.length,c--,n.mode=un;break;case Yn:if(n.wrap){for(;u<32;){if(l===0)break t;l--,f|=i[a++]<<u,u+=8}if(g-=c,t.total_out+=g,n.total+=g,n.wrap&4&&g&&(t.adler=n.check=n.flags?re(n.check,r,g,o-g):Ri(n.check,r,g,o-g)),g=c,n.wrap&4&&(n.flags?f:ra(f))!==n.check){t.msg="incorrect data check",n.mode=It;break}f=0,u=0}n.mode=na;case na:if(n.wrap&&n.flags){for(;u<32;){if(l===0)break t;l--,f+=i[a++]<<u,u+=8}if(n.wrap&4&&f!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=It;break}f=0,u=0}n.mode=ia;case ia:z=C0;break t;case It:z=Mo;break t;case Lo:return Oo;case Fo:default:return Jt}return t.next_out=o,t.avail_out=c,t.next_in=a,t.avail_in=l,n.hold=f,n.bits=u,(n.wsize||g!==t.avail_out&&n.mode<It&&(n.mode<Yn||e!==Lr))&&Vo(t,t.output,t.next_out,g-t.avail_out),m-=t.avail_in,g-=t.avail_out,t.total_in+=m,t.total_out+=g,n.total+=g,n.wrap&4&&g&&(t.adler=n.check=n.flags?re(n.check,r,g,t.next_out-g):Ri(n.check,r,g,t.next_out-g)),t.data_type=n.bits+(n.last?64:0)+(n.mode===ce?128:0)+(n.mode===cn||n.mode===Kn?256:0),(m===0&&g===0||e===Lr)&&z===Ae&&(z=V0),z},Y0=t=>{if($e(t))return Jt;let e=t.state;return e.window&&(e.window=null),t.state=null,Ae},J0=(t,e)=>{if($e(t))return Jt;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,Ae):Jt},Q0=(t,e)=>{const n=e.length;let i,r,a;return $e(t)||(i=t.state,i.wrap!==0&&i.mode!==In)?Jt:i.mode===In&&(r=1,r=Ri(r,e,n,0),r!==i.check)?Mo:(a=Vo(t,e,n,n),a?(i.mode=Lo,Oo):(i.havedict=1,Ae))};var j0=Bo,td=Co,ed=zo,nd=W0,id=Ho,rd=K0,ad=Y0,od=J0,sd=Q0,ld="pako inflate (from Nodeca project)",ue={inflateReset:j0,inflateReset2:td,inflateResetKeep:ed,inflateInit:nd,inflateInit2:id,inflate:rd,inflateEnd:ad,inflateGetHeader:od,inflateSetDictionary:sd,inflateInfo:ld};function fd(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var cd=fd;const Uo=Object.prototype.toString,{Z_NO_FLUSH:ud,Z_FINISH:hd,Z_OK:Ke,Z_STREAM_END:jn,Z_NEED_DICT:ti,Z_STREAM_ERROR:dd,Z_DATA_ERROR:oa,Z_MEM_ERROR:_d}=To;function Hn(t){this.options=Ro.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new R0,this.strm.avail_out=0;let n=ue.inflateInit2(this.strm,e.windowBits);if(n!==Ke)throw new Error(Ni[n]);if(this.header=new cd,ue.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Ii.string2buf(e.dictionary):Uo.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=ue.inflateSetDictionary(this.strm,e.dictionary),n!==Ke)))throw new Error(Ni[n])}Hn.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let a,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?hd:ud,Uo.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),a=ue.inflate(n,o),a===ti&&r&&(a=ue.inflateSetDictionary(n,r),a===Ke?a=ue.inflate(n,o):a===oa&&(a=ti));n.avail_in>0&&a===jn&&n.state.wrap>0&&t[n.next_in]!==0;)ue.inflateReset(n),a=ue.inflate(n,o);switch(a){case dd:case oa:case ti:case _d:return this.onEnd(a),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||a===jn))if(this.options.to==="string"){let c=Ii.utf8border(n.output,n.next_out),f=n.next_out-c,u=Ii.buf2string(n.output,c);n.next_out=f,n.avail_out=i-f,f&&n.output.set(n.output.subarray(c,c+f),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===Ke&&l===0)){if(a===jn)return a=ue.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Hn.prototype.onData=function(t){this.chunks.push(t)};Hn.prototype.onEnd=function(t){t===Ke&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ro.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function pd(t,e){const n=new Hn(e);if(n.push(t),n.err)throw n.msg||Ni[n.err];return n.result}var gd=pd,md={inflate:gd};const{inflate:vd}=md;var wd=vd;const xd={refName:"seq_id"},yd={seq_id:"refName"};class Dn{constructor(e,n,i){this.ncFeature=e,this.uniqueId=i||e.id(),this.parentHandle=n}jb2TagToJb1Tag(e){return(xd[e]||e).toLowerCase()}jb1TagToJb2Tag(e){const n=e.toLowerCase();return yd[n]||n}get(e){const n=this.ncFeature.get(this.jb2TagToJb1Tag(e));return n&&e==="subfeatures"?n.map(i=>new Dn(i,this)):n}tags(){return this.ncFeature.tags().map(e=>this.jb1TagToJb2Tag(e))}id(){return this.uniqueId}parent(){return this.parentHandle}children(){return this.get("subfeatures")}toJSON(){const e={uniqueId:this.id(),subfeatures:[]};return this.ncFeature.tags().forEach(n=>{const i=this.jb1TagToJb2Tag(n),r=this.ncFeature.get(n);i==="subfeatures"?e.children=(r||[]).map(a=>new Dn(a,this).toJSON()):e[i]=r}),{...e,fmin:e.start,fmax:e.end,seqId:e.refName}}}function bd(t){return t[0]===31&&t[1]===139&&t[2]===8}async function kd(t){const e=await fetch(t);if(!e.ok)throw new Error(`HTTP ${e.status} fetching ${t}`);const n=await e.arrayBuffer();return bd(new Uint8Array(n))?wd(n):n}async function Ed({urlTemplate:t,baseUrl:e,region:n}){const i=new a0({urlTemplate:t,baseUrl:e,readFile:kd}),r=[];for await(const a of i.getFeatures({refName:n.chromosome,start:n.start,end:n.end}))r.push(new Dn(a).toJSON());return r}async function Mn({region:t,baseUrl:e,genome:n,track:i,extra:r=".json?ignoreCache=true&flatten=false"}){const a=`${t.chromosome}:${t.start}..${t.end}`,o=`${e}/${encodeURI(n)}/${encodeURI(i)}/${encodeURIComponent(a)}${r}`,l=await fetch(o);if(!l.ok)throw new Error(`HTTP ${l.status} fetching ${o}`);return l.json()}var ei={},sa;function pe(){return sa||(sa=1,function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(a,o){return Object.prototype.hasOwnProperty.call(a,o)}t.assign=function(a){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var l=o.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)n(l,c)&&(a[c]=l[c])}}return a},t.shrinkBuf=function(a,o){return a.length===o?a:a.subarray?a.subarray(0,o):(a.length=o,a)};var i={arraySet:function(a,o,l,c,f){if(o.subarray&&a.subarray){a.set(o.subarray(l,l+c),f);return}for(var u=0;u<c;u++)a[f+u]=o[l+u]},flattenChunks:function(a){var o,l,c,f,u,m;for(c=0,o=0,l=a.length;o<l;o++)c+=a[o].length;for(m=new Uint8Array(c),f=0,o=0,l=a.length;o<l;o++)u=a[o],m.set(u,f),f+=u.length;return m}},r={arraySet:function(a,o,l,c,f){for(var u=0;u<c;u++)a[f+u]=o[l+u]},flattenChunks:function(a){return[].concat.apply([],a)}};t.setTyped=function(a){a?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(e)}(ei)),ei}var Re={},Qt={},me={},la;function Ad(){if(la)return me;la=1;var t=pe(),e=4,n=0,i=1,r=2;function a(_){for(var O=_.length;--O>=0;)_[O]=0}var o=0,l=1,c=2,f=3,u=258,m=29,g=256,p=g+1+m,A=30,U=19,L=2*p+1,D=15,E=16,k=7,y=256,R=16,I=17,b=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=512,H=new Array((p+2)*2);a(H);var J=new Array(A*2);a(J);var ft=new Array(q);a(ft);var gt=new Array(u-f+1);a(gt);var K=new Array(m);a(K);var Z=new Array(A);a(Z);function V(_,O,C,G,v){this.static_tree=_,this.extra_bits=O,this.extra_base=C,this.elems=G,this.max_length=v,this.has_stree=_&&_.length}var Dt,St,j;function mt(_,O){this.dyn_tree=_,this.max_code=0,this.stat_desc=O}function _t(_){return _<256?ft[_]:ft[256+(_>>>7)]}function at(_,O){_.pending_buf[_.pending++]=O&255,_.pending_buf[_.pending++]=O>>>8&255}function rt(_,O,C){_.bi_valid>E-C?(_.bi_buf|=O<<_.bi_valid&65535,at(_,_.bi_buf),_.bi_buf=O>>E-_.bi_valid,_.bi_valid+=C-E):(_.bi_buf|=O<<_.bi_valid&65535,_.bi_valid+=C)}function ht(_,O,C){rt(_,C[O*2],C[O*2+1])}function dt(_,O){var C=0;do C|=_&1,_>>>=1,C<<=1;while(--O>0);return C>>>1}function Tt(_){_.bi_valid===16?(at(_,_.bi_buf),_.bi_buf=0,_.bi_valid=0):_.bi_valid>=8&&(_.pending_buf[_.pending++]=_.bi_buf&255,_.bi_buf>>=8,_.bi_valid-=8)}function wt(_,O){var C=O.dyn_tree,G=O.max_code,v=O.stat_desc.static_tree,S=O.stat_desc.has_stree,h=O.stat_desc.extra_bits,M=O.stat_desc.extra_base,et=O.stat_desc.max_length,s,T,N,d,w,$,it=0;for(d=0;d<=D;d++)_.bl_count[d]=0;for(C[_.heap[_.heap_max]*2+1]=0,s=_.heap_max+1;s<L;s++)T=_.heap[s],d=C[C[T*2+1]*2+1]+1,d>et&&(d=et,it++),C[T*2+1]=d,!(T>G)&&(_.bl_count[d]++,w=0,T>=M&&(w=h[T-M]),$=C[T*2],_.opt_len+=$*(d+w),S&&(_.static_len+=$*(v[T*2+1]+w)));if(it!==0){do{for(d=et-1;_.bl_count[d]===0;)d--;_.bl_count[d]--,_.bl_count[d+1]+=2,_.bl_count[et]--,it-=2}while(it>0);for(d=et;d!==0;d--)for(T=_.bl_count[d];T!==0;)N=_.heap[--s],!(N>G)&&(C[N*2+1]!==d&&(_.opt_len+=(d-C[N*2+1])*C[N*2],C[N*2+1]=d),T--)}}function ot(_,O,C){var G=new Array(D+1),v=0,S,h;for(S=1;S<=D;S++)G[S]=v=v+C[S-1]<<1;for(h=0;h<=O;h++){var M=_[h*2+1];M!==0&&(_[h*2]=dt(G[M]++,M))}}function st(){var _,O,C,G,v,S=new Array(D+1);for(C=0,G=0;G<m-1;G++)for(K[G]=C,_=0;_<1<<z[G];_++)gt[C++]=G;for(gt[C-1]=G,v=0,G=0;G<16;G++)for(Z[G]=v,_=0;_<1<<F[G];_++)ft[v++]=G;for(v>>=7;G<A;G++)for(Z[G]=v<<7,_=0;_<1<<F[G]-7;_++)ft[256+v++]=G;for(O=0;O<=D;O++)S[O]=0;for(_=0;_<=143;)H[_*2+1]=8,_++,S[8]++;for(;_<=255;)H[_*2+1]=9,_++,S[9]++;for(;_<=279;)H[_*2+1]=7,_++,S[7]++;for(;_<=287;)H[_*2+1]=8,_++,S[8]++;for(ot(H,p+1,S),_=0;_<A;_++)J[_*2+1]=5,J[_*2]=dt(_,5);Dt=new V(H,z,g+1,p,D),St=new V(J,F,0,A,D),j=new V(new Array(0),B,0,U,k)}function Rt(_){var O;for(O=0;O<p;O++)_.dyn_ltree[O*2]=0;for(O=0;O<A;O++)_.dyn_dtree[O*2]=0;for(O=0;O<U;O++)_.bl_tree[O*2]=0;_.dyn_ltree[y*2]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function zt(_){_.bi_valid>8?at(_,_.bi_buf):_.bi_valid>0&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function Ot(_,O,C,G){zt(_),at(_,C),at(_,~C),t.arraySet(_.pending_buf,_.window,O,C,_.pending),_.pending+=C}function P(_,O,C,G){var v=O*2,S=C*2;return _[v]<_[S]||_[v]===_[S]&&G[O]<=G[C]}function ut(_,O,C){for(var G=_.heap[C],v=C<<1;v<=_.heap_len&&(v<_.heap_len&&P(O,_.heap[v+1],_.heap[v],_.depth)&&v++,!P(O,G,_.heap[v],_.depth));)_.heap[C]=_.heap[v],C=v,v<<=1;_.heap[C]=G}function nt(_,O,C){var G,v,S=0,h,M;if(_.last_lit!==0)do G=_.pending_buf[_.d_buf+S*2]<<8|_.pending_buf[_.d_buf+S*2+1],v=_.pending_buf[_.l_buf+S],S++,G===0?ht(_,v,O):(h=gt[v],ht(_,h+g+1,O),M=z[h],M!==0&&(v-=K[h],rt(_,v,M)),G--,h=_t(G),ht(_,h,C),M=F[h],M!==0&&(G-=Z[h],rt(_,G,M)));while(S<_.last_lit);ht(_,y,O)}function kt(_,O){var C=O.dyn_tree,G=O.stat_desc.static_tree,v=O.stat_desc.has_stree,S=O.stat_desc.elems,h,M,et=-1,s;for(_.heap_len=0,_.heap_max=L,h=0;h<S;h++)C[h*2]!==0?(_.heap[++_.heap_len]=et=h,_.depth[h]=0):C[h*2+1]=0;for(;_.heap_len<2;)s=_.heap[++_.heap_len]=et<2?++et:0,C[s*2]=1,_.depth[s]=0,_.opt_len--,v&&(_.static_len-=G[s*2+1]);for(O.max_code=et,h=_.heap_len>>1;h>=1;h--)ut(_,C,h);s=S;do h=_.heap[1],_.heap[1]=_.heap[_.heap_len--],ut(_,C,1),M=_.heap[1],_.heap[--_.heap_max]=h,_.heap[--_.heap_max]=M,C[s*2]=C[h*2]+C[M*2],_.depth[s]=(_.depth[h]>=_.depth[M]?_.depth[h]:_.depth[M])+1,C[h*2+1]=C[M*2+1]=s,_.heap[1]=s++,ut(_,C,1);while(_.heap_len>=2);_.heap[--_.heap_max]=_.heap[1],wt(_,O),ot(C,et,_.bl_count)}function Nt(_,O,C){var G,v=-1,S,h=O[0*2+1],M=0,et=7,s=4;for(h===0&&(et=138,s=3),O[(C+1)*2+1]=65535,G=0;G<=C;G++)S=h,h=O[(G+1)*2+1],!(++M<et&&S===h)&&(M<s?_.bl_tree[S*2]+=M:S!==0?(S!==v&&_.bl_tree[S*2]++,_.bl_tree[R*2]++):M<=10?_.bl_tree[I*2]++:_.bl_tree[b*2]++,M=0,v=S,h===0?(et=138,s=3):S===h?(et=6,s=3):(et=7,s=4))}function Pt(_,O,C){var G,v=-1,S,h=O[0*2+1],M=0,et=7,s=4;for(h===0&&(et=138,s=3),G=0;G<=C;G++)if(S=h,h=O[(G+1)*2+1],!(++M<et&&S===h)){if(M<s)do ht(_,S,_.bl_tree);while(--M!==0);else S!==0?(S!==v&&(ht(_,S,_.bl_tree),M--),ht(_,R,_.bl_tree),rt(_,M-3,2)):M<=10?(ht(_,I,_.bl_tree),rt(_,M-3,3)):(ht(_,b,_.bl_tree),rt(_,M-11,7));M=0,v=S,h===0?(et=138,s=3):S===h?(et=6,s=3):(et=7,s=4)}}function tt(_){var O;for(Nt(_,_.dyn_ltree,_.l_desc.max_code),Nt(_,_.dyn_dtree,_.d_desc.max_code),kt(_,_.bl_desc),O=U-1;O>=3&&_.bl_tree[x[O]*2+1]===0;O--);return _.opt_len+=3*(O+1)+5+5+4,O}function ct(_,O,C,G){var v;for(rt(_,O-257,5),rt(_,C-1,5),rt(_,G-4,4),v=0;v<G;v++)rt(_,_.bl_tree[x[v]*2+1],3);Pt(_,_.dyn_ltree,O-1),Pt(_,_.dyn_dtree,C-1)}function yt(_){var O=4093624447,C;for(C=0;C<=31;C++,O>>>=1)if(O&1&&_.dyn_ltree[C*2]!==0)return n;if(_.dyn_ltree[9*2]!==0||_.dyn_ltree[10*2]!==0||_.dyn_ltree[13*2]!==0)return i;for(C=32;C<g;C++)if(_.dyn_ltree[C*2]!==0)return i;return n}var W=!1;function Mt(_){W||(st(),W=!0),_.l_desc=new mt(_.dyn_ltree,Dt),_.d_desc=new mt(_.dyn_dtree,St),_.bl_desc=new mt(_.bl_tree,j),_.bi_buf=0,_.bi_valid=0,Rt(_)}function Y(_,O,C,G){rt(_,(o<<1)+(G?1:0),3),Ot(_,O,C)}function bt(_){rt(_,l<<1,3),ht(_,y,H),Tt(_)}function At(_,O,C,G){var v,S,h=0;_.level>0?(_.strm.data_type===r&&(_.strm.data_type=yt(_)),kt(_,_.l_desc),kt(_,_.d_desc),h=tt(_),v=_.opt_len+3+7>>>3,S=_.static_len+3+7>>>3,S<=v&&(v=S)):v=S=C+5,C+4<=v&&O!==-1?Y(_,O,C,G):_.strategy===e||S===v?(rt(_,(l<<1)+(G?1:0),3),nt(_,H,J)):(rt(_,(c<<1)+(G?1:0),3),ct(_,_.l_desc.max_code+1,_.d_desc.max_code+1,h+1),nt(_,_.dyn_ltree,_.dyn_dtree)),Rt(_),G&&zt(_)}function Et(_,O,C){return _.pending_buf[_.d_buf+_.last_lit*2]=O>>>8&255,_.pending_buf[_.d_buf+_.last_lit*2+1]=O&255,_.pending_buf[_.l_buf+_.last_lit]=C&255,_.last_lit++,O===0?_.dyn_ltree[C*2]++:(_.matches++,O--,_.dyn_ltree[(gt[C]+g+1)*2]++,_.dyn_dtree[_t(O)*2]++),_.last_lit===_.lit_bufsize-1}return me._tr_init=Mt,me._tr_stored_block=Y,me._tr_flush_block=At,me._tr_tally=Et,me._tr_align=bt,me}var ni,fa;function Zo(){if(fa)return ni;fa=1;function t(e,n,i,r){for(var a=e&65535|0,o=e>>>16&65535|0,l=0;i!==0;){l=i>2e3?2e3:i,i-=l;do a=a+n[r++]|0,o=o+a|0;while(--l);a%=65521,o%=65521}return a|o<<16|0}return ni=t,ni}var ii,ca;function Po(){if(ca)return ii;ca=1;function t(){for(var i,r=[],a=0;a<256;a++){i=a;for(var o=0;o<8;o++)i=i&1?3988292384^i>>>1:i>>>1;r[a]=i}return r}var e=t();function n(i,r,a,o){var l=e,c=o+a;i^=-1;for(var f=o;f<c;f++)i=i>>>8^l[(i^r[f])&255];return i^-1}return ii=n,ii}var ri,ua;function Ji(){return ua||(ua=1,ri={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),ri}var ha;function Sd(){if(ha)return Qt;ha=1;var t=pe(),e=Ad(),n=Zo(),i=Po(),r=Ji(),a=0,o=1,l=3,c=4,f=5,u=0,m=1,g=-2,p=-3,A=-5,U=-1,L=1,D=2,E=3,k=4,y=0,R=2,I=8,b=9,z=15,F=8,B=29,x=256,q=x+1+B,H=30,J=19,ft=2*q+1,gt=15,K=3,Z=258,V=Z+K+1,Dt=32,St=42,j=69,mt=73,_t=91,at=103,rt=113,ht=666,dt=1,Tt=2,wt=3,ot=4,st=3;function Rt(s,T){return s.msg=r[T],T}function zt(s){return(s<<1)-(s>4?9:0)}function Ot(s){for(var T=s.length;--T>=0;)s[T]=0}function P(s){var T=s.state,N=T.pending;N>s.avail_out&&(N=s.avail_out),N!==0&&(t.arraySet(s.output,T.pending_buf,T.pending_out,N,s.next_out),s.next_out+=N,T.pending_out+=N,s.total_out+=N,s.avail_out-=N,T.pending-=N,T.pending===0&&(T.pending_out=0))}function ut(s,T){e._tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,T),s.block_start=s.strstart,P(s.strm)}function nt(s,T){s.pending_buf[s.pending++]=T}function kt(s,T){s.pending_buf[s.pending++]=T>>>8&255,s.pending_buf[s.pending++]=T&255}function Nt(s,T,N,d){var w=s.avail_in;return w>d&&(w=d),w===0?0:(s.avail_in-=w,t.arraySet(T,s.input,s.next_in,w,N),s.state.wrap===1?s.adler=n(s.adler,T,w,N):s.state.wrap===2&&(s.adler=i(s.adler,T,w,N)),s.next_in+=w,s.total_in+=w,w)}function Pt(s,T){var N=s.max_chain_length,d=s.strstart,w,$,it=s.prev_length,X=s.nice_match,Q=s.strstart>s.w_size-V?s.strstart-(s.w_size-V):0,vt=s.window,se=s.w_mask,Lt=s.prev,xt=s.strstart+Z,Ht=vt[d+it-1],Ut=vt[d+it];s.prev_length>=s.good_match&&(N>>=2),X>s.lookahead&&(X=s.lookahead);do if(w=T,!(vt[w+it]!==Ut||vt[w+it-1]!==Ht||vt[w]!==vt[d]||vt[++w]!==vt[d+1])){d+=2,w++;do;while(vt[++d]===vt[++w]&&vt[++d]===vt[++w]&&vt[++d]===vt[++w]&&vt[++d]===vt[++w]&&vt[++d]===vt[++w]&&vt[++d]===vt[++w]&&vt[++d]===vt[++w]&&vt[++d]===vt[++w]&&d<xt);if($=Z-(xt-d),d=xt-Z,$>it){if(s.match_start=T,it=$,$>=X)break;Ht=vt[d+it-1],Ut=vt[d+it]}}while((T=Lt[T&se])>Q&&--N!==0);return it<=s.lookahead?it:s.lookahead}function tt(s){var T=s.w_size,N,d,w,$,it;do{if($=s.window_size-s.lookahead-s.strstart,s.strstart>=T+(T-V)){t.arraySet(s.window,s.window,T,T,0),s.match_start-=T,s.strstart-=T,s.block_start-=T,d=s.hash_size,N=d;do w=s.head[--N],s.head[N]=w>=T?w-T:0;while(--d);d=T,N=d;do w=s.prev[--N],s.prev[N]=w>=T?w-T:0;while(--d);$+=T}if(s.strm.avail_in===0)break;if(d=Nt(s.strm,s.window,s.strstart+s.lookahead,$),s.lookahead+=d,s.lookahead+s.insert>=K)for(it=s.strstart-s.insert,s.ins_h=s.window[it],s.ins_h=(s.ins_h<<s.hash_shift^s.window[it+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[it+K-1])&s.hash_mask,s.prev[it&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=it,it++,s.insert--,!(s.lookahead+s.insert<K)););}while(s.lookahead<V&&s.strm.avail_in!==0)}function ct(s,T){var N=65535;for(N>s.pending_buf_size-5&&(N=s.pending_buf_size-5);;){if(s.lookahead<=1){if(tt(s),s.lookahead===0&&T===a)return dt;if(s.lookahead===0)break}s.strstart+=s.lookahead,s.lookahead=0;var d=s.block_start+N;if((s.strstart===0||s.strstart>=d)&&(s.lookahead=s.strstart-d,s.strstart=d,ut(s,!1),s.strm.avail_out===0)||s.strstart-s.block_start>=s.w_size-V&&(ut(s,!1),s.strm.avail_out===0))return dt}return s.insert=0,T===c?(ut(s,!0),s.strm.avail_out===0?wt:ot):(s.strstart>s.block_start&&(ut(s,!1),s.strm.avail_out===0),dt)}function yt(s,T){for(var N,d;;){if(s.lookahead<V){if(tt(s),s.lookahead<V&&T===a)return dt;if(s.lookahead===0)break}if(N=0,s.lookahead>=K&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+K-1])&s.hash_mask,N=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),N!==0&&s.strstart-N<=s.w_size-V&&(s.match_length=Pt(s,N)),s.match_length>=K)if(d=e._tr_tally(s,s.strstart-s.match_start,s.match_length-K),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=K){s.match_length--;do s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+K-1])&s.hash_mask,N=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart;while(--s.match_length!==0);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;else d=e._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(d&&(ut(s,!1),s.strm.avail_out===0))return dt}return s.insert=s.strstart<K-1?s.strstart:K-1,T===c?(ut(s,!0),s.strm.avail_out===0?wt:ot):s.last_lit&&(ut(s,!1),s.strm.avail_out===0)?dt:Tt}function W(s,T){for(var N,d,w;;){if(s.lookahead<V){if(tt(s),s.lookahead<V&&T===a)return dt;if(s.lookahead===0)break}if(N=0,s.lookahead>=K&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+K-1])&s.hash_mask,N=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=K-1,N!==0&&s.prev_length<s.max_lazy_match&&s.strstart-N<=s.w_size-V&&(s.match_length=Pt(s,N),s.match_length<=5&&(s.strategy===L||s.match_length===K&&s.strstart-s.match_start>4096)&&(s.match_length=K-1)),s.prev_length>=K&&s.match_length<=s.prev_length){w=s.strstart+s.lookahead-K,d=e._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-K),s.lookahead-=s.prev_length-1,s.prev_length-=2;do++s.strstart<=w&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+K-1])&s.hash_mask,N=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart);while(--s.prev_length!==0);if(s.match_available=0,s.match_length=K-1,s.strstart++,d&&(ut(s,!1),s.strm.avail_out===0))return dt}else if(s.match_available){if(d=e._tr_tally(s,0,s.window[s.strstart-1]),d&&ut(s,!1),s.strstart++,s.lookahead--,s.strm.avail_out===0)return dt}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(d=e._tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<K-1?s.strstart:K-1,T===c?(ut(s,!0),s.strm.avail_out===0?wt:ot):s.last_lit&&(ut(s,!1),s.strm.avail_out===0)?dt:Tt}function Mt(s,T){for(var N,d,w,$,it=s.window;;){if(s.lookahead<=Z){if(tt(s),s.lookahead<=Z&&T===a)return dt;if(s.lookahead===0)break}if(s.match_length=0,s.lookahead>=K&&s.strstart>0&&(w=s.strstart-1,d=it[w],d===it[++w]&&d===it[++w]&&d===it[++w])){$=s.strstart+Z;do;while(d===it[++w]&&d===it[++w]&&d===it[++w]&&d===it[++w]&&d===it[++w]&&d===it[++w]&&d===it[++w]&&d===it[++w]&&w<$);s.match_length=Z-($-w),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=K?(N=e._tr_tally(s,1,s.match_length-K),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(N=e._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),N&&(ut(s,!1),s.strm.avail_out===0))return dt}return s.insert=0,T===c?(ut(s,!0),s.strm.avail_out===0?wt:ot):s.last_lit&&(ut(s,!1),s.strm.avail_out===0)?dt:Tt}function Y(s,T){for(var N;;){if(s.lookahead===0&&(tt(s),s.lookahead===0)){if(T===a)return dt;break}if(s.match_length=0,N=e._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,N&&(ut(s,!1),s.strm.avail_out===0))return dt}return s.insert=0,T===c?(ut(s,!0),s.strm.avail_out===0?wt:ot):s.last_lit&&(ut(s,!1),s.strm.avail_out===0)?dt:Tt}function bt(s,T,N,d,w){this.good_length=s,this.max_lazy=T,this.nice_length=N,this.max_chain=d,this.func=w}var At;At=[new bt(0,0,0,0,ct),new bt(4,4,8,4,yt),new bt(4,5,16,8,yt),new bt(4,6,32,32,yt),new bt(4,4,16,16,W),new bt(8,16,32,32,W),new bt(8,16,128,128,W),new bt(8,32,128,256,W),new bt(32,128,258,1024,W),new bt(32,258,258,4096,W)];function Et(s){s.window_size=2*s.w_size,Ot(s.head),s.max_lazy_match=At[s.level].max_lazy,s.good_match=At[s.level].good_length,s.nice_match=At[s.level].nice_length,s.max_chain_length=At[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=K-1,s.match_available=0,s.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16(ft*2),this.dyn_dtree=new t.Buf16((2*H+1)*2),this.bl_tree=new t.Buf16((2*J+1)*2),Ot(this.dyn_ltree),Ot(this.dyn_dtree),Ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16(gt+1),this.heap=new t.Buf16(2*q+1),Ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*q+1),Ot(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function O(s){var T;return!s||!s.state?Rt(s,g):(s.total_in=s.total_out=0,s.data_type=R,T=s.state,T.pending=0,T.pending_out=0,T.wrap<0&&(T.wrap=-T.wrap),T.status=T.wrap?St:rt,s.adler=T.wrap===2?0:1,T.last_flush=a,e._tr_init(T),u)}function C(s){var T=O(s);return T===u&&Et(s.state),T}function G(s,T){return!s||!s.state||s.state.wrap!==2?g:(s.state.gzhead=T,u)}function v(s,T,N,d,w,$){if(!s)return g;var it=1;if(T===U&&(T=6),d<0?(it=0,d=-d):d>15&&(it=2,d-=16),w<1||w>b||N!==I||d<8||d>15||T<0||T>9||$<0||$>k)return Rt(s,g);d===8&&(d=9);var X=new _;return s.state=X,X.strm=s,X.wrap=it,X.gzhead=null,X.w_bits=d,X.w_size=1<<X.w_bits,X.w_mask=X.w_size-1,X.hash_bits=w+7,X.hash_size=1<<X.hash_bits,X.hash_mask=X.hash_size-1,X.hash_shift=~~((X.hash_bits+K-1)/K),X.window=new t.Buf8(X.w_size*2),X.head=new t.Buf16(X.hash_size),X.prev=new t.Buf16(X.w_size),X.lit_bufsize=1<<w+6,X.pending_buf_size=X.lit_bufsize*4,X.pending_buf=new t.Buf8(X.pending_buf_size),X.d_buf=1*X.lit_bufsize,X.l_buf=3*X.lit_bufsize,X.level=T,X.strategy=$,X.method=N,C(s)}function S(s,T){return v(s,T,I,z,F,y)}function h(s,T){var N,d,w,$;if(!s||!s.state||T>f||T<0)return s?Rt(s,g):g;if(d=s.state,!s.output||!s.input&&s.avail_in!==0||d.status===ht&&T!==c)return Rt(s,s.avail_out===0?A:g);if(d.strm=s,N=d.last_flush,d.last_flush=T,d.status===St)if(d.wrap===2)s.adler=0,nt(d,31),nt(d,139),nt(d,8),d.gzhead?(nt(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),nt(d,d.gzhead.time&255),nt(d,d.gzhead.time>>8&255),nt(d,d.gzhead.time>>16&255),nt(d,d.gzhead.time>>24&255),nt(d,d.level===9?2:d.strategy>=D||d.level<2?4:0),nt(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(nt(d,d.gzhead.extra.length&255),nt(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(s.adler=i(s.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=j):(nt(d,0),nt(d,0),nt(d,0),nt(d,0),nt(d,0),nt(d,d.level===9?2:d.strategy>=D||d.level<2?4:0),nt(d,st),d.status=rt);else{var it=I+(d.w_bits-8<<4)<<8,X=-1;d.strategy>=D||d.level<2?X=0:d.level<6?X=1:d.level===6?X=2:X=3,it|=X<<6,d.strstart!==0&&(it|=Dt),it+=31-it%31,d.status=rt,kt(d,it),d.strstart!==0&&(kt(d,s.adler>>>16),kt(d,s.adler&65535)),s.adler=1}if(d.status===j)if(d.gzhead.extra){for(w=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>w&&(s.adler=i(s.adler,d.pending_buf,d.pending-w,w)),P(s),w=d.pending,d.pending===d.pending_buf_size));)nt(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>w&&(s.adler=i(s.adler,d.pending_buf,d.pending-w,w)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=mt)}else d.status=mt;if(d.status===mt)if(d.gzhead.name){w=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>w&&(s.adler=i(s.adler,d.pending_buf,d.pending-w,w)),P(s),w=d.pending,d.pending===d.pending_buf_size)){$=1;break}d.gzindex<d.gzhead.name.length?$=d.gzhead.name.charCodeAt(d.gzindex++)&255:$=0,nt(d,$)}while($!==0);d.gzhead.hcrc&&d.pending>w&&(s.adler=i(s.adler,d.pending_buf,d.pending-w,w)),$===0&&(d.gzindex=0,d.status=_t)}else d.status=_t;if(d.status===_t)if(d.gzhead.comment){w=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>w&&(s.adler=i(s.adler,d.pending_buf,d.pending-w,w)),P(s),w=d.pending,d.pending===d.pending_buf_size)){$=1;break}d.gzindex<d.gzhead.comment.length?$=d.gzhead.comment.charCodeAt(d.gzindex++)&255:$=0,nt(d,$)}while($!==0);d.gzhead.hcrc&&d.pending>w&&(s.adler=i(s.adler,d.pending_buf,d.pending-w,w)),$===0&&(d.status=at)}else d.status=at;if(d.status===at&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&P(s),d.pending+2<=d.pending_buf_size&&(nt(d,s.adler&255),nt(d,s.adler>>8&255),s.adler=0,d.status=rt)):d.status=rt),d.pending!==0){if(P(s),s.avail_out===0)return d.last_flush=-1,u}else if(s.avail_in===0&&zt(T)<=zt(N)&&T!==c)return Rt(s,A);if(d.status===ht&&s.avail_in!==0)return Rt(s,A);if(s.avail_in!==0||d.lookahead!==0||T!==a&&d.status!==ht){var Q=d.strategy===D?Y(d,T):d.strategy===E?Mt(d,T):At[d.level].func(d,T);if((Q===wt||Q===ot)&&(d.status=ht),Q===dt||Q===wt)return s.avail_out===0&&(d.last_flush=-1),u;if(Q===Tt&&(T===o?e._tr_align(d):T!==f&&(e._tr_stored_block(d,0,0,!1),T===l&&(Ot(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),P(s),s.avail_out===0))return d.last_flush=-1,u}return T!==c?u:d.wrap<=0?m:(d.wrap===2?(nt(d,s.adler&255),nt(d,s.adler>>8&255),nt(d,s.adler>>16&255),nt(d,s.adler>>24&255),nt(d,s.total_in&255),nt(d,s.total_in>>8&255),nt(d,s.total_in>>16&255),nt(d,s.total_in>>24&255)):(kt(d,s.adler>>>16),kt(d,s.adler&65535)),P(s),d.wrap>0&&(d.wrap=-d.wrap),d.pending!==0?u:m)}function M(s){var T;return!s||!s.state?g:(T=s.state.status,T!==St&&T!==j&&T!==mt&&T!==_t&&T!==at&&T!==rt&&T!==ht?Rt(s,g):(s.state=null,T===rt?Rt(s,p):u))}function et(s,T){var N=T.length,d,w,$,it,X,Q,vt,se;if(!s||!s.state||(d=s.state,it=d.wrap,it===2||it===1&&d.status!==St||d.lookahead))return g;for(it===1&&(s.adler=n(s.adler,T,N,0)),d.wrap=0,N>=d.w_size&&(it===0&&(Ot(d.head),d.strstart=0,d.block_start=0,d.insert=0),se=new t.Buf8(d.w_size),t.arraySet(se,T,N-d.w_size,d.w_size,0),T=se,N=d.w_size),X=s.avail_in,Q=s.next_in,vt=s.input,s.avail_in=N,s.next_in=0,s.input=T,tt(d);d.lookahead>=K;){w=d.strstart,$=d.lookahead-(K-1);do d.ins_h=(d.ins_h<<d.hash_shift^d.window[w+K-1])&d.hash_mask,d.prev[w&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=w,w++;while(--$);d.strstart=w,d.lookahead=K-1,tt(d)}return d.strstart+=d.lookahead,d.block_start=d.strstart,d.insert=d.lookahead,d.lookahead=0,d.match_length=d.prev_length=K-1,d.match_available=0,s.next_in=Q,s.input=vt,s.avail_in=X,d.wrap=it,u}return Qt.deflateInit=S,Qt.deflateInit2=v,Qt.deflateReset=C,Qt.deflateResetKeep=O,Qt.deflateSetHeader=G,Qt.deflate=h,Qt.deflateEnd=M,Qt.deflateSetDictionary=et,Qt.deflateInfo="pako deflate (from Nodeca project)",Qt}var ve={},da;function qo(){if(da)return ve;da=1;var t=pe(),e=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{e=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var i=new t.Buf8(256),r=0;r<256;r++)i[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;i[254]=i[254]=1,ve.string2buf=function(o){var l,c,f,u,m,g=o.length,p=0;for(u=0;u<g;u++)c=o.charCodeAt(u),(c&64512)===55296&&u+1<g&&(f=o.charCodeAt(u+1),(f&64512)===56320&&(c=65536+(c-55296<<10)+(f-56320),u++)),p+=c<128?1:c<2048?2:c<65536?3:4;for(l=new t.Buf8(p),m=0,u=0;m<p;u++)c=o.charCodeAt(u),(c&64512)===55296&&u+1<g&&(f=o.charCodeAt(u+1),(f&64512)===56320&&(c=65536+(c-55296<<10)+(f-56320),u++)),c<128?l[m++]=c:c<2048?(l[m++]=192|c>>>6,l[m++]=128|c&63):c<65536?(l[m++]=224|c>>>12,l[m++]=128|c>>>6&63,l[m++]=128|c&63):(l[m++]=240|c>>>18,l[m++]=128|c>>>12&63,l[m++]=128|c>>>6&63,l[m++]=128|c&63);return l};function a(o,l){if(l<65534&&(o.subarray&&n||!o.subarray&&e))return String.fromCharCode.apply(null,t.shrinkBuf(o,l));for(var c="",f=0;f<l;f++)c+=String.fromCharCode(o[f]);return c}return ve.buf2binstring=function(o){return a(o,o.length)},ve.binstring2buf=function(o){for(var l=new t.Buf8(o.length),c=0,f=l.length;c<f;c++)l[c]=o.charCodeAt(c);return l},ve.buf2string=function(o,l){var c,f,u,m,g=l||o.length,p=new Array(g*2);for(f=0,c=0;c<g;){if(u=o[c++],u<128){p[f++]=u;continue}if(m=i[u],m>4){p[f++]=65533,c+=m-1;continue}for(u&=m===2?31:m===3?15:7;m>1&&c<g;)u=u<<6|o[c++]&63,m--;if(m>1){p[f++]=65533;continue}u<65536?p[f++]=u:(u-=65536,p[f++]=55296|u>>10&1023,p[f++]=56320|u&1023)}return a(p,f)},ve.utf8border=function(o,l){var c;for(l=l||o.length,l>o.length&&(l=o.length),c=l-1;c>=0&&(o[c]&192)===128;)c--;return c<0||c===0?l:c+i[o[c]]>l?c:l},ve}var ai,_a;function Go(){if(_a)return ai;_a=1;function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return ai=t,ai}var pa;function $d(){if(pa)return Re;pa=1;var t=Sd(),e=pe(),n=qo(),i=Ji(),r=Go(),a=Object.prototype.toString,o=0,l=4,c=0,f=1,u=2,m=-1,g=0,p=8;function A(E){if(!(this instanceof A))return new A(E);this.options=e.assign({level:m,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},E||{});var k=this.options;k.raw&&k.windowBits>0?k.windowBits=-k.windowBits:k.gzip&&k.windowBits>0&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var y=t.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(y!==c)throw new Error(i[y]);if(k.header&&t.deflateSetHeader(this.strm,k.header),k.dictionary){var R;if(typeof k.dictionary=="string"?R=n.string2buf(k.dictionary):a.call(k.dictionary)==="[object ArrayBuffer]"?R=new Uint8Array(k.dictionary):R=k.dictionary,y=t.deflateSetDictionary(this.strm,R),y!==c)throw new Error(i[y]);this._dict_set=!0}}A.prototype.push=function(E,k){var y=this.strm,R=this.options.chunkSize,I,b;if(this.ended)return!1;b=k===~~k?k:k===!0?l:o,typeof E=="string"?y.input=n.string2buf(E):a.call(E)==="[object ArrayBuffer]"?y.input=new Uint8Array(E):y.input=E,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new e.Buf8(R),y.next_out=0,y.avail_out=R),I=t.deflate(y,b),I!==f&&I!==c)return this.onEnd(I),this.ended=!0,!1;(y.avail_out===0||y.avail_in===0&&(b===l||b===u))&&(this.options.to==="string"?this.onData(n.buf2binstring(e.shrinkBuf(y.output,y.next_out))):this.onData(e.shrinkBuf(y.output,y.next_out)))}while((y.avail_in>0||y.avail_out===0)&&I!==f);return b===l?(I=t.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===c):(b===u&&(this.onEnd(c),y.avail_out=0),!0)},A.prototype.onData=function(E){this.chunks.push(E)},A.prototype.onEnd=function(E){E===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg};function U(E,k){var y=new A(k);if(y.push(E,!0),y.err)throw y.msg||i[y.err];return y.result}function L(E,k){return k=k||{},k.raw=!0,U(E,k)}function D(E,k){return k=k||{},k.gzip=!0,U(E,k)}return Re.Deflate=A,Re.deflate=U,Re.deflateRaw=L,Re.gzip=D,Re}var Ne={},Kt={},oi,ga;function Td(){if(ga)return oi;ga=1;var t=30,e=12;return oi=function(i,r){var a,o,l,c,f,u,m,g,p,A,U,L,D,E,k,y,R,I,b,z,F,B,x,q,H;a=i.state,o=i.next_in,q=i.input,l=o+(i.avail_in-5),c=i.next_out,H=i.output,f=c-(r-i.avail_out),u=c+(i.avail_out-257),m=a.dmax,g=a.wsize,p=a.whave,A=a.wnext,U=a.window,L=a.hold,D=a.bits,E=a.lencode,k=a.distcode,y=(1<<a.lenbits)-1,R=(1<<a.distbits)-1;t:do{D<15&&(L+=q[o++]<<D,D+=8,L+=q[o++]<<D,D+=8),I=E[L&y];e:for(;;){if(b=I>>>24,L>>>=b,D-=b,b=I>>>16&255,b===0)H[c++]=I&65535;else if(b&16){z=I&65535,b&=15,b&&(D<b&&(L+=q[o++]<<D,D+=8),z+=L&(1<<b)-1,L>>>=b,D-=b),D<15&&(L+=q[o++]<<D,D+=8,L+=q[o++]<<D,D+=8),I=k[L&R];n:for(;;){if(b=I>>>24,L>>>=b,D-=b,b=I>>>16&255,b&16){if(F=I&65535,b&=15,D<b&&(L+=q[o++]<<D,D+=8,D<b&&(L+=q[o++]<<D,D+=8)),F+=L&(1<<b)-1,F>m){i.msg="invalid distance too far back",a.mode=t;break t}if(L>>>=b,D-=b,b=c-f,F>b){if(b=F-b,b>p&&a.sane){i.msg="invalid distance too far back",a.mode=t;break t}if(B=0,x=U,A===0){if(B+=g-b,b<z){z-=b;do H[c++]=U[B++];while(--b);B=c-F,x=H}}else if(A<b){if(B+=g+A-b,b-=A,b<z){z-=b;do H[c++]=U[B++];while(--b);if(B=0,A<z){b=A,z-=b;do H[c++]=U[B++];while(--b);B=c-F,x=H}}}else if(B+=A-b,b<z){z-=b;do H[c++]=U[B++];while(--b);B=c-F,x=H}for(;z>2;)H[c++]=x[B++],H[c++]=x[B++],H[c++]=x[B++],z-=3;z&&(H[c++]=x[B++],z>1&&(H[c++]=x[B++]))}else{B=c-F;do H[c++]=H[B++],H[c++]=H[B++],H[c++]=H[B++],z-=3;while(z>2);z&&(H[c++]=H[B++],z>1&&(H[c++]=H[B++]))}}else if(b&64){i.msg="invalid distance code",a.mode=t;break t}else{I=k[(I&65535)+(L&(1<<b)-1)];continue n}break}}else if(b&64)if(b&32){a.mode=e;break t}else{i.msg="invalid literal/length code",a.mode=t;break t}else{I=E[(I&65535)+(L&(1<<b)-1)];continue e}break}}while(o<l&&c<u);z=D>>3,o-=z,D-=z<<3,L&=(1<<D)-1,i.next_in=o,i.next_out=c,i.avail_in=o<l?5+(l-o):5-(o-l),i.avail_out=c<u?257+(u-c):257-(c-u),a.hold=L,a.bits=D},oi}var si,ma;function Rd(){if(ma)return si;ma=1;var t=pe(),e=15,n=852,i=592,r=0,a=1,o=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return si=function(g,p,A,U,L,D,E,k){var y=k.bits,R=0,I=0,b=0,z=0,F=0,B=0,x=0,q=0,H=0,J=0,ft,gt,K,Z,V,Dt=null,St=0,j,mt=new t.Buf16(e+1),_t=new t.Buf16(e+1),at=null,rt=0,ht,dt,Tt;for(R=0;R<=e;R++)mt[R]=0;for(I=0;I<U;I++)mt[p[A+I]]++;for(F=y,z=e;z>=1&&mt[z]===0;z--);if(F>z&&(F=z),z===0)return L[D++]=1<<24|64<<16|0,L[D++]=1<<24|64<<16|0,k.bits=1,0;for(b=1;b<z&&mt[b]===0;b++);for(F<b&&(F=b),q=1,R=1;R<=e;R++)if(q<<=1,q-=mt[R],q<0)return-1;if(q>0&&(g===r||z!==1))return-1;for(_t[1]=0,R=1;R<e;R++)_t[R+1]=_t[R]+mt[R];for(I=0;I<U;I++)p[A+I]!==0&&(E[_t[p[A+I]]++]=I);if(g===r?(Dt=at=E,j=19):g===a?(Dt=l,St-=257,at=c,rt-=257,j=256):(Dt=f,at=u,j=-1),J=0,I=0,R=b,V=D,B=F,x=0,K=-1,H=1<<F,Z=H-1,g===a&&H>n||g===o&&H>i)return 1;for(;;){ht=R-x,E[I]<j?(dt=0,Tt=E[I]):E[I]>j?(dt=at[rt+E[I]],Tt=Dt[St+E[I]]):(dt=96,Tt=0),ft=1<<R-x,gt=1<<B,b=gt;do gt-=ft,L[V+(J>>x)+gt]=ht<<24|dt<<16|Tt|0;while(gt!==0);for(ft=1<<R-1;J&ft;)ft>>=1;if(ft!==0?(J&=ft-1,J+=ft):J=0,I++,--mt[R]===0){if(R===z)break;R=p[A+E[I]]}if(R>F&&(J&Z)!==K){for(x===0&&(x=F),V+=b,B=R-x,q=1<<B;B+x<z&&(q-=mt[B+x],!(q<=0));)B++,q<<=1;if(H+=1<<B,g===a&&H>n||g===o&&H>i)return 1;K=J&Z,L[K]=F<<24|B<<16|V-D|0}}return J!==0&&(L[V+J]=R-x<<24|64<<16|0),k.bits=F,0},si}var va;function Nd(){if(va)return Kt;va=1;var t=pe(),e=Zo(),n=Po(),i=Td(),r=Rd(),a=0,o=1,l=2,c=4,f=5,u=6,m=0,g=1,p=2,A=-2,U=-3,L=-4,D=-5,E=8,k=1,y=2,R=3,I=4,b=5,z=6,F=7,B=8,x=9,q=10,H=11,J=12,ft=13,gt=14,K=15,Z=16,V=17,Dt=18,St=19,j=20,mt=21,_t=22,at=23,rt=24,ht=25,dt=26,Tt=27,wt=28,ot=29,st=30,Rt=31,zt=32,Ot=852,P=592,ut=15,nt=ut;function kt(v){return(v>>>24&255)+(v>>>8&65280)+((v&65280)<<8)+((v&255)<<24)}function Nt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Pt(v){var S;return!v||!v.state?A:(S=v.state,v.total_in=v.total_out=S.total=0,v.msg="",S.wrap&&(v.adler=S.wrap&1),S.mode=k,S.last=0,S.havedict=0,S.dmax=32768,S.head=null,S.hold=0,S.bits=0,S.lencode=S.lendyn=new t.Buf32(Ot),S.distcode=S.distdyn=new t.Buf32(P),S.sane=1,S.back=-1,m)}function tt(v){var S;return!v||!v.state?A:(S=v.state,S.wsize=0,S.whave=0,S.wnext=0,Pt(v))}function ct(v,S){var h,M;return!v||!v.state||(M=v.state,S<0?(h=0,S=-S):(h=(S>>4)+1,S<48&&(S&=15)),S&&(S<8||S>15))?A:(M.window!==null&&M.wbits!==S&&(M.window=null),M.wrap=h,M.wbits=S,tt(v))}function yt(v,S){var h,M;return v?(M=new Nt,v.state=M,M.window=null,h=ct(v,S),h!==m&&(v.state=null),h):A}function W(v){return yt(v,nt)}var Mt=!0,Y,bt;function At(v){if(Mt){var S;for(Y=new t.Buf32(512),bt=new t.Buf32(32),S=0;S<144;)v.lens[S++]=8;for(;S<256;)v.lens[S++]=9;for(;S<280;)v.lens[S++]=7;for(;S<288;)v.lens[S++]=8;for(r(o,v.lens,0,288,Y,0,v.work,{bits:9}),S=0;S<32;)v.lens[S++]=5;r(l,v.lens,0,32,bt,0,v.work,{bits:5}),Mt=!1}v.lencode=Y,v.lenbits=9,v.distcode=bt,v.distbits=5}function Et(v,S,h,M){var et,s=v.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new t.Buf8(s.wsize)),M>=s.wsize?(t.arraySet(s.window,S,h-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(et=s.wsize-s.wnext,et>M&&(et=M),t.arraySet(s.window,S,h-M,et,s.wnext),M-=et,M?(t.arraySet(s.window,S,h-M,M,0),s.wnext=M,s.whave=s.wsize):(s.wnext+=et,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=et))),0}function _(v,S){var h,M,et,s,T,N,d,w,$,it,X,Q,vt,se,Lt=0,xt,Ht,Ut,qt,Qe,je,Bt,Xt,Vt=new t.Buf8(4),le,ie,Qi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&v.avail_in!==0)return A;h=v.state,h.mode===J&&(h.mode=ft),T=v.next_out,et=v.output,d=v.avail_out,s=v.next_in,M=v.input,N=v.avail_in,w=h.hold,$=h.bits,it=N,X=d,Xt=m;t:for(;;)switch(h.mode){case k:if(h.wrap===0){h.mode=ft;break}for(;$<16;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}if(h.wrap&2&&w===35615){h.check=0,Vt[0]=w&255,Vt[1]=w>>>8&255,h.check=n(h.check,Vt,2,0),w=0,$=0,h.mode=y;break}if(h.flags=0,h.head&&(h.head.done=!1),!(h.wrap&1)||(((w&255)<<8)+(w>>8))%31){v.msg="incorrect header check",h.mode=st;break}if((w&15)!==E){v.msg="unknown compression method",h.mode=st;break}if(w>>>=4,$-=4,Bt=(w&15)+8,h.wbits===0)h.wbits=Bt;else if(Bt>h.wbits){v.msg="invalid window size",h.mode=st;break}h.dmax=1<<Bt,v.adler=h.check=1,h.mode=w&512?q:J,w=0,$=0;break;case y:for(;$<16;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}if(h.flags=w,(h.flags&255)!==E){v.msg="unknown compression method",h.mode=st;break}if(h.flags&57344){v.msg="unknown header flags set",h.mode=st;break}h.head&&(h.head.text=w>>8&1),h.flags&512&&(Vt[0]=w&255,Vt[1]=w>>>8&255,h.check=n(h.check,Vt,2,0)),w=0,$=0,h.mode=R;case R:for(;$<32;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}h.head&&(h.head.time=w),h.flags&512&&(Vt[0]=w&255,Vt[1]=w>>>8&255,Vt[2]=w>>>16&255,Vt[3]=w>>>24&255,h.check=n(h.check,Vt,4,0)),w=0,$=0,h.mode=I;case I:for(;$<16;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}h.head&&(h.head.xflags=w&255,h.head.os=w>>8),h.flags&512&&(Vt[0]=w&255,Vt[1]=w>>>8&255,h.check=n(h.check,Vt,2,0)),w=0,$=0,h.mode=b;case b:if(h.flags&1024){for(;$<16;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}h.length=w,h.head&&(h.head.extra_len=w),h.flags&512&&(Vt[0]=w&255,Vt[1]=w>>>8&255,h.check=n(h.check,Vt,2,0)),w=0,$=0}else h.head&&(h.head.extra=null);h.mode=z;case z:if(h.flags&1024&&(Q=h.length,Q>N&&(Q=N),Q&&(h.head&&(Bt=h.head.extra_len-h.length,h.head.extra||(h.head.extra=new Array(h.head.extra_len)),t.arraySet(h.head.extra,M,s,Q,Bt)),h.flags&512&&(h.check=n(h.check,M,Q,s)),N-=Q,s+=Q,h.length-=Q),h.length))break t;h.length=0,h.mode=F;case F:if(h.flags&2048){if(N===0)break t;Q=0;do Bt=M[s+Q++],h.head&&Bt&&h.length<65536&&(h.head.name+=String.fromCharCode(Bt));while(Bt&&Q<N);if(h.flags&512&&(h.check=n(h.check,M,Q,s)),N-=Q,s+=Q,Bt)break t}else h.head&&(h.head.name=null);h.length=0,h.mode=B;case B:if(h.flags&4096){if(N===0)break t;Q=0;do Bt=M[s+Q++],h.head&&Bt&&h.length<65536&&(h.head.comment+=String.fromCharCode(Bt));while(Bt&&Q<N);if(h.flags&512&&(h.check=n(h.check,M,Q,s)),N-=Q,s+=Q,Bt)break t}else h.head&&(h.head.comment=null);h.mode=x;case x:if(h.flags&512){for(;$<16;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}if(w!==(h.check&65535)){v.msg="header crc mismatch",h.mode=st;break}w=0,$=0}h.head&&(h.head.hcrc=h.flags>>9&1,h.head.done=!0),v.adler=h.check=0,h.mode=J;break;case q:for(;$<32;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}v.adler=h.check=kt(w),w=0,$=0,h.mode=H;case H:if(h.havedict===0)return v.next_out=T,v.avail_out=d,v.next_in=s,v.avail_in=N,h.hold=w,h.bits=$,p;v.adler=h.check=1,h.mode=J;case J:if(S===f||S===u)break t;case ft:if(h.last){w>>>=$&7,$-=$&7,h.mode=Tt;break}for(;$<3;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}switch(h.last=w&1,w>>>=1,$-=1,w&3){case 0:h.mode=gt;break;case 1:if(At(h),h.mode=j,S===u){w>>>=2,$-=2;break t}break;case 2:h.mode=V;break;case 3:v.msg="invalid block type",h.mode=st}w>>>=2,$-=2;break;case gt:for(w>>>=$&7,$-=$&7;$<32;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}if((w&65535)!==(w>>>16^65535)){v.msg="invalid stored block lengths",h.mode=st;break}if(h.length=w&65535,w=0,$=0,h.mode=K,S===u)break t;case K:h.mode=Z;case Z:if(Q=h.length,Q){if(Q>N&&(Q=N),Q>d&&(Q=d),Q===0)break t;t.arraySet(et,M,s,Q,T),N-=Q,s+=Q,d-=Q,T+=Q,h.length-=Q;break}h.mode=J;break;case V:for(;$<14;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}if(h.nlen=(w&31)+257,w>>>=5,$-=5,h.ndist=(w&31)+1,w>>>=5,$-=5,h.ncode=(w&15)+4,w>>>=4,$-=4,h.nlen>286||h.ndist>30){v.msg="too many length or distance symbols",h.mode=st;break}h.have=0,h.mode=Dt;case Dt:for(;h.have<h.ncode;){for(;$<3;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}h.lens[Qi[h.have++]]=w&7,w>>>=3,$-=3}for(;h.have<19;)h.lens[Qi[h.have++]]=0;if(h.lencode=h.lendyn,h.lenbits=7,le={bits:h.lenbits},Xt=r(a,h.lens,0,19,h.lencode,0,h.work,le),h.lenbits=le.bits,Xt){v.msg="invalid code lengths set",h.mode=st;break}h.have=0,h.mode=St;case St:for(;h.have<h.nlen+h.ndist;){for(;Lt=h.lencode[w&(1<<h.lenbits)-1],xt=Lt>>>24,Ht=Lt>>>16&255,Ut=Lt&65535,!(xt<=$);){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}if(Ut<16)w>>>=xt,$-=xt,h.lens[h.have++]=Ut;else{if(Ut===16){for(ie=xt+2;$<ie;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}if(w>>>=xt,$-=xt,h.have===0){v.msg="invalid bit length repeat",h.mode=st;break}Bt=h.lens[h.have-1],Q=3+(w&3),w>>>=2,$-=2}else if(Ut===17){for(ie=xt+3;$<ie;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}w>>>=xt,$-=xt,Bt=0,Q=3+(w&7),w>>>=3,$-=3}else{for(ie=xt+7;$<ie;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}w>>>=xt,$-=xt,Bt=0,Q=11+(w&127),w>>>=7,$-=7}if(h.have+Q>h.nlen+h.ndist){v.msg="invalid bit length repeat",h.mode=st;break}for(;Q--;)h.lens[h.have++]=Bt}}if(h.mode===st)break;if(h.lens[256]===0){v.msg="invalid code -- missing end-of-block",h.mode=st;break}if(h.lenbits=9,le={bits:h.lenbits},Xt=r(o,h.lens,0,h.nlen,h.lencode,0,h.work,le),h.lenbits=le.bits,Xt){v.msg="invalid literal/lengths set",h.mode=st;break}if(h.distbits=6,h.distcode=h.distdyn,le={bits:h.distbits},Xt=r(l,h.lens,h.nlen,h.ndist,h.distcode,0,h.work,le),h.distbits=le.bits,Xt){v.msg="invalid distances set",h.mode=st;break}if(h.mode=j,S===u)break t;case j:h.mode=mt;case mt:if(N>=6&&d>=258){v.next_out=T,v.avail_out=d,v.next_in=s,v.avail_in=N,h.hold=w,h.bits=$,i(v,X),T=v.next_out,et=v.output,d=v.avail_out,s=v.next_in,M=v.input,N=v.avail_in,w=h.hold,$=h.bits,h.mode===J&&(h.back=-1);break}for(h.back=0;Lt=h.lencode[w&(1<<h.lenbits)-1],xt=Lt>>>24,Ht=Lt>>>16&255,Ut=Lt&65535,!(xt<=$);){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}if(Ht&&!(Ht&240)){for(qt=xt,Qe=Ht,je=Ut;Lt=h.lencode[je+((w&(1<<qt+Qe)-1)>>qt)],xt=Lt>>>24,Ht=Lt>>>16&255,Ut=Lt&65535,!(qt+xt<=$);){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}w>>>=qt,$-=qt,h.back+=qt}if(w>>>=xt,$-=xt,h.back+=xt,h.length=Ut,Ht===0){h.mode=dt;break}if(Ht&32){h.back=-1,h.mode=J;break}if(Ht&64){v.msg="invalid literal/length code",h.mode=st;break}h.extra=Ht&15,h.mode=_t;case _t:if(h.extra){for(ie=h.extra;$<ie;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}h.length+=w&(1<<h.extra)-1,w>>>=h.extra,$-=h.extra,h.back+=h.extra}h.was=h.length,h.mode=at;case at:for(;Lt=h.distcode[w&(1<<h.distbits)-1],xt=Lt>>>24,Ht=Lt>>>16&255,Ut=Lt&65535,!(xt<=$);){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}if(!(Ht&240)){for(qt=xt,Qe=Ht,je=Ut;Lt=h.distcode[je+((w&(1<<qt+Qe)-1)>>qt)],xt=Lt>>>24,Ht=Lt>>>16&255,Ut=Lt&65535,!(qt+xt<=$);){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}w>>>=qt,$-=qt,h.back+=qt}if(w>>>=xt,$-=xt,h.back+=xt,Ht&64){v.msg="invalid distance code",h.mode=st;break}h.offset=Ut,h.extra=Ht&15,h.mode=rt;case rt:if(h.extra){for(ie=h.extra;$<ie;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}h.offset+=w&(1<<h.extra)-1,w>>>=h.extra,$-=h.extra,h.back+=h.extra}if(h.offset>h.dmax){v.msg="invalid distance too far back",h.mode=st;break}h.mode=ht;case ht:if(d===0)break t;if(Q=X-d,h.offset>Q){if(Q=h.offset-Q,Q>h.whave&&h.sane){v.msg="invalid distance too far back",h.mode=st;break}Q>h.wnext?(Q-=h.wnext,vt=h.wsize-Q):vt=h.wnext-Q,Q>h.length&&(Q=h.length),se=h.window}else se=et,vt=T-h.offset,Q=h.length;Q>d&&(Q=d),d-=Q,h.length-=Q;do et[T++]=se[vt++];while(--Q);h.length===0&&(h.mode=mt);break;case dt:if(d===0)break t;et[T++]=h.length,d--,h.mode=mt;break;case Tt:if(h.wrap){for(;$<32;){if(N===0)break t;N--,w|=M[s++]<<$,$+=8}if(X-=d,v.total_out+=X,h.total+=X,X&&(v.adler=h.check=h.flags?n(h.check,et,X,T-X):e(h.check,et,X,T-X)),X=d,(h.flags?w:kt(w))!==h.check){v.msg="incorrect data check",h.mode=st;break}w=0,$=0}h.mode=wt;case wt:if(h.wrap&&h.flags){for(;$<32;){if(N===0)break t;N--,w+=M[s++]<<$,$+=8}if(w!==(h.total&4294967295)){v.msg="incorrect length check",h.mode=st;break}w=0,$=0}h.mode=ot;case ot:Xt=g;break t;case st:Xt=U;break t;case Rt:return L;case zt:default:return A}return v.next_out=T,v.avail_out=d,v.next_in=s,v.avail_in=N,h.hold=w,h.bits=$,(h.wsize||X!==v.avail_out&&h.mode<st&&(h.mode<Tt||S!==c))&&Et(v,v.output,v.next_out,X-v.avail_out),it-=v.avail_in,X-=v.avail_out,v.total_in+=it,v.total_out+=X,h.total+=X,h.wrap&&X&&(v.adler=h.check=h.flags?n(h.check,et,X,v.next_out-X):e(h.check,et,X,v.next_out-X)),v.data_type=h.bits+(h.last?64:0)+(h.mode===J?128:0)+(h.mode===j||h.mode===K?256:0),(it===0&&X===0||S===c)&&Xt===m&&(Xt=D),Xt}function O(v){if(!v||!v.state)return A;var S=v.state;return S.window&&(S.window=null),v.state=null,m}function C(v,S){var h;return!v||!v.state||(h=v.state,!(h.wrap&2))?A:(h.head=S,S.done=!1,m)}function G(v,S){var h=S.length,M,et,s;return!v||!v.state||(M=v.state,M.wrap!==0&&M.mode!==H)?A:M.mode===H&&(et=1,et=e(et,S,h,0),et!==M.check)?U:(s=Et(v,S,h,h),s?(M.mode=Rt,L):(M.havedict=1,m))}return Kt.inflateReset=tt,Kt.inflateReset2=ct,Kt.inflateResetKeep=Pt,Kt.inflateInit=W,Kt.inflateInit2=yt,Kt.inflate=_,Kt.inflateEnd=O,Kt.inflateGetHeader=C,Kt.inflateSetDictionary=G,Kt.inflateInfo="pako inflate (from Nodeca project)",Kt}var li,wa;function Wo(){return wa||(wa=1,li={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),li}var fi,xa;function Id(){if(xa)return fi;xa=1;function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return fi=t,fi}var ya;function Dd(){if(ya)return Ne;ya=1;var t=Nd(),e=pe(),n=qo(),i=Wo(),r=Ji(),a=Go(),o=Id(),l=Object.prototype.toString;function c(m){if(!(this instanceof c))return new c(m);this.options=e.assign({chunkSize:16384,windowBits:0,to:""},m||{});var g=this.options;g.raw&&g.windowBits>=0&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),g.windowBits>=0&&g.windowBits<16&&!(m&&m.windowBits)&&(g.windowBits+=32),g.windowBits>15&&g.windowBits<48&&(g.windowBits&15||(g.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var p=t.inflateInit2(this.strm,g.windowBits);if(p!==i.Z_OK)throw new Error(r[p]);if(this.header=new o,t.inflateGetHeader(this.strm,this.header),g.dictionary&&(typeof g.dictionary=="string"?g.dictionary=n.string2buf(g.dictionary):l.call(g.dictionary)==="[object ArrayBuffer]"&&(g.dictionary=new Uint8Array(g.dictionary)),g.raw&&(p=t.inflateSetDictionary(this.strm,g.dictionary),p!==i.Z_OK)))throw new Error(r[p])}c.prototype.push=function(m,g){var p=this.strm,A=this.options.chunkSize,U=this.options.dictionary,L,D,E,k,y,R=!1;if(this.ended)return!1;D=g===~~g?g:g===!0?i.Z_FINISH:i.Z_NO_FLUSH,typeof m=="string"?p.input=n.binstring2buf(m):l.call(m)==="[object ArrayBuffer]"?p.input=new Uint8Array(m):p.input=m,p.next_in=0,p.avail_in=p.input.length;do{if(p.avail_out===0&&(p.output=new e.Buf8(A),p.next_out=0,p.avail_out=A),L=t.inflate(p,i.Z_NO_FLUSH),L===i.Z_NEED_DICT&&U&&(L=t.inflateSetDictionary(this.strm,U)),L===i.Z_BUF_ERROR&&R===!0&&(L=i.Z_OK,R=!1),L!==i.Z_STREAM_END&&L!==i.Z_OK)return this.onEnd(L),this.ended=!0,!1;p.next_out&&(p.avail_out===0||L===i.Z_STREAM_END||p.avail_in===0&&(D===i.Z_FINISH||D===i.Z_SYNC_FLUSH))&&(this.options.to==="string"?(E=n.utf8border(p.output,p.next_out),k=p.next_out-E,y=n.buf2string(p.output,E),p.next_out=k,p.avail_out=A-k,k&&e.arraySet(p.output,p.output,E,k,0),this.onData(y)):this.onData(e.shrinkBuf(p.output,p.next_out))),p.avail_in===0&&p.avail_out===0&&(R=!0)}while((p.avail_in>0||p.avail_out===0)&&L!==i.Z_STREAM_END);return L===i.Z_STREAM_END&&(D=i.Z_FINISH),D===i.Z_FINISH?(L=t.inflateEnd(this.strm),this.onEnd(L),this.ended=!0,L===i.Z_OK):(D===i.Z_SYNC_FLUSH&&(this.onEnd(i.Z_OK),p.avail_out=0),!0)},c.prototype.onData=function(m){this.chunks.push(m)},c.prototype.onEnd=function(m){m===i.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};function f(m,g){var p=new c(g);if(p.push(m,!0),p.err)throw p.msg||r[p.err];return p.result}function u(m,g){return g=g||{},g.raw=!0,f(m,g)}return Ne.Inflate=c,Ne.inflate=f,Ne.inflateRaw=u,Ne.ungzip=f,Ne}var ci,ba;function Md(){if(ba)return ci;ba=1;var t=pe().assign,e=$d(),n=Dd(),i=Wo(),r={};return t(r,e,n,i),ci=r,ci}Md();function Ye(t){const[e,n]=t.split(":"),[i,r]=n.split("..");return{chromosome:e,start:+i,end:+r}}Se.prototype.first=function(){return $t(this.nodes()[0])};Se.prototype.last=function(){return $t(this.nodes()[this.size()-1])};class Vn{constructor(e,n,i,r){this.height=r,this.width=i,this.config=e,this.svg_target=n,this.viewer=this._initViewer(n),this.draw()}generateLegend(){return du()}get tracks(){return this.config.tracks??[]}get genome(){return this.config.genome}closeModal(){for(const e of document.getElementsByClassName("gfc-tooltip"))e.style.visibility="hidden"}setSelectedAlleles(e,n){const i=$t(n);i.selectAll(".highlight").remove(),i.selectAll(".variant-deletion,.variant-SNV,.variant-insertion,.variant-delins").filter(r=>r.selected==="true").style("stroke",null).datum(r=>(r.selected="false",r)),ao(e,i)}_initViewer(e){$t(e).selectAll("*").remove();const n=$t(e),r=`${e.replace("#","")} main-view`,a={top:8,right:30,bottom:30,left:40};return n.attr("width",this.width).attr("height",this.height).append("g").attr("transform",`translate(${a.left},${a.top})`).attr("class",r),this.width=this.width-a.left-a.right,this.height=this.height-a.top-a.bottom,$t(`${e} .main-view`)}getTracks(e){return e?this.tracks[0]:this.tracks}draw(){const e=this.width,n=this.config.transcriptTypes??au,i=this.config.variantTypes??ou,r=this.config.binRatio??.01,a=this.config.region,o=this._configureRange(a.start,a.end,e),l=o.range,c=a.chromosome,f=this.config.variantFilter??[],u=this.config.isoformFilter??[],m=this.config.htpVariant??"",g=o.start,p=o.end;new vu({viewer:this.viewer,track:{chromosome:c,start:g,end:p,range:o.range},height:this.height,width:e}).DrawOverviewTrack();let L=100;const D=!0,{viewer:E,genome:k,height:y,tracks:R}=this;R.map(I=>{const{variantData:b,trackData:z}=I;if(I.type===lt.ISOFORM_AND_VARIANT){const F=new pu({viewer:E,height:y,width:e,transcriptTypes:n,variantTypes:i,showVariantLabel:D,trackData:z,variantData:b,variantFilter:f,binRatio:r,isoformFilter:u});L+=F.DrawTrack()}else if(I.type===lt.ISOFORM_EMBEDDED_VARIANT){const F=new gu({viewer:E,height:y,width:e,transcriptTypes:n,variantData:b,trackData:z,variantTypes:i,showVariantLabel:D,variantFilter:f});L+=F.DrawTrack()}else if(I.type===lt.ISOFORM){const F=new mu({region:a,viewer:E,height:y,width:e,genome:k,trackData:z,transcriptTypes:n,htpVariant:m});L+=F.DrawTrack()}else I.type===lt.VARIANT?new Uh({region:a,viewer:E,range:l,height:y,width:e}).DrawTrack():I.type===lt.VARIANT_GLOBAL?new Zh({region:a,viewer:E,track:{...I,range:l},height:y,width:e}).DrawTrack():console.error(`TrackType not found ${I.type}`);$t(this.svg_target).attr("height",L)})}_configureRange(e,n,i){let r=null;const a=17;let o=0,l=[0,0];if(e===n){r=300,o=a*r,e=e-r/2-1,n=n+r/2;const c=$t("#clip-rect").node().getBoundingClientRect().width/2+100;l=[c-o/2,c+o/2]}else return{range:[0,i],start:e,end:n};return{range:l,start:e,end:n}}}const On="https://www.alliancegenome.org/apollo";Ud();Vd();Hd();Bd();Cd();zd();Od();Ld();Fd();function Od(){Pd("NC_045512.2:17894..28259","SARS-CoV-2","covidExample1",lt.ISOFORM,!1)}function Ld(){Zd("NC_045512.2:17894..28259","SARS-CoV-2","nclistviewer",lt.ISOFORM,!1)}function Fd(){pt("5:120503475..120682281","rat","viewerActnFly",lt.ISOFORM_AND_VARIANT,!1,[],[]),Ln("17:43044295..43170245","human","viewerHumanVariant",lt.ISOFORM,!1),pt("9:42732992..42873700","zebrafish","viewerHighlightExample",lt.ISOFORM_AND_VARIANT,!1),pt("chrIV:1276654..1277169","yeast","viewerSGDexample",lt.ISOFORM_AND_VARIANT,!1)}function zd(){pt("2L:130639..135911","fly","viewerFlyExample1",lt.ISOFORM_EMBEDDED_VARIANT,!0),pt("2R:23974973..23989002","fly","viewerFlyExample3",lt.ISOFORM_EMBEDDED_VARIANT,!0,["NT_033778.4:g.23975146T>C"]),pt("2R:23974973..23989002","fly","viewerFlyExample2",lt.ISOFORM_EMBEDDED_VARIANT,!0),pt("2L:130639..135911","fly","viewerFlyExample1NoLabel",lt.ISOFORM_EMBEDDED_VARIANT,!1),pt("2R:23974973..23989002","fly","viewerFlyExample3NoLabel",lt.ISOFORM_EMBEDDED_VARIANT,!1,["NT_033778.4:g.23975146T>C"]),pt("2R:23974973..23989002","fly","viewerFlyExample2NoLabel",lt.ISOFORM_EMBEDDED_VARIANT,!1),pt("2R:23974973..23989002","fly","viewerFlyExample2NoLabelAnd",lt.ISOFORM_AND_VARIANT,!1),pt("3R:22693140..22699809","fly","viewerFlyExample3",lt.ISOFORM_AND_VARIANT,!1),pt("2R:23974972..23989001","fly","viewerFlyExample4",lt.ISOFORM_AND_VARIANT,!1),pt("3R:22693140..22699809","fly","viewerFlyExample5",lt.ISOFORM_AND_VARIANT,!1,["FB:FBal0265700","FB:FBal0265699"]),pt("2R:18614210..18615018","fly","viewerFlyExample6",lt.ISOFORM_AND_VARIANT,!1,["FB:FBal0325512"]),pt("X:2023822..2043557","fly","viewerFlyExample7",lt.ISOFORM_AND_VARIANT,!1,["FB:FBal0212726"])}function Bd(){pt("10:94485648..94489071","rat","networkExampleRat1",lt.ISOFORM_EMBEDDED_VARIANT,!0),pt("10:94485648..94489071","rat","networkExampleRat1And",lt.ISOFORM_AND_VARIANT,!0),pt("1:34987290..35280466","rat","viewerRatExample1",lt.ISOFORM_EMBEDDED_VARIANT,!0),pt("1:34987290..35280466","rat","viewerRatExample1NoLabel",lt.ISOFORM_EMBEDDED_VARIANT,!1)}function Cd(){pt("18:11035719..11058885","mouse","viewerMouseExample6",lt.ISOFORM_AND_VARIANT,!1),Ln("18:11042037..11052567","mouse","viewerMouseExample5",lt.ISOFORM,!1),pt("17:46007760..46041588","mouse","viewerMouseExample4",lt.ISOFORM_AND_VARIANT,!1),pt("11:69550420..69563869","mouse","viewerMouseExample3",lt.ISOFORM_AND_VARIANT,!1),pt("3:115707662..115717830","mouse","viewerMouseExample2",lt.ISOFORM_AND_VARIANT,!1),pt("6:113619452..113636198","mouse","viewerMouseExample1",lt.ISOFORM_EMBEDDED_VARIANT,!0),pt("6:113619452..113636198","mouse","viewerMouseExample1NoLabel",lt.ISOFORM_EMBEDDED_VARIANT,!1),pt("6:113619452..113636198","mouse","viewerMouseExample1NoLabelAnd",lt.ISOFORM_AND_VARIANT,!1)}function Hd(){pt("14:5383966..5390885","zebrafish","viewerFishLbx2",lt.ISOFORM_EMBEDDED_VARIANT,!0),pt("8:40452405..40469627","zebrafish","viewerFishMyl7",lt.ISOFORM_EMBEDDED_VARIANT,!0),pt("14:5383966..5390885","zebrafish","viewerFishLbx2NoLabel",lt.ISOFORM_EMBEDDED_VARIANT,!1),pt("14:5383966..5390885","zebrafish","viewerFishLbx2NoLabelAnd",lt.ISOFORM_AND_VARIANT,!1),pt("14:5383966..5390885","zebrafish","viewerFishLbx2NoLabelAndNameOnly",lt.ISOFORM_AND_VARIANT,!1,["NC_007125.7:g.5388210A>T"]),pt("14:5383966..5390885","zebrafish","viewerFishLbx2NoLabelAndSymbolOnly",lt.ISOFORM_AND_VARIANT,!1,["hu3336"]),pt("8:40452405..40469627","zebrafish","viewerFishMyl7NoLabel",lt.ISOFORM_EMBEDDED_VARIANT,!1)}function Vd(){pt("V:7106..57424","worm","viewerWormEgl8",lt.ISOFORM_EMBEDDED_VARIANT,!0),pt("V:7106..57424","worm","viewerWormEgl8NoLabel",lt.ISOFORM_EMBEDDED_VARIANT,!1),pt("V:7114..57432","worm","networkExampleWorm1",lt.ISOFORM_EMBEDDED_VARIANT,!0),pt("V:7114..57432","worm","networkExampleWorm1And",lt.ISOFORM_AND_VARIANT,!0)}function Ud(){Ln("chrIV:1276345..1277478","yeast","yeastExampleIsoformOnly",lt.ISOFORM,!0),Ln("25:15029041..15049781","zebrafish","zebrafishExampleIsoformOnly",lt.ISOFORM,!0)}function pt(t,e,n,i,r,a,o){(async()=>{try{const l=Ye(t),c=await Mn({region:l,genome:e,track:"All Genes",baseUrl:`${On}/track/`}),f=await Mn({region:l,genome:e,track:"Variants",baseUrl:`${On}/vcf`}),u=new Vn({region:l,showVariantLabel:r,isoformFilter:o??[],variantFilter:a??[],genome:e,tracks:[{type:i,trackData:c,variantData:f}]},`#${n}`,900,500),m=document.getElementById(`${n}CloseButton`);m&&m.addEventListener("click",()=>{u.closeModal()});const g=document.getElementById(`${n}LegendTarget`);g&&(g.innerHTML=u.generateLegend()),n==="networkExampleWorm1And"&&(document.getElementById("wormbutton").addEventListener("click",function(){u.setSelectedAlleles(["WB:WBVar00089535","WB:WBVar02125540","WB:WBVar00242477"],"#networkExampleWorm1And")}),document.getElementById("clrbutton").addEventListener("click",function(){u.setSelectedAlleles([],"#networkExampleWorm1And")})),n==="viewerFlyExample2NoLabelAnd"&&(document.getElementById("flybutton").addEventListener("click",function(){u.setSelectedAlleles(["FB:FBal0242675","FB:FBal0302371","FB:FBal0012433"],"#viewerFlyExample2NoLabelAnd")}),document.getElementById("clrbuttonfly").addEventListener("click",function(){u.setSelectedAlleles([],"#viewerFlyExample2NoLabelAnd")})),n==="viewerHighlightExample"&&(document.getElementById("mausbutton").addEventListener("click",function(){u.setSelectedAlleles(["ZFIN:ZDB-ALT-130411-164"],"#viewerHighlightExample")}),document.getElementById("clrbuttonmaus").addEventListener("click",function(){u.setSelectedAlleles([],"#viewerHighlightExample")}))}catch(l){console.error(l)}})()}function Ln(t,e,n,i,r,a){(async()=>{try{const o=Ye(t),l=await Mn({region:o,genome:e,track:"All Genes",baseUrl:`${On}/track/`});new Vn({region:o,showVariantLabel:r,variantFilter:a??[],genome:e,tracks:[{type:i,trackData:l}]},`#${n}`,900,500)}catch(o){console.error(o)}})()}async function Zd(t,e,n,i,r,a){const o=Ye(t),l=await Ed({region:o,baseUrl:"https://s3.amazonaws.com/agrjbrowse/docker/3.2.0/SARS-CoV-2/tracks/",urlTemplate:"All%20Genes/NC_045512.2/trackData.jsonz"});new Vn({region:o,genome:e,showVariantLabel:r,variantFilter:[],tracks:[{type:i,trackData:l}]},`#${n}`,900,500)}async function Pd(t,e,n,i,r,a){const o=Ye(t),l=await Mn({region:o,genome:e,track:"Mature peptides",baseUrl:`${On}/track`});new Vn({region:Ye(t),genome:e,showVariantLabel:r,variantFilter:[],tracks:[{type:i,trackData:l}]},`#${n}`,900,500)}
